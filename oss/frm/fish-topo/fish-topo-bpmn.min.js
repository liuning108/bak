!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fishTopoBpmn=e():t.fishTopoBpmn=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){t.exports=i(2),i(110)},function(t,e,i){function n(t,e){this.id,this.group,this._dom=t,this._zr=h.init(t,{renderer:e.renderer||"canvas",devicePixelRatio:e.devicePixelRatio}),this.allNodes=[],this.subProcessNode=[],this.domArray=[],this.overlapArray=[],this.selectedNode=null,this.isNode=!1,this.rect,this.operationNode,this.step=0,this.stepJson=[],this.opts=e,this._api=new o(this),this.forbidEdit=!1,this.connectionManager=new v,this.lineOperationManager=new m(this.connectionManager),this.model=new p({}),this.model.set(_.RESOURCE_ID,d.getUUID()),this.model.set(_.BPMN_TYPE,_.TEMPLATE),a.call(this),u.registerBPMNNode()}var r=i(3),o=i(59),s=i(60),a=i(11),h=i(61),l=i(4),c=i(25),u=i(72),d=i(73),p=i(78),f=i(75),g=i(102),v=i(104),y=i(96),m=i(107),x=i(108),_=i(101);i(109);var b=n.prototype;b.getDom=function(){return this._dom},b.getZr=function(){return this._zr},b.getWidth=function(){return this._zr.getWidth()},b.getHeight=function(){return this._zr.getHeight()},b.isDisposed=function(){return this._disposed},b.dispose=function(){this._disposed=!0,this._zr.dispose(),A[this.id]=null},b.resize=function(t,e){$(this.getDom()).css("width",t),$(this.getDom()).css("height",e),this._zr.resize(),this._zr.remove(this.group),this.group=new r.Group,this.gridLine(.2),this._zr.add(this.group)},b.init=function(){this.group=new r.Group,1!=this.opts.showGridLine&&"true"!=opts.showGridLine||(this.gridLine(.2),this._zr.add(this.group)),this._zr.on("mouseup",function(t){this.operationNode&&(this._zr.remove(this.operationNode),this.operationNode=null);var e=t.target;e&&e.connector instanceof y||(this.connectionManager.clearSelectCon(),e&&e.operation&&1==e.operation||this.lineOperationManager.hideAllLineOperation())}.bind(this)),this._zr.on("click",function(t){var e=t.target;if(!(e&&e.parent&&e.parent.resourceId)){var i={};i.event=t,i.type="click",i.target=this,this._api.trigger(i.type,i)}}.bind(this)),this.on("conPointsGroup:click",function(t){this.lineOperationManager.bindOperation(t.lineNode)}.bind(this))},b.setShapeModel=function(t,e,i,n){_.isTemplate(t)?(this.model.mergeOption(e),i>0&&n>0&&this.resize(i,n)):_.isFlow(t)?this.connectionManager.setModel(t,e):t.setModel(e)},b.clear=function(t){this.allNodes=[],this.subProcessNode=[],this.domArray=[],this.overlapArray=[],this.selectedNode=null,this.rect=null,this.connectionManager.connectors=[],this._zr.clear(),this._zr.add(this.group),1!=t&&this.stepCounter()},b.forbidGridLine=function(t){1==t?this._zr.remove(this.group):(this._zr.remove(this.group),this.group=new r.Group,this.gridLine(.2),this._zr.add(this.group))},b.toJson=function(){return u.toJson(this.model,this.allNodes,this.connectionManager.connectors)},b.fromJson=function(t){u.fromJson(this,t)},b.gridLine=function(t){for(var e=this.opts.gridLineSpacing,i=parseInt(this.getWidth()/e),n=0;n<=i;n++){var o=new r.Line({shape:{x1:n*e,y1:0,x2:n*e,y2:this.getHeight()},style:{lineDash:[1],opacity:t},z:0,draggable:!1,cursor:"default"});this.group.add(o)}for(var s=parseInt(this.getHeight()/e,e),a=0;a<=s;a++){var h=new r.Line({shape:{x1:0,y1:a*e,x2:this.getWidth(),y2:a*e},style:{lineDash:[1],opacity:t},z:0,draggable:!1,cursor:"default"});this.group.add(h)}},b.addNode=function(t,e,i,n){if(e>=0&&i>=0){var r=new p({});return r.set(_.BPMN_TYPE,t),r.set("bounds.upperLeft",{x:e,y:i}),n&&r.set("properties",n),this.addNodeByModel(r,!0)}},b.addNodeByModel=function(t,e,i){var n,r=this,o=f.getClass(t.get(_.BPMN_TYPE));if(o){var s=new o(t,this._api);if(0==this.subProcessNode.length)this._zr.add(s),n={id:s.id,position:[s.getRect().x,s.getRect().y],width:s.getRect().width,height:s.getRect().height},_.isSlotEvent(s)||this.overlapArray.push(n);else if(this._zr.add(s),n={id:s.id,position:[s.getRect().x,s.getRect().y],width:s.getRect().width,height:s.getRect().height},_.isSlotEvent(s)||this.overlapArray.push(n),e)for(var a=0;a<this.subProcessNode.length;a++)if(this.subProcessNode[a].rectContain(s.getRect().x,s.getRect().y)){var h=this.subProcessNode[a].getRect().width/2+(s.getRect().x-this.subProcessNode[a].getRect().x),l=this.subProcessNode[a].getRect().height/2+(s.getRect().y-this.subProcessNode[a].getRect().y);s.setPosition(h,l),this.subProcessNode[a].add(s),this._zr.remove(s);for(var c=0;c<r.overlapArray.length;c++)s.id==r.overlapArray[c].id&&r.overlapArray.splice(c,1);break}return _.isSubProcess(s)&&this.subProcessNode.push(s),this.allNodes.push(s),this.domArray.push(n),s.on("mousedown",function(t){1!=r.forbidEdit&&(r.newDrag(this,t.event.clientX,t.event.clientY),_.isSlotEvent(this)&&r.bindEventNode(),t.cancelBubble=!0)}),s.on("click",function(t){r.nodeClickHandler(this),t.cancelBubble=!0}),_.isActivity(s)&&r.creatTip(s),s.on("mouseover",function(){if(this.alarm&&1==this.alarm.isShow){this.alarm.show(),this.alarm.eachChild(function(t){t.show()});var t=this.alarm.childOfName("Text"),e=t.getBoundingRect().width+4,i=t.getBoundingRect().height+8,n=[[0,0],[e,0],[e,i],[e/2-3,i],[e/2,i+3],[e/2+3,i],[0,i],[0,0]],r=this.alarm.childOfName("Polyline");r.attr("shape",{points:n});var o=[s.position[0]+s.getBoundingRect().width-this.alarm.getBoundingRect().width/2,s.position[1]-this.alarm.getBoundingRect().height-3];this.alarm.attr("position",o)}}),s.on("mouseout",function(){this.alarm&&(this.alarm.hide(),this.alarm.eachChild(function(t){t.hide()}))}),this._triggerCreateEvent(s),1!=i&&this.stepCounter(),s}},b.childOfName=function(t){for(var e=[],i=0;i<this.allNodes.length;i++)this.allNodes[i].model.get("properties.name")==t&&e.push(this.allNodes[i]);return e.length>1?e:e[0]},b.findElements=function(t,e){for(var i=this.allNodes,n=this.connectionManager.connectors,r=[],o=0;o<i.length;o++){var s=i[o];t.call(e,s,o)&&r.push(s)}for(var a=0;a<n.length;a++){var h=n[a];t.call(e,h,a)&&r.push(h)}return r},b.addConnectorByModel=function(t,e){var i=null,n=null;if(l.each(this.allNodes,function(e){var r=e.model.get("outgoing");r.indexOf(t.get("resourceId"))!==-1&&(i=e);var o=t.get("outgoing");o.indexOf(e.resourceId)!==-1&&(n=e)}),i&&n){var r=this.connectionManager.connectorCreateByOptions(i,n,{model:t,isFromModel:!0},this._api);e?e.add(r):this._zr.add(r),r.on("mousedown",function(){this.connectionManager.connectorForbidEdit(that.forbidEdit),this.lineOperationManager.isEdit=!this.forbidEdit,this.isNode=!1}.bind(this))}},b.addIcon=function(t,e){this.lineOperationManager.addIcon(t,e,this._zr,this._api)},b.bindLineDelete=function(t){var e=this._zr;t.parent&&(e=t.parent);var i=this.lineOperationManager.addIcon("delete",this.lineOperationManager.deleteIconObj(e,t),e,this._api);i&&i.on("click",function(){this._triggerDeleteEvent(t)}.bind(this))},b.checkLineNode=function(t){for(var e=[],i=[],n=this.connectionManager.connectors,r=0,o=n.length;r<o;r++)n[r].startNode==t&&i.push(n[r].endNode);for(var s=0,a=n.length;s<a;s++)n[s].endNode==t&&e.push(n[s].startNode);return[e,i]},b.initOperationNode=function(t){var e=this;this.operationNode=new g(t,e._zr,this.forbidEdit),this.operationNode.on(g.ARROW_DRAGSTART,function(t){var i=t.event.offsetX,n=t.event.offsetY,r=t.event.target;r.hide();var o=new s(i,n);if(e.selectedNode.parent&&_.isSubProcess(e.selectedNode.parent)){var a=e.selectedNode.parent;o=new s(i-a.position[0],n-a.position[1])}var h=e.connectionManager.manageTempConnector(e.selectedNode,o,r.lineType);e.selectedNode.parent&&_.isSubProcess(e.selectedNode.parent)?e.selectedNode.parent.add(h):e._zr.add(h)}),this.operationNode.on(g.ARROW_DRAG,function(t){var i=t.event.offsetX,n=t.event.offsetY,r=new s(i,n),o=t.event.target;if(e.selectedNode.parent&&_.isSubProcess(e.selectedNode.parent)){var a=e.selectedNode.parent;r=new s(i-a.position[0],n-a.position[1])}e.connectionManager.manageTempConnector(e.selectedNode,r,o.lineType)}),this.operationNode.on(g.ARROW_DRAGEND,function(i){var n=i.event.offsetX,r=i.event.offsetY,o=null,s=i.event.target;s.show(),t.parent?_.isSubProcess(t.parent)&&(e.connectionManager.removeTempConnector(t.parent),o=u.findHover(e.allNodes,n,r,e.subProcessNode)):(o=u.findHover(e.allNodes,n,r),e.connectionManager.removeTempConnector(e._zr)),o&&e.selectedNode!=o&&e._createConnectorByNodes(e.selectedNode,o,s.lineType);var a=e.selectedNode.getRect();e.operationNode.render(t,e._zr,a),e.stepCounter()}),this.operationNode.on("OperationNode:deleteClick",function(){e._triggerDeleteEvent(e.selectedNode),e.removeNode(e.selectedNode),e.stepCounter()}),this.operationNode.on("OperationNode:scaleDragLeft",function(t){this.virtualRect.setShape({points:t.points})}),this.operationNode.on("OperationNode:scaleDragRight",function(t){this.virtualRect.setShape({points:t.points})}),this.operationNode.on("OperationNode:scaleDragEnd",function(t){if(this.virtualRect.shape.points||null!=this.virtualRect.shape.points){var i,n=this.virtualRect.shape.points[1][0]-this.virtualRect.shape.points[0][0]-1,r=this.virtualRect.shape.points[2][1]-this.virtualRect.shape.points[1][1]-1;"left"==t.arrowName&&(i=[e.selectedNode.position[0]-(n+1-e.selectedNode.getRect().width),e.selectedNode.position[1]-(r+1-e.selectedNode.getRect().height)]),"right"==t.arrowName&&(i=[e.selectedNode.position[0],e.selectedNode.position[1]]),e.selectedNode.refresh({shape:{width:n,height:r}});var o=!0;r+1<e.selectedNode.getBoundingRect().height&&(e.selectedNode.refresh({shape:{height:e.selectedNode.getBoundingRect().height}}),o=!1),n+1<e.selectedNode.getBoundingRect().width&&(e.selectedNode.refresh({shape:{width:e.selectedNode.getBoundingRect().width}}),o=!1),1==o&&e.selectedNode.refresh({position:i});for(var s=0;s<e.domArray.length;s++)e.selectedNode.id==e.domArray[s].id&&(e.domArray[s].position=[i[0]+(n+1)/2,i[1]+(r+1)/2]);e.nodeClickHandler(e.selectedNode);for(var a=0;a<e.overlapArray.length;a++)e.selectedNode.id==e.overlapArray[a].id&&(e.overlapArray[a]={id:e.selectedNode.id,position:[e.selectedNode.getRect().x,e.selectedNode.getRect().y],width:e.selectedNode.getRect().width,height:e.selectedNode.getRect().height})}e.connectionManager.refreshLineByNode(e.selectedNode);var h=d.getSoltPoints(e.selectedNode);if(e.selectedNode.slotEvent&&e.selectedNode.slotEvent.length>0)for(var l=0;l<e.selectedNode.slotEvent.length;l++)for(var c=(e.selectedNode.slotEvent[l],0);c<t.startSlotPoints.length;c++)e.selectedNode.slotEvent[l].position[0]-t.startPosition[0]==t.startSlotPoints[c][0]&&e.selectedNode.slotEvent[l].position[1]-t.startPosition[1]==t.startSlotPoints[c][1]&&(e.selectedNode.slotEvent[l].attr("position",[h[c][0]+e.selectedNode.position[0],h[c][1]+e.selectedNode.position[1]]),e.connectionManager.refreshLineByNode(e.selectedNode.slotEvent[l]));e.stepCounter()}),this._zr.add(this.operationNode)},b.removeNode=function(t){var e,i=this;e=t.parent?t.parent:i._zr,e.remove(t);for(var n=0;n<i.allNodes.length;n++)t.id==i.allNodes[n].id&&i.allNodes.splice(n,1);for(var r=0;r<i.domArray.length;r++)t.id==i.domArray[r].id&&i.domArray.splice(r,1);for(var o=0;o<i.overlapArray.length;o++)t.id==i.overlapArray[o].id&&i.overlapArray.splice(o,1);if(i.connectionManager.deleteSelectCon(t,e),(_.isActivity(t)||_.isSubProcess(t))&&t.slotEvent&&t.slotEvent.length>0)for(var s=0;s<t.slotEvent.length;s++){t.slotEvent[s].parent?_.isSubProcess(t.slotEvent[s].parent)&&t.slotEvent[s].parent.remove(t.slotEvent[s]):i._zr.remove(t.slotEvent[s]);for(var a=0;a<i.allNodes.length;a++)t.slotEvent[s].id==i.allNodes[a].id&&i.allNodes.splice(a,1);for(var h=0;h<i.domArray.length;h++)t.slotEvent[s].id==i.domArray[h].id&&i.domArray.splice(h,1)}if(_.isSlotEvent(t))for(var l=0;l<i.allNodes.length;l++)if(i.allNodes[l].isCanSlot&&i.allNodes[l].slotEvent&&i.allNodes[l].slotEvent.length>0)for(var c=0;c<i.allNodes[l].slotEvent.length;c++)t.id==i.allNodes[l].slotEvent[c].id&&i.allNodes[l].slotEvent.splice(c,1);this.stepCounter()},b._createConnectorByNodes=function(t,e,i){var n=this.connectionManager.connectorCreate(t,e,i,this._api);return t.parent&&e.parent?e.parent.add(n):this._zr.add(n),n.on("mousedown",l.bind(function(){this.connectionManager.connectorForbidEdit(this.forbidEdit),this.lineOperationManager.isEdit=!this.forbidEdit,this.isNode=!1},this)),this._triggerCreateEvent(n),n},b._triggerDeleteEvent=function(t){var e={};e.type="delete",e.target=t,this._api.trigger(e.type,e)},b._triggerCreateEvent=function(t){var e={};e.type="create",e.target=t,this._api.trigger(e.type,e)},b.nodeClickHandler=function(t){this.selectedNode=t;var e=t.getRect();this.operationNode||this.initOperationNode(t),this.forbidEdit||this.rect.attr("style",{stroke:"rgba(0, 0, 0, 1)"}),this.operationNode.refreshPostion(t,e)},b.initVirtualLine=function(t){x.createGuidelines(this._zr),this.rect=new r.Polyline({position:[t.x,t.y],shape:{points:t.points},style:{lineDash:[2]},z:3}),this._zr.add(this.rect)},b.bindEventNode=function(){for(var t=0;t<this.allNodes.length;t++)this.allNodes[t].isCanSlot&&this.creatSlot(this.allNodes[t]);this._zr.on("mouseup",function(){for(var t=0;t<this.allNodes.length;t++)if(this.allNodes[t].isCanSlot&&this.allNodes[t].slot&&this.allNodes[t].slot.length>0)for(var e=0;e<this.allNodes[t].slot.length;e++)this.allNodes[t].remove(this.allNodes[t].slot[e])}.bind(this))},b.creatSlot=function(t){t.slot=[];for(var e=d.getSoltPoints(t),i=0;i<8;i++){var n=new r.Circle({position:e[i],shape:{cx:0,cy:0,r:10},style:{lineWidth:1,stroke:"rgba(0,0,0,0.6)",fill:"transparent"}});t.slot.push(n),t.add(n)}},b.newDrag=function(t,e,i){function n(e){function i(){g=0,o.rect.attr("style",{stroke:"rgba(0, 0, 0, 1)"})}function n(){g=1,o.rect.attr("style",{stroke:"rgba(255, 0, 0, 1)"})}for(var r=[o.getWidth()-(o.rect.shape.points[1][0]-o.rect.shape.points[0][0])/2,o.getHeight()-(o.rect.shape.points[2][1]-o.rect.shape.points[1][1])/2],l=[(o.rect.shape.points[1][0]-o.rect.shape.points[0][0])/2,(o.rect.shape.points[2][1]-o.rect.shape.points[1][1])/2],y=0;y<Math.abs(parseInt((e.event.clientX-c)/s));y++)v=1,e.event.clientX-c<0?f[0]=d-s*y:f[0]=d+s*y,f[0]<l[0]&&(f[0]=l[0]),f[0]>r[0]&&(f[0]=r[0]);for(var m=0;m<Math.abs(parseInt((e.event.clientY-u)/s));m++)v=1,e.event.clientY-u<0?f[1]=p-s*m:f[1]=p+s*m,f[1]<l[1]&&(f[1]=l[1]),f[1]>r[1]&&(f[1]=r[1]);if(o.rect.attr("position",f),x.judgeAlignment(f,h,o.getWidth(),o.getHeight()),t.parent){var b=Math.abs(f[0]-t.parent.getRect().x),w=Math.abs(t.getRect().width/2-t.parent.getRect().width/2),A=Math.abs(f[1]-t.parent.getRect().y),P=Math.abs(t.getRect().height/2-t.parent.getRect().height/2);b>w-s||A>P-s?n():i()}if(!t.parent)for(var T=0,M=o.overlapArray.length;T<M;T++){var C=o.overlapArray[T];if(i(),C.id!=o.rect.id&&C.id!=t.id)if(a.width>C.width)if(a.height>C.height){if(Math.abs(f[0]-C.position[0])<a.width/2&&Math.abs(f[1]-C.position[1])<a.height/2){n();break}i()}else{if(Math.abs(f[0]-C.position[0])<a.width/2&&Math.abs(f[1]-C.position[1])<C.height/2){n();break}i()}else if(a.height>C.height){if(Math.abs(f[0]-C.position[0])<C.width/2&&Math.abs(f[1]-C.position[1])<a.height/2){n();break}i()}else{if(Math.abs(f[0]-C.position[0])<C.width/2&&Math.abs(f[1]-C.position[1])<C.height/2){n();break}i()}}if(_.isSlotEvent(t))for(var E=0;E<o.allNodes.length;E++)if(o.allNodes[E].isCanSlot&&o.allNodes[E].slot&&o.allNodes[E].slot.length>0)for(var S=0;S<o.allNodes[E].slot.length;S++){var L=[o.allNodes[E].slot[S].position[0]+o.allNodes[E].position[0],o.allNodes[E].slot[S].position[1]+o.allNodes[E].position[1]];if(f[0]==L[0]&&f[1]==L[1]){o.rect.attr("style",{stroke:"rgba(0, 255, 0, 1)"});break}}}function r(){if(o._zr.off("mousemove",y),o._zr.off("mouseup",m),o._zr.off("globalout",m),t.parent&&t.parent.off("globalout",m),o.rect.hide(),x.virtualXLine.attr("shape",{x2:0}),x.virtualYLine.attr("shape",{y2:0}),0==g){if(t.parent){if(_.isSubProcess(t.parent)){var e=t.parent.getRect().width/2+(f[0]-t.parent.getRect().x),i=t.parent.getRect().height/2+(f[1]-t.parent.getRect().y);if(t.slotEvent&&t.slotEvent.length>0)for(var n=0;n<t.slotEvent.length;n++){var r=[t.slotEvent[n].position[0]+e-l.clone(t.position[0])-t.getBoundingRect().width/2,t.slotEvent[n].position[1]+i-l.clone(t.position[1])-t.getBoundingRect().height/2];t.slotEvent[n].attr("position",r),o.connectionManager.refreshLineByNode(t.slotEvent[n])}t.setPosition(e,i)}}else{if(t.slotEvent&&t.slotEvent.length>0)for(var s=0;s<t.slotEvent.length;s++){var r=[t.slotEvent[s].position[0]+f[0]-l.clone(t.position[0])-t.getBoundingRect().width/2,t.slotEvent[s].position[1]+f[1]-l.clone(t.position[1])-t.getBoundingRect().height/2];t.slotEvent[s].attr("position",r),o.connectionManager.refreshLineByNode(t.slotEvent[s])}t.setPosition(f[0],f[1])}for(var a=0;a<o.domArray.length;a++)t.id==o.domArray[a].id&&(o.domArray[a].position=[f[0],f[1]]);for(var h=0;h<o.overlapArray.length;h++)t.id==o.overlapArray[h].id&&(o.overlapArray[h]={id:t.id,position:[f[0],f[1]],width:t.getRect().width,height:t.getRect().height})}if(1==v&&(o.nodeClickHandler(t),o.connectionManager.refreshLineByNode(t),o.stepCounter()),_.isSlotEvent(t))for(var c=0;c<o.allNodes.length;c++)if(o.allNodes[c].isCanSlot&&o.allNodes[c].slot&&o.allNodes[c].slot.length>0)for(var u=0;u<o.allNodes[c].slot.length;u++){var d=[o.allNodes[c].slot[u].position[0]+o.allNodes[c].position[0],o.allNodes[c].slot[u].position[1]+o.allNodes[c].position[1]],p=[];if(t.parent?_.isSubProcess(t.parent)&&(p[0]=t.parent.getRect().width/2+(f[0]-t.parent.getRect().x),p[1]=t.parent.getRect().height/2+(f[1]-t.parent.getRect().y)):p=f,p[0]==d[0]&&p[1]==d[1]){o.allNodes[c].slotEvent.push(t);break}for(var b=0;b<o.allNodes[c].slotEvent.length;b++)t.id==o.allNodes[c].slotEvent[b].id&&o.allNodes[c].slotEvent.splice(b,1)}}var o=this;o.selectedNode=t,o.isNode=!0;var s=this.opts.gridLineSpacing,a=t.getRect(),h=o.domArray;$("body").one("keydown",function(t){var e=t||window.event;if(46==e.keycode||46==e.charCode||46==e.which){if(1==o.isNode){o.selectedNode.off(),o.selectedNode.parent?_.isSubProcess(o.selectedNode.parent)&&o.selectedNode.parent.remove(o.selectedNode):o._zr.remove(o.selectedNode);for(var i=0;i<o.allNodes.length;i++)o.selectedNode.id==o.allNodes[i].id&&o.allNodes.splice(i,1);for(var n=0;n<h.length;n++)o.selectedNode.id==h[n].id&&h.splice(n,1);for(var r=0;r<o.overlapArray.length;r++)o.selectedNode.id==o.overlapArray[r].id&&o.overlapArray.splice(r,1);o.operationNode&&(o._zr.remove(o.operationNode),o.operationNode=null),o.connectionManager.deleteSelectCon(o.selectedNode,o._zr)}else o.connectionManager.deleteLine(o._zr);this.stepCounter()}});var c,u,d,p;c=e,u=i,t.parent?_.isSubProcess(t.parent)&&(d=a.x+t.parent.position[0],p=a.y+t.parent.position[1]):(d=a.x,p=a.y),o.rect?(o.rect.attr("position",[d,p]),o.rect.setShape({points:a.points}),o.rect.show()):(o.initVirtualLine(a),o.rect.attr("position",[d,p]));var f=[d,p],g=0,v=0,y=function(t){n(t)},m=function(t){r(t)};this._zr.on("mousemove",y),this._zr.on("mouseup",m),this._zr.on("globalout",m)},b.creatTip=function(t){var e=new r.Group;e.isShow=!1;var i,n=t.model.get("properties.name")||"";i=n.length>64?n.substr(0,64)+"..":n;var o=new r.Text({style:{text:i,textFont:"16px Microsoft YaHei",fill:"#000000",textBaseline:"top"},position:[2,0],z:2});o.name="Text",e.add(o);var s=new r.Polyline({style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:1});s.name="Polyline",e.add(s),this._zr.add(e),t.alarm=e,e.hide(),e.eachChild(function(t){t.hide()})},b.stepCounter=function(){this.stepJson.splice(this.step,this.stepJson.length-this.step),this.step+=1;var t=this.toJson();this.stepJson.push(JSON.stringify(t))},l.mixin(n,a);var w=new Date-0,A={},P="_fishTopoBpmn_instance_",T={version:"1.7.0",dependencies:{zrender:"3.0.4"}};T.init=function(t,e){if(!t)throw new Error("Initialize failed: invalid dom.");e=e||{},l.defaults(e,{type:"bpmn",showGridLine:!0,devicePixelRatio:1,gridLineSpacing:10});var i=new n(t,e);return i.init(),i.id="ft_"+w++,A[i.id]=i,t.setAttribute&&t.setAttribute(P,i.id),i},T.getInstanceByDom=function(t){var e=t.getAttribute(P);return A[e]},T.dispose=function(t){var e;l.isDom(t)?e=T.getInstanceByDom(t):"string"==typeof t&&(e=A[t]),e instanceof T&&!e.isDisposed()&&e.dispose()},T.Bpmn=_,T.BPMNNode=f,T.graphic=r,T.BoundingRect=c,T.util={},l.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend"],function(t){T.util[t]=l[t]}),t.exports=T},function(t,e,i){"use strict";function n(t){if(!t.__isHover){if(t.__hoverStlDirty){var e=t.style.stroke,i=t.style.fill,n=t.__hoverStl,r=y.lift;n.fill=n.fill||i&&(i instanceof _?i:r(i,-.1)),n.stroke=n.stroke||e&&(e instanceof _?e:r(e,-.1));var o={};for(var s in n)n.hasOwnProperty(s)&&(o[s]=t.style[s]);t.__normalStl=o,t.__hoverStlDirty=!1}t.setStyle(t.__hoverStl),t.z2+=1,t.__isHover=!0}}function r(t){if(t.__isHover){var e=t.__normalStl;e&&t.setStyle(e),t.z2-=1,t.__isHover=!1}}function o(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&n(t)}):n(t)}function s(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&r(t)}):r(t)}function a(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0}function h(){!this.__isEmphasis&&o(this)}function l(){!this.__isEmphasis&&s(this)}function c(){this.__isEmphasis=!0,o(this)}function u(){this.__isEmphasis=!1,s(this)}function d(t,e,i,n,r){var o=t?"Update":"",s=n&&n.getShallow("animationDuration"+o),a=n&&n.getShallow("animationEasing"+o);n&&n.getShallow("animation")?e.animateTo(i,s,a,r):(e.attr(i),r&&r())}var p=i(4),f=i(5),g=Math.round,v=i(6),y=i(19),m=i(13),x=i(14),_=i(38),b=i(39),w={};w.Util=p,w.Group=i(40),w.Image=i(41),w.Text=i(42),w.textContain=i(24),w.Circle=i(43),w.Sector=i(44),w.Ring=i(46),w.Polygon=i(47),w.Polyline=i(51),w.Rect=i(52),w.Line=i(54),w.BezierCurve=i(55),w.Arc=i(56),w.LinearGradient=i(57),w.RadialGradient=i(58),w.BoundingRect=i(25),w.extendShape=function(t){return v.extend(t)},w.extendPath=function(t,e){return f.extendFromString(t,e)},w.makePath=function(t,e,i,n){var r=f.createFromString(t,e);b.call(r);var o=r.getBoundingRect();if(i){var s=o.width/o.height;if("center"===n){var a,h=i.height*s;h<=i.width?a=i.height:(h=i.width,a=h/s);var l=i.x+i.width/2,c=i.y+i.height/2;i.x=l-h/2,i.y=c-a/2,i.width=h,i.height=a}this.resizePath(r,i)}return p.inherits(r,b),r},w.mergePath=f.mergePath,w.resizePath=function(t,e){if(t.applyTransform){var i=t.getBoundingRect(),n=i.calculateTransform(e);t.applyTransform(n)}},w.subPixelOptimizeLine=function(t){var e=w.subPixelOptimize,i=t.shape,n=t.style.lineWidth;return g(2*i.x1)===g(2*i.x2)&&(i.x1=i.x2=e(i.x1,n,!0)),g(2*i.y1)===g(2*i.y2)&&(i.y1=i.y2=e(i.y1,n,!0)),t},w.subPixelOptimizeRect=function(t){var e=w.subPixelOptimize,i=t.shape,n=t.style.lineWidth,r=i.x,o=i.y,s=i.width,a=i.height;return i.x=e(i.x,n,!0),i.y=e(i.y,n,!0),i.width=Math.max(e(r+s,n,!1)-i.x,0===s?0:1),i.height=Math.max(e(o+a,n,!1)-i.y,0===a?0:1),t},w.subPixelOptimize=function(t,e,i){var n=g(2*t);return(n+g(e))%2===0?n/2:(n+(i?1:-1))/2},w.doEnterHover=o,w.doLeaveHover=s,w.setElementHoverStl=a,w.setHoverStyle=function(t,e){"group"===t.type?t.traverse(function(t){"group"!==t.type&&a(t,e)}):a(t,e),t.on("mouseover",h).on("mouseout",l),t.on("emphasis",c).on("normal",u)},w.setNormalStyle=function(t,e){if(t.__normalStl)for(var i in e)t.__normalStl.hasOwnProperty(i)&&(t.__normalStl[i]=e[i])},w.setText=function(t,e,i){var n=e.getShallow("position")||"inside",r=n.indexOf("inside")>=0?"white":i,o=e.getModel("textStyle");p.extend(t,{textDistance:e.getShallow("distance")||5,textFont:o.getFont(),textPosition:n,textFill:o.getTextColor()||r})},w.updateProps=p.curry(d,!0),w.initProps=p.curry(d,!1),w.getTransform=function(t,e){for(var i=m.identity([]);t&&t!==e;)m.mul(i,t.getLocalTransform(),i),t=t.parent;return i},w.applyTransform=function(t,e,i){return i&&(e=m.invert([],e)),x.applyTransform([],t,e)},w.transformDirection=function(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return o=w.applyTransform(o,e,i),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"},t.exports=w},function(t,e){function i(t){if(null==t||"object"!=typeof t)return t;var e=t,n=O.call(t);if("[object Array]"===n){e=[];for(var r=0,o=t.length;r<o;r++)e[r]=i(t[r])}else if(z[n])e=t.constructor.from(t);else if(!k[n]&&!R(t)&&!T(t)){e={};for(var s in t)t.hasOwnProperty(s)&&(e[s]=i(t[s]))}return e}function n(t,e,r){if(!A(e)||!A(t))return r?i(e):t;for(var o in e)if(e.hasOwnProperty(o)){var s=t[o],a=e[o];!A(a)||!A(s)||_(a)||_(s)||T(a)||T(s)||P(a)||P(s)||R(a)||R(s)?!r&&o in t||(t[o]=i(e[o],!0)):n(s,a,r)}return t}function r(t,e){for(var i=t[0],r=1,o=t.length;r<o;r++)i=n(i,t[r],e);return i}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function s(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}function a(){return document.createElement("canvas")}function h(){return N||(N=q.createCanvas().getContext("2d")),N}function l(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1}function c(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.prototype.constructor=t,t.superClass=e}function u(t,e,i){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,s(t,e,i)}function d(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function p(t,e,i){if(t&&e)if(t.forEach&&t.forEach===I)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function f(t,e,i){if(t&&e){if(t.map&&t.map===H)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}}function g(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===Y)return t.reduce(e,i,n);for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}}function v(t,e,i){if(t&&e){if(t.filter&&t.filter===D)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}}function y(t,e,i){if(t&&e)for(var n=0,r=t.length;n<r;n++)if(e.call(i,t[n],n,t))return t[n]}function m(t,e){var i=F.call(arguments,2);return function(){return t.apply(e,i.concat(F.call(arguments)))}}function x(t){var e=F.call(arguments,1);return function(){return t.apply(this,e.concat(F.call(arguments)))}}function _(t){return"[object Array]"===O.call(t)}function b(t){return"function"==typeof t}function w(t){return"[object String]"===O.call(t)}function A(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function P(t){return!!k[O.call(t)]}function T(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function M(t){return t!==t}function C(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]}function E(){return Function.call.apply(F,arguments)}function S(t,e){if(!t)throw new Error(e)}function L(t){t[U]=!0}function R(t){return t[U]}var N,k={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},z={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},O=Object.prototype.toString,B=Array.prototype,I=B.forEach,D=B.filter,F=B.slice,H=B.map,Y=B.reduce,U="__ec_primitive__",q={inherits:c,mixin:u,clone:i,merge:n,mergeAll:r,extend:o,defaults:s,getContext:h,createCanvas:a,indexOf:l,slice:E,find:y,isArrayLike:d,each:p,map:f,reduce:g,filter:v,bind:m,curry:x,isArray:_,isString:w,isObject:A,isFunction:b,isBuiltInObject:P,isDom:T,eqNaN:M,retrieve:C,assert:S,setAsPrimitive:L,noop:function(){}};t.exports=q},function(t,e,i){function n(t,e,i,n,r,o,s,a,h,l,c){var g=h*(f/180),m=p(g)*(t-i)/2+d(g)*(e-n)/2,x=-1*d(g)*(t-i)/2+p(g)*(e-n)/2,_=m*m/(s*s)+x*x/(a*a);_>1&&(s*=u(_),a*=u(_));var b=(r===o?-1:1)*u((s*s*(a*a)-s*s*(x*x)-a*a*(m*m))/(s*s*(x*x)+a*a*(m*m)))||0,w=b*s*x/a,A=b*-a*m/s,P=(t+i)/2+p(g)*w-d(g)*A,T=(e+n)/2+d(g)*w+p(g)*A,M=y([1,0],[(m-w)/s,(x-A)/a]),C=[(m-w)/s,(x-A)/a],E=[(-1*m-w)/s,(-1*x-A)/a],S=y(C,E);v(C,E)<=-1&&(S=f),v(C,E)>=1&&(S=0),0===o&&S>0&&(S-=2*f),1===o&&S<0&&(S+=2*f),c.addData(l,P,T,s,a,M,S,g,o)}function r(t){if(!t)return[];var e,i=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<c.length;e++)i=i.replace(new RegExp(c[e],"g"),"|"+c[e]);var r,o=i.split("|"),s=0,h=0,l=new a,u=a.CMD;for(e=1;e<o.length;e++){var d,p=o[e],f=p.charAt(0),g=0,v=p.slice(1).replace(/e,-/g,"e-").split(",");v.length>0&&""===v[0]&&v.shift();for(var y=0;y<v.length;y++)v[y]=parseFloat(v[y]);for(;g<v.length&&!isNaN(v[g])&&!isNaN(v[0]);){var m,x,_,b,w,A,P,T=s,M=h;switch(f){case"l":s+=v[g++],h+=v[g++],d=u.L,l.addData(d,s,h);break;case"L":s=v[g++],h=v[g++],d=u.L,l.addData(d,s,h);break;case"m":s+=v[g++],h+=v[g++],d=u.M,l.addData(d,s,h),f="l";break;case"M":s=v[g++],h=v[g++],d=u.M,l.addData(d,s,h),f="L";break;case"h":s+=v[g++],d=u.L,l.addData(d,s,h);break;case"H":s=v[g++],d=u.L,l.addData(d,s,h);break;case"v":h+=v[g++],d=u.L,l.addData(d,s,h);break;case"V":h=v[g++],d=u.L,l.addData(d,s,h);break;case"C":d=u.C,l.addData(d,v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]),s=v[g-2],h=v[g-1];break;case"c":d=u.C,l.addData(d,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h,v[g++]+s,v[g++]+h),s+=v[g-2],h+=v[g-1];break;case"S":m=s,x=h;var C=l.len(),E=l.data;r===u.C&&(m+=s-E[C-4],x+=h-E[C-3]),d=u.C,T=v[g++],M=v[g++],s=v[g++],h=v[g++],l.addData(d,m,x,T,M,s,h);break;case"s":m=s,x=h;var C=l.len(),E=l.data;r===u.C&&(m+=s-E[C-4],x+=h-E[C-3]),d=u.C,T=s+v[g++],M=h+v[g++],s+=v[g++],h+=v[g++],l.addData(d,m,x,T,M,s,h);break;case"Q":T=v[g++],M=v[g++],s=v[g++],h=v[g++],d=u.Q,l.addData(d,T,M,s,h);break;case"q":T=v[g++]+s,M=v[g++]+h,s+=v[g++],h+=v[g++],d=u.Q,l.addData(d,T,M,s,h);break;case"T":m=s,x=h;var C=l.len(),E=l.data;r===u.Q&&(m+=s-E[C-4],x+=h-E[C-3]),s=v[g++],h=v[g++],d=u.Q,l.addData(d,m,x,s,h);break;case"t":m=s,x=h;var C=l.len(),E=l.data;r===u.Q&&(m+=s-E[C-4],x+=h-E[C-3]),s+=v[g++],h+=v[g++],d=u.Q,l.addData(d,m,x,s,h);break;case"A":_=v[g++],b=v[g++],w=v[g++],A=v[g++],P=v[g++],T=s,M=h,s=v[g++],h=v[g++],d=u.A,n(T,M,s,h,A,P,_,b,w,d,l);break;case"a":_=v[g++],b=v[g++],w=v[g++],A=v[g++],P=v[g++],T=s,M=h,s+=v[g++],h+=v[g++],d=u.A,n(T,M,s,h,A,P,_,b,w,d,l)}}"z"!==f&&"Z"!==f||(d=u.Z,l.addData(d)),r=d}return l.toStatic(),l}function o(t,e){var i,n=r(t);return e=e||{},e.buildPath=function(t){t.setData(n.data),i&&h(t,i);var e=t.getContext();e&&t.rebuildPath(e)},e.applyTransform=function(t){i||(i=l.create()),l.mul(i,t,i),this.dirty(!0)},e}var s=i(6),a=i(26),h=i(37),l=i(13),c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],u=Math.sqrt,d=Math.sin,p=Math.cos,f=Math.PI,g=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))};t.exports={createFromString:function(t,e){return new s(o(t,e))},extendFromString:function(t,e){return s.extend(o(t,e))},mergePath:function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r];o.__dirty&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var a=new s(e);return a.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},a}}},function(t,e,i){function n(t){r.call(this,t),this.path=new s}var r=i(7),o=i(4),s=i(26),a=i(29),h=i(36),l=h.prototype.getCanvasPattern,c=Math.abs;n.prototype={constructor:n,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var i=this.style,n=this.path,r=i.hasStroke(),o=i.hasFill(),s=i.fill,a=i.stroke,h=o&&!!s.colorStops,c=r&&!!a.colorStops,u=o&&!!s.image,d=r&&!!a.image;if(i.bind(t,this,e),this.setTransform(t),this.__dirty){var p=this.getBoundingRect();
h&&(this._fillGradient=i.getGradient(t,s,p)),c&&(this._strokeGradient=i.getGradient(t,a,p))}h?t.fillStyle=this._fillGradient:u&&(t.fillStyle=l.call(s,t)),c?t.strokeStyle=this._strokeGradient:d&&(t.strokeStyle=l.call(a,t));var f=i.lineDash,g=i.lineDashOffset,v=!!t.setLineDash,y=this.getGlobalScale();n.setScale(y[0],y[1]),this.__dirtyPath||f&&!v&&r?(n=this.path.beginPath(t),f&&!v&&(n.setLineDash(f),n.setLineDashOffset(g)),this.buildPath(n,this.shape,!1),this.__dirtyPath=!1):(t.beginPath(),this.path.rebuildPath(t)),o&&n.fill(t),f&&v&&(t.setLineDash(f),t.lineDashOffset=g),r&&n.stroke(t),f&&v&&t.setLineDash([]),this.restoreTransform(t),null!=i.text&&this.drawRectText(t,this.getBoundingRect())},buildPath:function(t,e,i){},getBoundingRect:function(){var t=this._rect,e=this.style,i=!t;if(i){var n=this.path;this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),t=n.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){r.copy(t);var o=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),s>1e-10&&(r.width+=o/s,r.height+=o/s,r.x-=o/s/2,r.y-=o/s/2)}return r}return t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var s=r.lineWidth,h=r.strokeNoScale?this.getLineScale():1;if(h>1e-10&&(r.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),a.containStroke(o,s/h,t,e)))return!0}if(r.hasFill())return a.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):r.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(o.isObject(t))for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&c(t[0]-1)>1e-10&&c(t[3]-1)>1e-10?Math.sqrt(c(t[0]*t[3]-t[2]*t[1])):1}},n.extend=function(t){var e=function(e){n.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var i=t.shape;if(i){this.shape=this.shape||{};var r=this.shape;for(var o in i)!r.hasOwnProperty(o)&&i.hasOwnProperty(o)&&(r[o]=i[o])}t.init&&t.init.call(this,e)};o.inherits(e,n);for(var i in t)"style"!==i&&"shape"!==i&&(e.prototype[i]=t[i]);return e},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t){t=t||{},s.call(this,t);for(var e in t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new o(t.style),this._rect=null,this.__clipPaths=[]}var r=i(4),o=i(8),s=i(9),a=i(23);n.prototype={constructor:n,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect();return n.contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?s.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new o(t),this.dirty(!1),this}},r.inherits(n,s),r.mixin(n,a),t.exports=n},function(t,e){function i(t,e,i){var n=e.x,r=e.x2,o=e.y,s=e.y2;e.global||(n=n*i.width+i.x,r=r*i.width+i.x,o=o*i.height+i.y,s=s*i.height+i.y);var a=t.createLinearGradient(n,o,r,s);return a}function n(t,e,i){var n=i.width,r=i.height,o=Math.min(n,r),s=e.x,a=e.y,h=e.r;e.global||(s=s*n+i.x,a=a*r+i.y,h*=o);var l=t.createRadialGradient(s,a,0,s,a,h);return l}var r=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],o=function(t){this.extendFrom(t)};o.prototype={constructor:o,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textOffset:null,textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textTransform:!1,textRotation:0,blend:null,bind:function(t,e,i){for(var n=this,o=i&&i.style,s=!o,a=0;a<r.length;a++){var h=r[a],l=h[0];(s||n[l]!==o[l])&&(t[l]=n[l]||h[1])}if((s||n.fill!==o.fill)&&(t.fillStyle=n.fill),(s||n.stroke!==o.stroke)&&(t.strokeStyle=n.stroke),(s||n.opacity!==o.opacity)&&(t.globalAlpha=null==n.opacity?1:n.opacity),(s||n.blend!==o.blend)&&(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var c=n.lineWidth;t.lineWidth=c/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t){var i=this;for(var n in t)!t.hasOwnProperty(n)||!e&&i.hasOwnProperty(n)||(i[n]=t[n])}},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,r){for(var o="radial"===e.type?n:i,s=o(t,e,r),a=e.colorStops,h=0;h<a.length;h++)s.addColorStop(a[h].offset,a[h].color);return s}};for(var s=o.prototype,a=0;a<r.length;a++){var h=r[a];h[0]in s||(s[h[0]]=h[1])}o.getGradient=s.getGradient,t.exports=o},function(t,e,i){"use strict";var n=i(10),r=i(11),o=i(12),s=i(15),a=i(4),h=function(t){o.call(this,t),r.call(this,t),s.call(this,t),this.id=t.id||n()};h.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(a.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},a.mixin(h,s),a.mixin(h,o),a.mixin(h,r),t.exports=h},function(t,e){var i=2311;t.exports=function(){return i++}},function(t,e){var i=Array.prototype.slice,n=function(){this._$handlers={}};n.prototype={constructor:n,one:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!0,ctx:i||this}),this},on:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!1,ctx:i||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>3&&(e=i.call(e,1));for(var r=this._$handlers[t],o=r.length,s=0;s<o;){switch(n){case 1:r[s].h.call(r[s].ctx);break;case 2:r[s].h.call(r[s].ctx,e[1]);break;case 3:r[s].h.call(r[s].ctx,e[1],e[2]);break;default:r[s].h.apply(r[s].ctx,e)}r[s].one?(r.splice(s,1),o--):s++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>4&&(e=i.call(e,1,e.length-1));for(var r=e[e.length-1],o=this._$handlers[t],s=o.length,a=0;a<s;){switch(n){case 1:o[a].h.call(r);break;case 2:o[a].h.call(r,e[1]);break;case 3:o[a].h.call(r,e[1],e[2]);break;default:o[a].h.apply(r,e)}o[a].one?(o.splice(a,1),s--):a++}}return this}},t.exports=n},function(t,e,i){"use strict";function n(t){return t>a||t<-a}var r=i(13),o=i(14),s=r.identity,a=5e-5,h=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},l=h.prototype;l.transform=null,l.needLocalTransform=function(){return n(this.rotation)||n(this.position[0])||n(this.position[1])||n(this.scale[0]-1)||n(this.scale[1]-1)},l.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;return i||e?(n=n||r.create(),i?this.getLocalTransform(n):s(n),e&&(i?r.mul(n,t.transform,n):r.copy(n,t.transform)),this.transform=n,this.invTransform=this.invTransform||r.create(),void r.invert(this.invTransform,n)):void(n&&s(n))},l.getLocalTransform=function(t){t=t||[],s(t);var e=this.origin,i=this.scale,n=this.rotation,o=this.position;return e&&(t[4]-=e[0],t[5]-=e[1]),r.scale(t,t,i),n&&r.rotate(t,t,n),e&&(t[4]+=e[0],t[5]+=e[1]),t[4]+=o[0],t[5]+=o[1],t},l.setTransform=function(t){var e=this.transform,i=t.dpr||1;e?t.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):t.setTransform(i,0,0,i,0,0)},l.restoreTransform=function(t){var e=(this.transform,t.dpr||1);t.setTransform(e,0,0,e,0,0)};var c=[];l.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(c,t.invTransform,e),e=c);var i=e[0]*e[0]+e[1]*e[1],o=e[2]*e[2]+e[3]*e[3],s=this.position,a=this.scale;n(i-1)&&(i=Math.sqrt(i)),n(o-1)&&(o=Math.sqrt(o)),e[0]<0&&(i=-i),e[3]<0&&(o=-o),s[0]=e[4],s[1]=e[5],a[0]=i,a[1]=o,this.rotation=Math.atan2(-e[1]/o,e[0]/i)}},l.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(i=-i),[e,i]},l.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&o.applyTransform(i,i,n),i},l.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&o.applyTransform(i,i,n),i},t.exports=h},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(){var t=new i(6);return n.identity(t),t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},mul:function(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],s=e[1]*i[2]+e[3]*i[3],a=e[0]*i[4]+e[2]*i[5]+e[4],h=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t},translate:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},rotate:function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],h=e[5],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+s*l,t[1]=-n*l+s*c,t[2]=r*c+a*l,t[3]=-r*l+c*a,t[4]=c*o+l*h,t[5]=c*h-l*o,t},scale:function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},invert:function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],h=i*s-o*n;return h?(h=1/h,t[0]=s*h,t[1]=-o*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*r)*h,t[5]=(o*r-i*a)*h,t):null}};t.exports=n},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(t,e){var n=new i(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,i){return t[0]=e,t[1]=i,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},sub:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},len:function(t){return Math.sqrt(this.lenSquare(t))},lenSquare:function(t){return t[0]*t[0]+t[1]*t[1]},mul:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},div:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},normalize:function(t,e){var i=n.len(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t},distance:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))},distanceSquare:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},applyTransform:function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}};n.length=n.len,n.lengthSquare=n.lenSquare,n.dist=n.distance,n.distSquare=n.distanceSquare,t.exports=n},function(t,e,i){"use strict";var n=i(16),r=i(4),o=r.isString,s=r.isFunction,a=r.isObject,h=i(21),l=function(){this.animators=[]};l.prototype={constructor:l,animate:function(t,e){var i,o=!1,s=this,a=this.__zr;if(t){var l=t.split("."),c=s;o="shape"===l[0];for(var u=0,d=l.length;u<d;u++)c&&(c=c[l[u]]);c&&(i=c)}else i=s;if(!i)return void h('Property "'+t+'" is not existed in element '+s.id);var p=s.animators,f=new n(i,e);return f.during(function(t){s.dirty(o)}).done(function(){p.splice(r.indexOf(p,f),1)}),p.push(f),a&&a.animation.addAnimator(f),f},stopAnimation:function(t){for(var e=this.animators,i=e.length,n=0;n<i;n++)e[n].stop(t);return e.length=0,this},animateTo:function(t,e,i,n,r){function a(){l--,l||r&&r()}o(i)?(r=n,n=i,i=0):s(n)?(r=n,n="linear",i=0):s(i)?(r=i,i=0):s(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,i,n,r);var h=this.animators.slice(),l=h.length;l||r&&r();for(var c=0;c<h.length;c++)h[c].done(a).start(n)},_animateToShallow:function(t,e,i,n,o){var s={},h=0;for(var l in i)if(i.hasOwnProperty(l))if(null!=e[l])a(i[l])&&!r.isArrayLike(i[l])?this._animateToShallow(t?t+"."+l:l,e[l],i[l],n,o):(s[l]=i[l],h++);else if(null!=i[l])if(t){var c={};c[t]={},c[t][l]=i[l],this.attr(c)}else this.attr(l,i[l]);return h>0&&this.animate(t,!1).when(null==n?500:n,s).delay(o||0),this}},t.exports=l},function(t,e,i){function n(t,e){return t[e]}function r(t,e,i){t[e]=i}function o(t,e,i){return(e-t)*i+t}function s(t,e,i){return i>.5?e:t}function a(t,e,i,n,r){var s=t.length;if(1==r)for(var a=0;a<s;a++)n[a]=o(t[a],e[a],i);else for(var h=t[0].length,a=0;a<s;a++)for(var l=0;l<h;l++)n[a][l]=o(t[a][l],e[a][l],i)}function h(t,e,i){var n=t.length,r=e.length;if(n!==r){var o=n>r;if(o)t.length=r;else for(var s=n;s<r;s++)t.push(1===i?e[s]:x.call(e[s]))}for(var a=t[0]&&t[0].length,s=0;s<t.length;s++)if(1===i)isNaN(t[s])&&(t[s]=e[s]);else for(var h=0;h<a;h++)isNaN(t[s][h])&&(t[s][h]=e[s][h])}function l(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(var r=0;r<n;r++)if(t[r]!==e[r])return!1}else for(var o=t[0].length,r=0;r<n;r++)for(var s=0;s<o;s++)if(t[r][s]!==e[r][s])return!1;return!0}function c(t,e,i,n,r,o,s,a,h){var l=t.length;if(1==h)for(var c=0;c<l;c++)a[c]=u(t[c],e[c],i[c],n[c],r,o,s);else for(var d=t[0].length,c=0;c<l;c++)for(var p=0;p<d;p++)a[c][p]=u(t[c][p],e[c][p],i[c][p],n[c][p],r,o,s)}function u(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}function d(t){if(m(t)){var e=t.length;if(m(t[0])){for(var i=[],n=0;n<e;n++)i.push(x.call(t[n]));return i}return x.call(t)}return t}function p(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function f(t,e,i,n,r){var d=t._getter,f=t._setter,y="spline"===e,x=n.length;if(x){var _,b=n[0].value,w=m(b),A=!1,P=!1,T=w&&m(b[0])?2:1;n.sort(function(t,e){return t.time-e.time}),_=n[x-1].time;for(var M=[],C=[],E=n[0].value,S=!0,L=0;L<x;L++){M.push(n[L].time/_);var R=n[L].value;if(w&&l(R,E,T)||!w&&R===E||(S=!1),E=R,"string"==typeof R){var N=v.parse(R);N?(R=N,A=!0):P=!0}C.push(R)}if(!S){for(var k=C[x-1],L=0;L<x-1;L++)w?h(C[L],k,T):!isNaN(C[L])||isNaN(k)||P||A||(C[L]=k);w&&h(d(t._target,r),k,T);var z,O,B,I,D,F,H=0,Y=0;if(A)var U=[0,0,0,0];var q=function(t,e){var i;if(e<0)i=0;else if(e<Y){for(z=Math.min(H+1,x-1),i=z;i>=0&&!(M[i]<=e);i--);i=Math.min(i,x-2)}else{for(i=H;i<x&&!(M[i]>e);i++);i=Math.min(i-1,x-2)}H=i,Y=e;var n=M[i+1]-M[i];if(0!==n)if(O=(e-M[i])/n,y)if(I=C[i],B=C[0===i?i:i-1],D=C[i>x-2?x-1:i+1],F=C[i>x-3?x-1:i+2],w)c(B,I,D,F,O,O*O,O*O*O,d(t,r),T);else{var h;if(A)h=c(B,I,D,F,O,O*O,O*O*O,U,1),h=p(U);else{if(P)return s(I,D,O);h=u(B,I,D,F,O,O*O,O*O*O)}f(t,r,h)}else if(w)a(C[i],C[i+1],O,d(t,r),T);else{var h;if(A)a(C[i],C[i+1],O,U,1),h=p(U);else{if(P)return s(C[i],C[i+1],O);h=o(C[i],C[i+1],O)}f(t,r,h)}},G=new g({target:t._target,life:_,loop:t._loop,delay:t._delay,onframe:q,ondestroy:i});return e&&"spline"!==e&&(G.easing=e),G}}}var g=i(17),v=i(19),y=i(4),m=y.isArrayLike,x=Array.prototype.slice,_=function(t,e,i,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||n,this._setter=o||r,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};_.prototype={when:function(t,e){var i=this._tracks;for(var n in e)if(e.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:d(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;i<e;i++)t[i].call(this)},start:function(t){var e,i=this,n=0,r=function(){n--,n||i._doneCallback()};for(var o in this._tracks)if(this._tracks.hasOwnProperty(o)){var s=f(this,t,r,this._tracks[o],o);s&&(this._clipList.push(s),n++,this.animation&&this.animation.addClip(s),e=s)}if(e){var a=e.onframe;e.onframe=function(t,e){a(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return n||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,n=0;n<e.length;n++){var r=e[n];t&&r.onframe(this._target,1),i&&i.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}},t.exports=_},function(t,e,i){function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}var r=i(18);n.prototype={constructor:n,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)return void(this._pausedTime+=e);var i=(t-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n=this.easing,o="string"==typeof n?r[n]:n,s="function"==typeof o?o(i):i;return this.fire("frame",s),1==i?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}},t.exports=n},function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},elasticOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},elasticInOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}};t.exports=i},function(t,e,i){function n(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t=Math.round(t),t<0?0:t>360?360:t}function o(t){return t<0?0:t>1?1:t}function s(t){return n(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function a(t){return o(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function h(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function l(t,e,i){return t+(e-t)*i}function c(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function d(t,e){M&&u(M,e),M=T.put(t,M||e.slice())}function p(t,e){if(t){e=e||[];var i=T.get(t);if(i)return u(e,i);t+="";var n=t.replace(/ /g,"").toLowerCase();if(n in P)return u(e,P[n]),d(t,e),e;if("#"!==n.charAt(0)){var r=n.indexOf("("),o=n.indexOf(")");if(r!==-1&&o+1===n.length){var h=n.substr(0,r),l=n.substr(r+1,o-(r+1)).split(","),p=1;switch(h){case"rgba":if(4!==l.length)return void c(e,0,0,0,1);p=a(l.pop());case"rgb":return 3!==l.length?void c(e,0,0,0,1):(c(e,s(l[0]),s(l[1]),s(l[2]),p),d(t,e),e);case"hsla":return 4!==l.length?void c(e,0,0,0,1):(l[3]=a(l[3]),f(l,e),d(t,e),e);case"hsl":return 3!==l.length?void c(e,0,0,0,1):(f(l,e),d(t,e),e);default:return}}c(e,0,0,0,1)}else{if(4===n.length){var g=parseInt(n.substr(1),16);return g>=0&&g<=4095?(c(e,(3840&g)>>4|(3840&g)>>8,240&g|(240&g)>>4,15&g|(15&g)<<4,1),d(t,e),e):void c(e,0,0,0,1)}if(7===n.length){var g=parseInt(n.substr(1),16);return g>=0&&g<=16777215?(c(e,(16711680&g)>>16,(65280&g)>>8,255&g,1),d(t,e),e):void c(e,0,0,0,1)}}}}function f(t,e){var i=(parseFloat(t[0])%360+360)%360/360,r=a(t[1]),o=a(t[2]),s=o<=.5?o*(r+1):o+r-o*r,l=2*o-s;return e=e||[],c(e,n(255*h(l,s,i+1/3)),n(255*h(l,s,i)),n(255*h(l,s,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function g(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),h=a-s,l=(a+s)/2;if(0===h)e=0,i=0;else{i=l<.5?h/(a+s):h/(2-a-s);var c=((a-n)/6+h/2)/h,u=((a-r)/6+h/2)/h,d=((a-o)/6+h/2)/h;n===a?e=d-u:r===a?e=1/3+c-d:o===a&&(e=2/3+u-c),e<0&&(e+=1),e>1&&(e-=1)}var p=[360*e,i,l];return null!=t[3]&&p.push(t[3]),p}}function v(t,e){var i=p(t);if(i){for(var n=0;n<3;n++)e<0?i[n]=i[n]*(1-e)|0:i[n]=(255-i[n])*e+i[n]|0;return w(i,4===i.length?"rgba":"rgb")}}function y(t,e){var i=p(t);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1)}function m(t,e,i){if(i=i||[0,0,0,0],!e||!e.length||!(t>=0&&t<=1))return i;var r=t*(e.length-1),s=Math.floor(r),a=Math.ceil(r),h=e[s],c=e[a],u=r-s;return i[0]=n(l(h[0],c[0],u)),i[1]=n(l(h[1],c[1],u)),i[2]=n(l(h[2],c[2],u)),i[3]=o(l(h[3],c[3],u)),i}function x(t,e,i){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),s=Math.floor(r),a=Math.ceil(r),h=p(e[s]),c=p(e[a]),u=r-s,d=w([n(l(h[0],c[0],u)),n(l(h[1],c[1],u)),n(l(h[2],c[2],u)),o(l(h[3],c[3],u))],"rgba");return i?{color:d,leftIndex:s,rightIndex:a,value:r}:d}}function _(t,e,i,n){if(t=p(t))return t=g(t),null!=e&&(t[0]=r(e)),null!=i&&(t[1]=a(i)),null!=n&&(t[2]=a(n)),w(f(t),"rgba")}function b(t,e){if(t=p(t),t&&null!=e)return t[3]=o(e),w(t,"rgba")}function w(t,e){if(t){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}var A=i(20),P={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},T=new A(20),M=null;t.exports={parse:p,lift:v,toHex:y,fastMapToColor:m,mapToColor:x,modifyHSL:_,modifyAlpha:b,stringify:w}},function(t,e){var i=function(){this.head=null,this.tail=null,this._len=0},n=i.prototype;n.insert=function(t){var e=new r(t);return this.insertEntry(e),e},n.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.len=function(){return this._len},n.clear=function(){this.head=this.tail=null,this._len=0};var r=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new i,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},s=o.prototype;s.put=function(t,e){var i=this._list,n=this._map,o=null;if(null==n[t]){var s=i.len(),a=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var h=i.head;i.remove(h),delete n[h.key],o=h.value,this._lastRemovedEntry=h}a?a.value=e:a=new r(e),a.key=t,i.insertEntry(a),n[t]=a}return o},s.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},s.clear=function(){this._list.clear(),this._map={}},t.exports=o},function(t,e,i){var n=i(22);t.exports=function(){if(0!==n.debugMode)if(1==n.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(n.debugMode>1)for(var t in arguments)console.log(arguments[t])}},function(t,e){var i=1;"undefined"!=typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n={debugMode:0,devicePixelRatio:i};t.exports=n},function(t,e,i){function n(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}var r=i(24),o=i(25),s=new o,a=function(){};a.prototype={constructor:a,drawRectText:function(t,e,i){var o=this.style,a=o.text;if(null!=a&&(a+=""),a){t.save();var h,l,c=o.textPosition,u=o.textOffset,d=o.textDistance,p=o.textAlign,f=o.textFont||o.font,g=o.textBaseline,v=o.textVerticalAlign;i=i||r.getBoundingRect(a,f,p,g);var y=this.transform;if(o.textTransform?this.setTransform(t):y&&(s.copy(e),s.applyTransform(y),e=s),c instanceof Array){if(h=e.x+n(c[0],e.width),l=e.y+n(c[1],e.height),p=p||"left",g=g||"top",
v){switch(v){case"middle":l-=i.height/2-i.lineHeight/2;break;case"bottom":l-=i.height-i.lineHeight/2;break;default:l+=i.lineHeight/2}g="middle"}}else{var m=r.adjustTextPositionOnRect(c,e,i,d);h=m.x,l=m.y,p=p||m.textAlign,g=g||m.textBaseline}u&&(h+=u[0],l+=u[1]),t.textAlign=p||"left",t.textBaseline=g||"alphabetic";var x=o.textFill,_=o.textStroke;x&&(t.fillStyle=x),_&&(t.strokeStyle=_),t.font=f||"12px sans-serif",t.shadowBlur=o.textShadowBlur,t.shadowColor=o.textShadowColor||"transparent",t.shadowOffsetX=o.textShadowOffsetX,t.shadowOffsetY=o.textShadowOffsetY;var b=a.split("\n");o.textRotation&&(y&&t.translate(y[4],y[5]),t.rotate(o.textRotation),y&&t.translate(-y[4],-y[5]));for(var w=0;w<b.length;w++)_&&t.strokeText(b[w],h,l),x&&t.fillText(b[w],h,l),l+=i.lineHeight;t.restore()}}},t.exports=a},function(t,e,i){function n(t,e){var i=t+":"+e;if(h[i])return h[i];for(var n=(t+"").split("\n"),r=0,o=0,s=n.length;o<s;o++)r=Math.max(f.measureText(n[o],e).width,r);return l>c&&(l=0,h={}),l++,h[i]=r,r}function r(t,e,i,r){var o=((t||"")+"").split("\n").length,s=n(t,e),a=n("",e),h=o*a,l=new d(0,0,s,h);switch(l.lineHeight=a,r){case"bottom":case"alphabetic":l.y-=a;break;case"middle":l.y-=a/2}switch(i){case"end":case"right":l.x-=l.width;break;case"center":l.x-=l.width/2}return l}function o(t,e,i,n){var r=e.x,o=e.y,s=e.height,a=e.width,h=i.height,l=s/2-h/2,c="left";switch(t){case"left":r-=n,o+=l,c="right";break;case"right":r+=n+a,o+=l,c="left";break;case"top":r+=a/2,o-=n+h,c="center";break;case"bottom":r+=a/2,o+=s+n,c="center";break;case"inside":r+=a/2,o+=l,c="center";break;case"insideLeft":r+=n,o+=l,c="left";break;case"insideRight":r+=a-n,o+=l,c="right";break;case"insideTop":r+=a/2,o+=n,c="center";break;case"insideBottom":r+=a/2,o+=s-h-n,c="center";break;case"insideTopLeft":r+=n,o+=n,c="left";break;case"insideTopRight":r+=a-n,o+=n,c="right";break;case"insideBottomLeft":r+=n,o+=s-h-n;break;case"insideBottomRight":r+=a-n,o+=s-h-n,c="right"}return{x:r,y:o,textAlign:c,textBaseline:"top"}}function s(t,e,i,r,o){if(!e)return"";o=o||{},r=p(r,"...");for(var s=p(o.maxIterations,2),h=p(o.minChar,0),l=n("",i),c=n("a",i),u=p(o.placeholder,""),d=e=Math.max(0,e-1),f=0;f<h&&d>=c;f++)d-=c;var g=n(r);g>d&&(r="",g=0),d=e-g;for(var v=(t+"").split("\n"),f=0,y=v.length;f<y;f++){var m=v[f],x=n(m,i);if(!(x<=e)){for(var _=0;;_++){if(x<=d||_>=s){m+=r;break}var b=0===_?a(m,d,c,l):x>0?Math.floor(m.length*d/x):0;m=m.substr(0,b),x=n(m,i)}""===m&&(m=u),v[f]=m}}return v.join("\n")}function a(t,e,i,n){for(var r=0,o=0,s=t.length;o<s&&r<e;o++){var a=t.charCodeAt(o);r+=0<=a&&a<=127?i:n}return o}var h={},l=0,c=5e3,u=i(4),d=i(25),p=u.retrieve,f={getWidth:n,getBoundingRect:r,adjustTextPositionOnRect:o,truncateText:s,measureText:function(t,e){var i=u.getContext();return i.font=e||"12px sans-serif",i.measureText(t)}};t.exports=f},function(t,e,i){"use strict";function n(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}var r=i(14),o=i(13),s=r.applyTransform,a=Math.min,h=Math.max;n.prototype={constructor:n,union:function(t){var e=a(t.x,this.x),i=a(t.y,this.y);this.width=h(t.x+t.width,this.x+this.width)-e,this.height=h(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:function(){var t=[],e=[],i=[],n=[];return function(r){if(r){t[0]=i[0]=this.x,t[1]=n[1]=this.y,e[0]=n[0]=this.x+this.width,e[1]=i[1]=this.y+this.height,s(t,t,r),s(e,e,r),s(i,i,r),s(n,n,r),this.x=a(t[0],e[0],i[0],n[0]),this.y=a(t[1],e[1],i[1],n[1]);var o=h(t[0],e[0],i[0],n[0]),l=h(t[1],e[1],i[1],n[1]);this.width=o-this.x,this.height=l-this.y}}}(),calculateTransform:function(t){var e=this,i=t.width/e.width,n=t.height/e.height,r=o.create();return o.translate(r,r,[-e.x,-e.y]),o.scale(r,r,[i,n]),o.translate(r,r,[t.x,t.y]),r},intersect:function(t){if(!t)return!1;t instanceof n||(t=n.create(t));var e=this,i=e.x,r=e.x+e.width,o=e.y,s=e.y+e.height,a=t.x,h=t.x+t.width,l=t.y,c=t.y+t.height;return!(r<a||h<i||s<l||c<o)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new n(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},t.exports=n},function(t,e,i){"use strict";var n=i(27),r=i(14),o=i(28),s=i(25),a=i(22).devicePixelRatio,h={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},l=[],c=[],u=[],d=[],p=Math.min,f=Math.max,g=Math.cos,v=Math.sin,y=Math.sqrt,m=Math.abs,x="undefined"!=typeof Float32Array,_=function(){this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._ux=0,this._uy=0};_.prototype={constructor:_,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=m(1/a/t)||0,this._uy=m(1/a/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._len=0,this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(h.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=m(t-this._xi)>this._ux||m(e-this._yi)>this._uy||this._len<5;return this.addData(h.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(h.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(h.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(h.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=g(r)*i+t,this._yi=v(r)*i+t,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(h.R,t,e,i,n),this},closePath:function(){this.addData(h.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!x||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},addData:function(t){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,s=this._lineDash,a=this._ctx,h=this._xi,l=this._yi,c=t-h,u=e-l,d=y(c*c+u*u),g=h,v=l,m=s.length;for(c/=d,u/=d,o<0&&(o=r+o),o%=r,g-=o*c,v-=o*u;c>0&&g<=t||c<0&&g>=t||0==c&&(u>0&&v<=e||u<0&&v>=e);)n=this._dashIdx,i=s[n],g+=c*i,v+=u*i,this._dashIdx=(n+1)%m,c>0&&g<h||c<0&&g>h||u>0&&v<l||u<0&&v>l||a[n%2?"moveTo":"lineTo"](c>=0?p(g,t):f(g,t),u>=0?p(v,e):f(v,e));c=g-t,u=v-e,this._dashOffset=-y(c*c+u*u)},_dashedBezierTo:function(t,e,i,r,o,s){var a,h,l,c,u,d=this._dashSum,p=this._dashOffset,f=this._lineDash,g=this._ctx,v=this._xi,m=this._yi,x=n.cubicAt,_=0,b=this._dashIdx,w=f.length,A=0;for(p<0&&(p=d+p),p%=d,a=0;a<1;a+=.1)h=x(v,t,i,o,a+.1)-x(v,t,i,o,a),l=x(m,e,r,s,a+.1)-x(m,e,r,s,a),_+=y(h*h+l*l);for(;b<w&&(A+=f[b],!(A>p));b++);for(a=(A-p)/_;a<=1;)c=x(v,t,i,o,a),u=x(m,e,r,s,a),b%2?g.moveTo(c,u):g.lineTo(c,u),a+=f[b]/_,b=(b+1)%w;b%2!==0&&g.lineTo(o,s),h=o-c,l=s-u,this._dashOffset=-y(h*h+l*l)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,x&&(this.data=new Float32Array(t)))},getBoundingRect:function(){l[0]=l[1]=u[0]=u[1]=Number.MAX_VALUE,c[0]=c[1]=d[0]=d[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,a=0,p=0;p<t.length;){var f=t[p++];switch(1==p&&(e=t[p],i=t[p+1],n=e,a=i),f){case h.M:n=t[p++],a=t[p++],e=n,i=a,u[0]=n,u[1]=a,d[0]=n,d[1]=a;break;case h.L:o.fromLine(e,i,t[p],t[p+1],u,d),e=t[p++],i=t[p++];break;case h.C:o.fromCubic(e,i,t[p++],t[p++],t[p++],t[p++],t[p],t[p+1],u,d),e=t[p++],i=t[p++];break;case h.Q:o.fromQuadratic(e,i,t[p++],t[p++],t[p],t[p+1],u,d),e=t[p++],i=t[p++];break;case h.A:var y=t[p++],m=t[p++],x=t[p++],_=t[p++],b=t[p++],w=t[p++]+b,A=(t[p++],1-t[p++]);1==p&&(n=g(b)*x+y,a=v(b)*_+m),o.fromArc(y,m,x,_,b,w,A,u,d),e=g(w)*x+y,i=v(w)*_+m;break;case h.R:n=e=t[p++],a=i=t[p++];var P=t[p++],T=t[p++];o.fromLine(n,a,n+P,a+T,u,d);break;case h.Z:e=n,i=a}r.min(l,l,u),r.max(c,c,d)}return 0===p&&(l[0]=l[1]=c[0]=c[1]=0),new s(l[0],l[1],c[0]-l[0],c[1]-l[1])},rebuildPath:function(t){for(var e,i,n,r,o,s,a=this.data,l=this._ux,c=this._uy,u=this._len,d=0;d<u;){var p=a[d++];switch(1==d&&(n=a[d],r=a[d+1],e=n,i=r),p){case h.M:e=n=a[d++],i=r=a[d++],t.moveTo(n,r);break;case h.L:o=a[d++],s=a[d++],(m(o-n)>l||m(s-r)>c||d===u-1)&&(t.lineTo(o,s),n=o,r=s);break;case h.C:t.bezierCurveTo(a[d++],a[d++],a[d++],a[d++],a[d++],a[d++]),n=a[d-2],r=a[d-1];break;case h.Q:t.quadraticCurveTo(a[d++],a[d++],a[d++],a[d++]),n=a[d-2],r=a[d-1];break;case h.A:var f=a[d++],y=a[d++],x=a[d++],_=a[d++],b=a[d++],w=a[d++],A=a[d++],P=a[d++],T=x>_?x:_,M=x>_?1:x/_,C=x>_?_/x:1,E=Math.abs(x-_)>.001,S=b+w;E?(t.translate(f,y),t.rotate(A),t.scale(M,C),t.arc(0,0,T,b,S,1-P),t.scale(1/M,1/C),t.rotate(-A),t.translate(-f,-y)):t.arc(f,y,T,b,S,1-P),1==d&&(e=g(b)*x+f,i=v(b)*_+y),n=g(S)*x+f,r=v(S)*_+y;break;case h.R:e=n=a[d],i=r=a[d+1],t.rect(a[d++],a[d++],a[d++],a[d++]);break;case h.Z:t.closePath(),n=e,r=i}}}},_.CMD=h,t.exports=_},function(t,e,i){"use strict";function n(t){return t>-w&&t<w}function r(t){return t>w||t<-w}function o(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function s(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function a(t,e,i,r,o,s){var a=r+3*(e-i)-t,h=3*(i-2*e+t),l=3*(e-t),c=t-o,u=h*h-3*a*l,d=h*l-9*a*c,p=l*l-3*h*c,f=0;if(n(u)&&n(d))if(n(h))s[0]=0;else{var g=-l/h;g>=0&&g<=1&&(s[f++]=g)}else{var v=d*d-4*u*p;if(n(v)){var y=d/u,g=-h/a+y,m=-y/2;g>=0&&g<=1&&(s[f++]=g),m>=0&&m<=1&&(s[f++]=m)}else if(v>0){var x=b(v),w=u*h+1.5*a*(-d+x),A=u*h+1.5*a*(-d-x);w=w<0?-_(-w,T):_(w,T),A=A<0?-_(-A,T):_(A,T);var g=(-h-(w+A))/(3*a);g>=0&&g<=1&&(s[f++]=g)}else{var M=(2*u*h-3*a*d)/(2*b(u*u*u)),C=Math.acos(M)/3,E=b(u),S=Math.cos(C),g=(-h-2*E*S)/(3*a),m=(-h+E*(S+P*Math.sin(C)))/(3*a),L=(-h+E*(S-P*Math.sin(C)))/(3*a);g>=0&&g<=1&&(s[f++]=g),m>=0&&m<=1&&(s[f++]=m),L>=0&&L<=1&&(s[f++]=L)}}return f}function h(t,e,i,o,s){var a=6*i-12*e+6*t,h=9*e+3*o-3*t-9*i,l=3*e-3*t,c=0;if(n(h)){if(r(a)){var u=-l/a;u>=0&&u<=1&&(s[c++]=u)}}else{var d=a*a-4*h*l;if(n(d))s[0]=-a/(2*h);else if(d>0){var p=b(d),u=(-a+p)/(2*h),f=(-a-p)/(2*h);u>=0&&u<=1&&(s[c++]=u),f>=0&&f<=1&&(s[c++]=f)}}return c}function l(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,h=(n-i)*r+i,l=(a-s)*r+s,c=(h-a)*r+a,u=(c-l)*r+l;o[0]=t,o[1]=s,o[2]=l,o[3]=u,o[4]=u,o[5]=c,o[6]=h,o[7]=n}function c(t,e,i,n,r,s,a,h,l,c,u){var d,p,f,g,v,y=.005,m=1/0;M[0]=l,M[1]=c;for(var _=0;_<1;_+=.05)C[0]=o(t,i,r,a,_),C[1]=o(e,n,s,h,_),g=x(M,C),g<m&&(d=_,m=g);m=1/0;for(var w=0;w<32&&!(y<A);w++)p=d-y,f=d+y,C[0]=o(t,i,r,a,p),C[1]=o(e,n,s,h,p),g=x(C,M),p>=0&&g<m?(d=p,m=g):(E[0]=o(t,i,r,a,f),E[1]=o(e,n,s,h,f),v=x(E,M),f<=1&&v<m?(d=f,m=v):y*=.5);return u&&(u[0]=o(t,i,r,a,d),u[1]=o(e,n,s,h,d)),b(m)}function u(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function d(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function p(t,e,i,o,s){var a=t-2*e+i,h=2*(e-t),l=t-o,c=0;if(n(a)){if(r(h)){var u=-l/h;u>=0&&u<=1&&(s[c++]=u)}}else{var d=h*h-4*a*l;if(n(d)){var u=-h/(2*a);u>=0&&u<=1&&(s[c++]=u)}else if(d>0){var p=b(d),u=(-h+p)/(2*a),f=(-h-p)/(2*a);u>=0&&u<=1&&(s[c++]=u),f>=0&&f<=1&&(s[c++]=f)}}return c}function f(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}function g(t,e,i,n,r){var o=(e-t)*n+t,s=(i-e)*n+e,a=(s-o)*n+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=i}function v(t,e,i,n,r,o,s,a,h){var l,c=.005,d=1/0;M[0]=s,M[1]=a;for(var p=0;p<1;p+=.05){C[0]=u(t,i,r,p),C[1]=u(e,n,o,p);var f=x(M,C);f<d&&(l=p,d=f)}d=1/0;for(var g=0;g<32&&!(c<A);g++){var v=l-c,y=l+c;C[0]=u(t,i,r,v),C[1]=u(e,n,o,v);var f=x(C,M);if(v>=0&&f<d)l=v,d=f;else{E[0]=u(t,i,r,y),E[1]=u(e,n,o,y);var m=x(E,M);y<=1&&m<d?(l=y,d=m):c*=.5}}return h&&(h[0]=u(t,i,r,l),h[1]=u(e,n,o,l)),b(d)}var y=i(14),m=y.create,x=y.distSquare,_=Math.pow,b=Math.sqrt,w=1e-8,A=1e-4,P=b(3),T=1/3,M=m(),C=m(),E=m();t.exports={cubicAt:o,cubicDerivativeAt:s,cubicRootAt:a,cubicExtrema:h,cubicSubdivide:l,cubicProjectPoint:c,quadraticAt:u,quadraticDerivativeAt:d,quadraticRootAt:p,quadraticExtremum:f,quadraticSubdivide:g,quadraticProjectPoint:v}},function(t,e,i){var n=i(14),r=i(27),o={},s=Math.min,a=Math.max,h=Math.sin,l=Math.cos,c=n.create(),u=n.create(),d=n.create(),p=2*Math.PI;o.fromPoints=function(t,e,i){if(0!==t.length){var n,r=t[0],o=r[0],h=r[0],l=r[1],c=r[1];for(n=1;n<t.length;n++)r=t[n],o=s(o,r[0]),h=a(h,r[0]),l=s(l,r[1]),c=a(c,r[1]);e[0]=o,e[1]=l,i[0]=h,i[1]=c}},o.fromLine=function(t,e,i,n,r,o){r[0]=s(t,i),r[1]=s(e,n),o[0]=a(t,i),o[1]=a(e,n)};var f=[],g=[];o.fromCubic=function(t,e,i,n,o,h,l,c,u,d){var p,v=r.cubicExtrema,y=r.cubicAt,m=v(t,i,o,l,f);for(u[0]=1/0,u[1]=1/0,d[0]=-(1/0),d[1]=-(1/0),p=0;p<m;p++){var x=y(t,i,o,l,f[p]);u[0]=s(x,u[0]),d[0]=a(x,d[0])}for(m=v(e,n,h,c,g),p=0;p<m;p++){var _=y(e,n,h,c,g[p]);u[1]=s(_,u[1]),d[1]=a(_,d[1])}u[0]=s(t,u[0]),d[0]=a(t,d[0]),u[0]=s(l,u[0]),d[0]=a(l,d[0]),u[1]=s(e,u[1]),d[1]=a(e,d[1]),u[1]=s(c,u[1]),d[1]=a(c,d[1])},o.fromQuadratic=function(t,e,i,n,o,h,l,c){var u=r.quadraticExtremum,d=r.quadraticAt,p=a(s(u(t,i,o),1),0),f=a(s(u(e,n,h),1),0),g=d(t,i,o,p),v=d(e,n,h,f);l[0]=s(t,o,g),l[1]=s(e,h,v),c[0]=a(t,o,g),c[1]=a(e,h,v)},o.fromArc=function(t,e,i,r,o,s,a,f,g){var v=n.min,y=n.max,m=Math.abs(o-s);if(m%p<1e-4&&m>1e-4)return f[0]=t-i,f[1]=e-r,g[0]=t+i,void(g[1]=e+r);if(c[0]=l(o)*i+t,c[1]=h(o)*r+e,u[0]=l(s)*i+t,u[1]=h(s)*r+e,v(f,c,u),y(g,c,u),o%=p,o<0&&(o+=p),s%=p,s<0&&(s+=p),o>s&&!a?s+=p:o<s&&a&&(o+=p),a){var x=s;s=o,o=x}for(var _=0;_<s;_+=Math.PI/2)_>o&&(d[0]=l(_)*i+t,d[1]=h(_)*r+e,v(f,d,f),y(g,d,g))},t.exports=o},function(t,e,i){"use strict";function n(t,e){return Math.abs(t-e)<x}function r(){var t=b[0];b[0]=b[1],b[1]=t}function o(t,e,i,n,o,s,a,h,l,c){if(c>e&&c>n&&c>s&&c>h||c<e&&c<n&&c<s&&c<h)return 0;var u=g.cubicRootAt(e,n,s,h,c,_);if(0===u)return 0;for(var d,p,f=0,v=-1,y=0;y<u;y++){var m=_[y],x=0===m||1===m?.5:1,w=g.cubicAt(t,i,o,a,m);w<l||(v<0&&(v=g.cubicExtrema(e,n,s,h,b),b[1]<b[0]&&v>1&&r(),d=g.cubicAt(e,n,s,h,b[0]),v>1&&(p=g.cubicAt(e,n,s,h,b[1]))),f+=2==v?m<b[0]?d<e?x:-x:m<b[1]?p<d?x:-x:h<p?x:-x:m<b[0]?d<e?x:-x:h<d?x:-x)}return f}function s(t,e,i,n,r,o,s,a){if(a>e&&a>n&&a>o||a<e&&a<n&&a<o)return 0;var h=g.quadraticRootAt(e,n,o,a,_);if(0===h)return 0;var l=g.quadraticExtremum(e,n,o);if(l>=0&&l<=1){for(var c=0,u=g.quadraticAt(e,n,o,l),d=0;d<h;d++){var p=0===_[d]||1===_[d]?.5:1,f=g.quadraticAt(t,i,r,_[d]);f<s||(c+=_[d]<l?u<e?p:-p:o<u?p:-p)}return c}var p=0===_[0]||1===_[0]?.5:1,f=g.quadraticAt(t,i,r,_[0]);return f<s?0:o<e?p:-p}function a(t,e,i,n,r,o,s,a){if(a-=e,a>i||a<-i)return 0;var h=Math.sqrt(i*i-a*a);_[0]=-h,_[1]=h;var l=Math.abs(n-r);if(l<1e-4)return 0;if(l%m<1e-4){n=0,r=m;var c=o?1:-1;return s>=_[0]+t&&s<=_[1]+t?c:0}if(o){var h=n;n=f(r),r=f(h)}else n=f(n),r=f(r);n>r&&(r+=m);for(var u=0,d=0;d<2;d++){var p=_[d];if(p+t>s){var g=Math.atan2(a,p),c=o?1:-1;g<0&&(g=m+g),(g>=n&&g<=r||g+m>=n&&g+m<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),u+=c)}}return u}function h(t,e,i,r,h){for(var c=0,f=0,g=0,m=0,x=0,_=0;_<t.length;){var b=t[_++];switch(b===l.M&&_>1&&(i||(c+=v(f,g,m,x,r,h))),1==_&&(f=t[_],g=t[_+1],m=f,x=g),b){case l.M:m=t[_++],x=t[_++],f=m,g=x;break;case l.L:if(i){if(y(f,g,t[_],t[_+1],e,r,h))return!0}else c+=v(f,g,t[_],t[_+1],r,h)||0;f=t[_++],g=t[_++];break;case l.C:if(i){if(u.containStroke(f,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else c+=o(f,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],r,h)||0;f=t[_++],g=t[_++];break;case l.Q:if(i){if(d.containStroke(f,g,t[_++],t[_++],t[_],t[_+1],e,r,h))return!0}else c+=s(f,g,t[_++],t[_++],t[_],t[_+1],r,h)||0;f=t[_++],g=t[_++];break;case l.A:var w=t[_++],A=t[_++],P=t[_++],T=t[_++],M=t[_++],C=t[_++],E=(t[_++],1-t[_++]),S=Math.cos(M)*P+w,L=Math.sin(M)*T+A;_>1?c+=v(f,g,S,L,r,h):(m=S,x=L);var R=(r-w)*T/P+w;if(i){if(p.containStroke(w,A,T,M,M+C,E,e,R,h))return!0}else c+=a(w,A,T,M,M+C,E,R,h);f=Math.cos(M+C)*P+w,g=Math.sin(M+C)*T+A;break;case l.R:m=f=t[_++],x=g=t[_++];var N=t[_++],k=t[_++],S=m+N,L=x+k;if(i){if(y(m,x,S,x,e,r,h)||y(S,x,S,L,e,r,h)||y(S,L,m,L,e,r,h)||y(m,L,m,x,e,r,h))return!0}else c+=v(S,x,S,L,r,h),c+=v(m,L,m,x,r,h);break;case l.Z:if(i){if(y(f,g,m,x,e,r,h))return!0}else c+=v(f,g,m,x,r,h);f=m,g=x}}return i||n(g,x)||(c+=v(f,g,m,x,r,h)||0),0!==c}var l=i(26).CMD,c=i(30),u=i(31),d=i(32),p=i(33),f=i(34).normalizeRadian,g=i(27),v=i(35),y=c.containStroke,m=2*Math.PI,x=1e-4,_=[-1,-1,-1],b=[-1,-1];t.exports={contain:function(t,e,i){return h(t,0,!1,e,i)},containStroke:function(t,e,i,n){return h(t,e,!0,i,n)}}},function(t,e){t.exports={containStroke:function(t,e,i,n,r,o,s){if(0===r)return!1;var a=r,h=0,l=t;if(s>e+a&&s>n+a||s<e-a&&s<n-a||o>t+a&&o>i+a||o<t-a&&o<i-a)return!1;if(t===i)return Math.abs(o-t)<=a/2;h=(e-n)/(t-i),l=(t*n-i*e)/(t-i);var c=h*o-s+l,u=c*c/(h*h+1);return u<=a/2*a/2}}},function(t,e,i){var n=i(27);t.exports={containStroke:function(t,e,i,r,o,s,a,h,l,c,u){if(0===l)return!1;var d=l;if(u>e+d&&u>r+d&&u>s+d&&u>h+d||u<e-d&&u<r-d&&u<s-d&&u<h-d||c>t+d&&c>i+d&&c>o+d&&c>a+d||c<t-d&&c<i-d&&c<o-d&&c<a-d)return!1;var p=n.cubicProjectPoint(t,e,i,r,o,s,a,h,c,u,null);return p<=d/2}}},function(t,e,i){var n=i(27);t.exports={containStroke:function(t,e,i,r,o,s,a,h,l){if(0===a)return!1;var c=a;if(l>e+c&&l>r+c&&l>s+c||l<e-c&&l<r-c&&l<s-c||h>t+c&&h>i+c&&h>o+c||h<t-c&&h<i-c&&h<o-c)return!1;var u=n.quadraticProjectPoint(t,e,i,r,o,s,h,l,null);return u<=c/2}}},function(t,e,i){var n=i(34).normalizeRadian,r=2*Math.PI;t.exports={containStroke:function(t,e,i,o,s,a,h,l,c){if(0===h)return!1;var u=h;l-=t,c-=e;var d=Math.sqrt(l*l+c*c);if(d-u>i||d+u<i)return!1;if(Math.abs(o-s)%r<1e-4)return!0;if(a){var p=o;o=n(s),s=n(p)}else o=n(o),s=n(s);o>s&&(s+=r);var f=Math.atan2(c,l);return f<0&&(f+=r),f>=o&&f<=s||f+r>=o&&f+r<=s}}},function(t,e){var i=2*Math.PI;t.exports={normalizeRadian:function(t){return t%=i,t<0&&(t+=i),t}}},function(t,e){t.exports=function(t,e,i,n,r,o){if(o>e&&o>n||o<e&&o<n)return 0;if(n===e)return 0;var s=n<e?1:-1,a=(o-e)/(n-e);1!==a&&0!==a||(s=n<e?.5:-.5);var h=a*(i-t)+t;return h>r?s:0}},function(t,e){var i=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};i.prototype.getCanvasPattern=function(t){return this._canvasPattern||(this._canvasPattern=t.createPattern(this.image,this.repeat))},t.exports=i},function(t,e,i){function n(t,e){var i,n,o,c,u,d,p=t.data,f=r.M,g=r.C,v=r.L,y=r.R,m=r.A,x=r.Q;for(o=0,c=0;o<p.length;){switch(i=p[o++],c=o,n=0,i){case f:n=1;break;case v:n=1;break;case g:n=3;break;case x:n=2;break;case m:var _=e[4],b=e[5],w=h(e[0]*e[0]+e[1]*e[1]),A=h(e[2]*e[2]+e[3]*e[3]),P=l(-e[1]/A,e[0]/w);p[o++]+=_,p[o++]+=b,p[o++]*=w,p[o++]*=A,p[o++]+=P,p[o++]+=P,o+=2,c=o;break;case y:d[0]=p[o++],d[1]=p[o++],s(d,d,e),p[c++]=d[0],p[c++]=d[1],d[0]+=p[o++],d[1]+=p[o++],s(d,d,e),p[c++]=d[0],p[c++]=d[1]}for(u=0;u<n;u++){var d=a[u];d[0]=p[o++],d[1]=p[o++],s(d,d,e),p[c++]=d[0],p[c++]=d[1]}}}var r=i(26).CMD,o=i(14),s=o.applyTransform,a=[[],[],[]],h=Math.sqrt,l=Math.atan2;t.exports=n},function(t,e){var i=function(t){this.colorStops=t||[]};i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},t.exports=i},function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(e,"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this.dispatchToElement(e,"drag",t.event);var s=this.findHover(i,n,e),a=this._dropTarget;this._dropTarget=s,e!==s&&(a&&s!==a&&this.dispatchToElement(a,"dragleave",t.event),s&&s!==a&&this.dispatchToElement(s,"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(e,"dragend",t.event),this._dropTarget&&this.dispatchToElement(this._dropTarget,"drop",t.event),this._draggingTarget=null,this._dropTarget=null}},t.exports=i},function(t,e,i){var n=i(4),r=i(9),o=i(25),s=function(t){t=t||{},r.call(this,t);for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};s.prototype={constructor:s,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);n>=0&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToMap(t),t instanceof s&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,r=this._children,o=n.indexOf(r,t);return o<0?this:(r.splice(o,1),t.parent=null,i&&(i.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(i)),e&&e.refresh(),this)},removeAll:function(){var t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromMap(t.id),t instanceof s&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToMap(i),i instanceof s&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromMap(i.id),i instanceof s&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new o(0,0,0,0),n=t||this._children,r=[],s=0;s<n.length;s++){var a=n[s];if(!a.ignore&&!a.invisible){var h=a.getBoundingRect(),l=a.getLocalTransform(r);l?(i.copy(h),i.applyTransform(l),e=e||i.clone(),e.union(i)):(e=e||h.clone(),e.union(h))}}return e||i}},n.inherits(s,r),t.exports=s},function(t,e,i){function n(t){r.call(this,t)}var r=i(7),o=i(25),s=i(4),a=i(20),h=new a(50);n.prototype={constructor:n,type:"image",brush:function(t,e){var i,n=this.style,r=n.image;if(n.bind(t,this,e),i="string"==typeof r?this._image:r,!i&&r){var o=h.get(r);if(!o)return i=new Image,i.onload=function(){i.onload=null;for(var t=0;t<o.pending.length;t++)o.pending[t].dirty()},o={image:i,pending:[this]},i.src=r,h.put(r,o),void(this._image=i);if(i=o.image,this._image=i,!i.width||!i.height)return void o.pending.push(this)}if(i){var s=n.x||0,a=n.y||0;if(!i.width||!i.height)return;var l=n.width,c=n.height,u=i.width/i.height;if(null==l&&null!=c?l=c*u:null==c&&null!=l?c=l/u:null==l&&null==c&&(l=i.width,c=i.height),this.setTransform(t),n.sWidth&&n.sHeight){var d=n.sx||0,p=n.sy||0;t.drawImage(i,d,p,n.sWidth,n.sHeight,s,a,l,c)}else if(n.sx&&n.sy){var d=n.sx,p=n.sy,f=l-d,g=c-p;t.drawImage(i,d,p,f,g,s,a,l,c)}else t.drawImage(i,s,a,l,c);this.restoreTransform(t),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new o(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},s.inherits(n,r),t.exports=n},function(t,e,i){var n=i(7),r=i(4),o=i(24),s=function(t){n.call(this,t)};s.prototype={constructor:s,type:"text",brush:function(t,e){var i=this.style,n=i.x||0,r=i.y||0,s=i.text;if(null!=s&&(s+=""),i.bind(t,this,e),s){this.setTransform(t);var a,h=i.textAlign,l=i.textFont||i.font;if(i.textVerticalAlign){var c=o.getBoundingRect(s,l,i.textAlign,"top");switch(a="middle",i.textVerticalAlign){case"middle":r-=c.height/2-c.lineHeight/2;break;case"bottom":r-=c.height-c.lineHeight/2;break;default:r+=c.lineHeight/2}}else a=i.textBaseline;t.font=l||"12px sans-serif",t.textAlign=h||"left",t.textAlign!==h&&(t.textAlign="left"),t.textBaseline=a||"alphabetic",t.textBaseline!==a&&(t.textBaseline="alphabetic");for(var u=o.measureText("",t.font).width,d=s.split("\n"),p=0;p<d.length;p++)i.hasStroke()&&t.strokeText(d[p],n,r),i.hasFill()&&t.fillText(d[p],n,r),r+=u;this.restoreTransform(t)}},getBoundingRect:function(){var t=this.style;if(!this._rect){var e=t.textVerticalAlign,i=o.getBoundingRect(t.text+"",t.textFont||t.font,t.textAlign,e?"top":t.textBaseline);switch(e){case"middle":i.y-=i.height/2;break;case"bottom":i.y-=i.height}if(i.x+=t.x||0,i.y+=t.y||0,t.hasStroke()){var n=t.lineWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},r.inherits(s,n),t.exports=s},function(t,e,i){"use strict";t.exports=i(6).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}})},function(t,e,i){var n=i(45),r=i(6),o=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=r.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:n.browser.ie&&n.browser.version>=11?function(){var t,e=this.__clipPaths,i=this.style;if(e)for(var n=0;n<e.length;n++){var s=e[n]&&e[n].shape;if(s&&s.startAngle===s.endAngle){for(var a=0;a<o.length;a++)o[a][2]=i[o[a][0]],i[o[a][0]]=o[a][1];t=!0;break}}if(r.prototype.brush.apply(this,arguments),t)for(var a=0;a<o.length;a++)i[o[a][0]]=o[a][2]}:r.prototype.brush,buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),s=e.startAngle,a=e.endAngle,h=e.clockwise,l=Math.cos(s),c=Math.sin(s);t.moveTo(l*r+i,c*r+n),t.lineTo(l*o+i,c*o+n),t.arc(i,n,o,s,a,!h),t.lineTo(Math.cos(a)*r+i,Math.sin(a)*r+n),0!==r&&t.arc(i,n,r,a,s,h),t.closePath()}})},function(t,e){function i(t){var e={},i={},n=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),s=/micromessenger/i.test(t);return n&&(i.firefox=!0,i.version=n[1]),r&&(i.ie=!0,i.version=r[1]),o&&(i.edge=!0,i.version=o[1]),s&&(i.weChat=!0),{browser:i,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=11)}}var n={};n="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0}:i(navigator.userAgent),t.exports=n},function(t,e,i){t.exports=i(6).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}})},function(t,e,i){var n=i(48);t.exports=i(6).extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){n.buildPath(t,e,!0)}})},function(t,e,i){var n=i(49),r=i(50);t.exports={buildPath:function(t,e,i){var o=e.points,s=e.smooth;if(o&&o.length>=2){if(s&&"spline"!==s){var a=r(o,s,i,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var h=o.length,l=0;l<(i?h:h-1);l++){var c=a[2*l],u=a[2*l+1],d=o[(l+1)%h];t.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}}else{"spline"===s&&(o=n(o,i)),t.moveTo(o[0][0],o[0][1]);for(var l=1,p=o.length;l<p;l++)t.lineTo(o[l][0],o[l][1])}i&&t.closePath()}}}},function(t,e,i){function n(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}var r=i(14);t.exports=function(t,e){for(var i=t.length,o=[],s=0,a=1;a<i;a++)s+=r.distance(t[a-1],t[a]);var h=s/2;h=h<i?i:h;for(var a=0;a<h;a++){var l,c,u,d=a/(h-1)*(e?i:i-1),p=Math.floor(d),f=d-p,g=t[p%i];e?(l=t[(p-1+i)%i],c=t[(p+1)%i],u=t[(p+2)%i]):(l=t[0===p?p:p-1],c=t[p>i-2?i-1:p+1],u=t[p>i-3?i-1:p+2]);var v=f*f,y=f*v;o.push([n(l[0],g[0],c[0],u[0],f,v,y),n(l[1],g[1],c[1],u[1],f,v,y)])}return o}},function(t,e,i){var n=i(14),r=n.min,o=n.max,s=n.scale,a=n.distance,h=n.add;t.exports=function(t,e,i,l){var c,u,d,p,f=[],g=[],v=[],y=[];if(l){d=[1/0,1/0],p=[-(1/0),-(1/0)];for(var m=0,x=t.length;m<x;m++)r(d,d,t[m]),o(p,p,t[m]);r(d,d,l[0]),o(p,p,l[1])}for(var m=0,x=t.length;m<x;m++){var _=t[m];if(i)c=t[m?m-1:x-1],u=t[(m+1)%x];else{if(0===m||m===x-1){f.push(n.clone(t[m]));continue}c=t[m-1],u=t[m+1]}n.sub(g,u,c),s(g,g,e);var b=a(_,c),w=a(_,u),A=b+w;0!==A&&(b/=A,w/=A),s(v,g,-b),s(y,g,w);var P=h([],_,v),T=h([],_,y);l&&(o(P,P,d),r(P,P,p),o(T,T,d),r(T,T,p)),f.push(P),f.push(T)}return i&&f.push(f.shift()),f}},function(t,e,i){var n=i(48);t.exports=i(6).extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){n.buildPath(t,e,!1)}})},function(t,e,i){var n=i(53);t.exports=i(6).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,r=e.y,o=e.width,s=e.height;e.r?n.buildPath(t,e):t.rect(i,r,o,s),t.closePath()}})},function(t,e){t.exports={buildPath:function(t,e){var i,n,r,o,s=e.x,a=e.y,h=e.width,l=e.height,c=e.r;h<0&&(s+=h,h=-h),l<0&&(a+=l,l=-l),"number"==typeof c?i=n=r=o=c:c instanceof Array?1===c.length?i=n=r=o=c[0]:2===c.length?(i=r=c[0],n=o=c[1]):3===c.length?(i=c[0],n=o=c[1],r=c[2]):(i=c[0],n=c[1],r=c[2],o=c[3]):i=n=r=o=0;var u;i+n>h&&(u=i+n,i*=h/u,n*=h/u),r+o>h&&(u=r+o,r*=h/u,o*=h/u),n+r>l&&(u=n+r,n*=l/u,r*=l/u),i+o>l&&(u=i+o,i*=l/u,o*=l/u),t.moveTo(s+i,a),t.lineTo(s+h-n,a),0!==n&&t.quadraticCurveTo(s+h,a,s+h,a+n),t.lineTo(s+h,a+l-r),0!==r&&t.quadraticCurveTo(s+h,a+l,s+h-r,a+l),t.lineTo(s+o,a+l),0!==o&&t.quadraticCurveTo(s,a+l,s,a+l-o),t.lineTo(s,a+i),0!==i&&t.quadraticCurveTo(s,a,s+i,a)}}},function(t,e,i){t.exports=i(6).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.percent;0!==s&&(t.moveTo(i,n),s<1&&(r=i*(1-s)+r*s,o=n*(1-s)+o*s),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}})},function(t,e,i){"use strict";function n(t,e,i){var n=t.cpx2,r=t.cpy2;return null===n||null===r?[(i?u:l)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?u:l)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?c:h)(t.x1,t.cpx1,t.x2,e),(i?c:h)(t.y1,t.cpy1,t.y2,e)]}var r=i(27),o=i(14),s=r.quadraticSubdivide,a=r.cubicSubdivide,h=r.quadraticAt,l=r.cubicAt,c=r.quadraticDerivativeAt,u=r.cubicDerivativeAt,d=[];t.exports=i(6).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,h=e.cpx1,l=e.cpy1,c=e.cpx2,u=e.cpy2,p=e.percent;0!==p&&(t.moveTo(i,n),
null==c||null==u?(p<1&&(s(i,h,r,p,d),h=d[1],r=d[2],s(n,l,o,p,d),l=d[1],o=d[2]),t.quadraticCurveTo(h,l,r,o)):(p<1&&(a(i,h,c,r,p,d),h=d[1],c=d[2],r=d[3],a(n,l,u,o,p,d),l=d[1],u=d[2],o=d[3]),t.bezierCurveTo(h,l,c,u,r,o)))},pointAt:function(t){return n(this.shape,t,!1)},tangentAt:function(t){var e=n(this.shape,t,!0);return o.normalize(e,e)}})},function(t,e,i){t.exports=i(6).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*r+i,l*r+n),t.arc(i,n,r,o,s,!a)}})},function(t,e,i){"use strict";var n=i(4),r=i(38),o=function(t,e,i,n,o,s){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=s||!1,r.call(this,o)};o.prototype={constructor:o},n.inherits(o,r),t.exports=o},function(t,e,i){"use strict";var n=i(4),r=i(38),o=function(t,e,i,n,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=o||!1,r.call(this,n)};o.prototype={constructor:o},n.inherits(o,r),t.exports=o},function(t,e,i){"use strict";function n(t){r.each(o,function(e){this[e]=r.bind(t[e],t)},this)}var r=i(4),o=["getDom","getZr","getWidth","getHeight","dispatchAction","on","off","trigger","getDataURL","getConnectedDataURL","getModel","getOption"];t.exports=n},function(t,e){function i(t,e){this.x=t,this.y=e}i.load=function(t){var e=new i(Number(t.x),Number(t.y));return e},i.loadArray=function(t){for(var e=[],n=0;n<t.length;n++)e.push(i.load(t[n]));return e},i.cloneArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].clone());return e},i.prototype={constructor:i,transform:function(t){var e=this.x,i=this.y;this.x=t[0][0]*e+t[0][1]*i+t[0][2],this.y=t[1][0]*e+t[1][1]*i+t[1][2]},equals:function(t){return t instanceof i&&(this.x==t.x&&this.y==t.y)},clone:function(){var t=new i(this.x,this.y);return t},near:function(t,e,i){var n=Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-e,2));return n<=i},contains:function(t,e){return this.x==t&&this.y==e},toString:function(){return"["+this.x+","+this.y+"]"},getPoints:function(){return[this]}},t.exports=i},function(t,e,i){function n(t){delete p[t]}var r=i(10),o=i(45),s=i(4),a=i(62),h=i(63),l=i(65),c=i(68),u=!o.canvasSupported,d={canvas:i(70)},p={},f={};f.version="3.4.1",f.init=function(t,e){var i=new g(r(),t,e);return p[i.id]=i,i},f.dispose=function(t){if(t)t.dispose();else{for(var e in p)p.hasOwnProperty(e)&&p[e].dispose();p={}}return f},f.getInstance=function(t){return p[t]},f.registerPainter=function(t,e){d[t]=e};var g=function(t,e,i){i=i||{},this.dom=e,this.id=t;var n=this,r=new h,p=i.renderer;if(u){if(!d.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");p="vml"}else p&&d[p]||(p="canvas");var f=new d[p](e,r,i);this.storage=r,this.painter=f;var g=o.node?null:new c(f.getViewportRoot());this.handler=new a(r,f,g,f.root),this.animation=new l({stage:{update:s.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var v=r.delFromMap,y=r.addToMap;r.delFromMap=function(t){var e=r.get(t);v.call(r,t),e&&e.removeSelfFromZr(n)},r.addToMap=function(t){y.call(r,t),t.addSelfToZr(n)}};g.prototype={constructor:g,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){this._needsRefresh&&this.refreshImmediately(),this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},on:function(t,e,i){this.handler.on(t,e,i)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,n(this.id)}},t.exports=f},function(t,e,i){"use strict";function n(t,e,i){return{type:t,event:i,target:e,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch}}function r(){}function o(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n=t;n;){if(n.silent||n.clipPath&&!n.clipPath.contain(e,i))return!1;n=n.parent}return!0}return!1}var s=i(4),a=i(39),h=i(11);r.prototype.dispose=function(){};var l=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],c=function(t,e,i,n){h.call(this),this.storage=t,this.painter=e,this.painterRoot=n,i=i||new r,this.proxy=i,i.handler=this,this._hovered,this._lastTouchMoment,this._lastX,this._lastY,a.call(this),s.each(l,function(t){i.on&&i.on(t,this[t],this)},this)};c.prototype={constructor:c,mousemove:function(t){var e=t.zrX,i=t.zrY,n=this.findHover(e,i,null),r=this._hovered,o=this.proxy;this._hovered=n,o.setCursor&&o.setCursor(n?n.cursor:"default"),r&&n!==r&&r.__zr&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(n,"mousemove",t),n&&n!==r&&this.dispatchToElement(n,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e,i=t.toElement||t.relatedTarget;do i=i&&i.parentNode;while(i&&9!=i.nodeType&&!(e=i===this.painterRoot));!e&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered=null},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){for(var r="on"+e,o=n(e,t,i),s=t;s&&(s[r]&&(o.cancelBubble=s[r].call(s,o)),s.trigger(e,o),s=s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r=n.length-1;r>=0;r--)if(!n[r].silent&&n[r]!==i&&!n[r].ignore&&o(n[r],t,e))return n[r]}},s.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){c.prototype[t]=function(e){var i=this.findHover(e.zrX,e.zrY,null);if("mousedown"===t)this._downel=i,this._upel=i;else if("mosueup"===t)this._upel=i;else if("click"===t&&this._downel!==this._upel)return;this.dispatchToElement(i,t,e)}}),s.mixin(c,h),s.mixin(c,a),t.exports=c},function(t,e,i){"use strict";function n(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var r=i(4),o=i(45),s=i(40),a=i(64),h=function(){this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0};h.prototype={constructor:h,traverse:function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,r=0,s=e.length;r<s;r++)this._updateAndAddDisplayable(e[r],null,t);i.length=this._displayListLen,o.canvasSupported&&a(i,n)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var n=t.clipPath;if(n){e=e?e.slice():[];for(var r=n,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.clipPath}if(t.isGroup){for(var s=t._children,a=0;a<s.length;a++){var h=s[a];t.__dirty&&(h.__dirty=!0),this._updateAndAddDisplayable(h,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){this._elements[t.id]||(t instanceof s&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof s&&i.delChildrenFromStorage(this)}return this._elements={},this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var o;o="string"==typeof t?this._elements[t]:t;var a=r.indexOf(this._roots,o);a>=0&&(this.delFromMap(o.id),this._roots.splice(a,1),o instanceof s&&o.delChildrenFromStorage(this))}},addToMap:function(t){return t instanceof s&&(t.__storage=this),t.dirty(!1),this._elements[t.id]=t,this},get:function(t){return this._elements[t]},delFromMap:function(t){var e=this._elements,i=e[t];return i&&(delete e[t],i instanceof s&&(i.__storage=null)),this},dispose:function(){this._elements=this._renderList=this._roots=null},displayableSortFunc:n},t.exports=h},function(t,e){function i(t){for(var e=0;t>=c;)e|=1&t,t>>=1;return t+e}function n(t,e,i,n){var o=e+1;if(o===i)return 1;if(n(t[o++],t[e])<0){for(;o<i&&n(t[o],t[o-1])<0;)o++;r(t,e,o)}else for(;o<i&&n(t[o],t[o-1])>=0;)o++;return o-e}function r(t,e,i){for(i--;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}function o(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o,s=t[n],a=e,h=n;a<h;)o=a+h>>>1,r(s,t[o])<0?h=o:a=o+1;var l=n-a;switch(l){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;l>0;)t[a+l]=t[a+l-1],l--}t[a]=s}}function s(t,e,i,n,r,o){var s=0,a=0,h=1;if(o(t,e[i+r])>0){for(a=n-r;h<a&&o(t,e[i+r+h])>0;)s=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a),s+=r,h+=r}else{for(a=r+1;h<a&&o(t,e[i+r-h])<=0;)s=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}for(s++;s<h;){var c=s+(h-s>>>1);o(t,e[i+c])>0?s=c+1:h=c}return h}function a(t,e,i,n,r,o){var s=0,a=0,h=1;if(o(t,e[i+r])<0){for(a=r+1;h<a&&o(t,e[i+r-h])<0;)s=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}else{for(a=n-r;h<a&&o(t,e[i+r+h])>=0;)s=h,h=(h<<1)+1,h<=0&&(h=a);h>a&&(h=a),s+=r,h+=r}for(s++;s<h;){var c=s+(h-s>>>1);o(t,e[i+c])<0?h=c:s=c+1}return h}function h(t,e){function i(t,e){c[m]=t,p[m]=e,m+=1}function n(){for(;m>1;){var t=m-2;if(t>=1&&p[t-1]<=p[t]+p[t+1]||t>=2&&p[t-2]<=p[t]+p[t-1])p[t-1]<p[t+1]&&t--;else if(p[t]>p[t+1])break;o(t)}}function r(){for(;m>1;){var t=m-2;t>0&&p[t-1]<p[t+1]&&t--,o(t)}}function o(i){var n=c[i],r=p[i],o=c[i+1],u=p[i+1];p[i]=r+u,i===m-3&&(c[i+1]=c[i+2],p[i+1]=p[i+2]),m--;var d=a(t[o],t,n,r,0,e);n+=d,r-=d,0!==r&&(u=s(t[n+r-1],t,o,u,u-1,e),0!==u&&(r<=u?h(n,r,o,u):l(n,r,o,u)))}function h(i,n,r,o){var h=0;for(h=0;h<n;h++)x[h]=t[i+h];var l=0,c=r,d=i;if(t[d++]=t[c++],0!==--o){if(1===n){for(h=0;h<o;h++)t[d+h]=t[c+h];return void(t[d+o]=x[l])}for(var p,g,v,y=f;;){p=0,g=0,v=!1;do if(e(t[c],x[l])<0){if(t[d++]=t[c++],g++,p=0,0===--o){v=!0;break}}else if(t[d++]=x[l++],p++,g=0,1===--n){v=!0;break}while((p|g)<y);if(v)break;do{if(p=a(t[c],x,l,n,0,e),0!==p){for(h=0;h<p;h++)t[d+h]=x[l+h];if(d+=p,l+=p,n-=p,n<=1){v=!0;break}}if(t[d++]=t[c++],0===--o){v=!0;break}if(g=s(x[l],t,c,o,0,e),0!==g){for(h=0;h<g;h++)t[d+h]=t[c+h];if(d+=g,c+=g,o-=g,0===o){v=!0;break}}if(t[d++]=x[l++],1===--n){v=!0;break}y--}while(p>=u||g>=u);if(v)break;y<0&&(y=0),y+=2}if(f=y,f<1&&(f=1),1===n){for(h=0;h<o;h++)t[d+h]=t[c+h];t[d+o]=x[l]}else{if(0===n)throw new Error;for(h=0;h<n;h++)t[d+h]=x[l+h]}}else for(h=0;h<n;h++)t[d+h]=x[l+h]}function l(i,n,r,o){var h=0;for(h=0;h<o;h++)x[h]=t[r+h];var l=i+n-1,c=o-1,d=r+o-1,p=0,g=0;if(t[d--]=t[l--],0!==--n){if(1===o){for(d-=n,l-=n,g=d+1,p=l+1,h=n-1;h>=0;h--)t[g+h]=t[p+h];return void(t[d]=x[c])}for(var v=f;;){var y=0,m=0,_=!1;do if(e(x[c],t[l])<0){if(t[d--]=t[l--],y++,m=0,0===--n){_=!0;break}}else if(t[d--]=x[c--],m++,y=0,1===--o){_=!0;break}while((y|m)<v);if(_)break;do{if(y=n-a(x[c],t,i,n,n-1,e),0!==y){for(d-=y,l-=y,n-=y,g=d+1,p=l+1,h=y-1;h>=0;h--)t[g+h]=t[p+h];if(0===n){_=!0;break}}if(t[d--]=x[c--],1===--o){_=!0;break}if(m=o-s(t[l],x,0,o,o-1,e),0!==m){for(d-=m,c-=m,o-=m,g=d+1,p=c+1,h=0;h<m;h++)t[g+h]=x[p+h];if(o<=1){_=!0;break}}if(t[d--]=t[l--],0===--n){_=!0;break}v--}while(y>=u||m>=u);if(_)break;v<0&&(v=0),v+=2}if(f=v,f<1&&(f=1),1===o){for(d-=n,l-=n,g=d+1,p=l+1,h=n-1;h>=0;h--)t[g+h]=t[p+h];t[d]=x[c]}else{if(0===o)throw new Error;for(p=d-(o-1),h=0;h<o;h++)t[p+h]=x[h]}}else for(p=d-(o-1),h=0;h<o;h++)t[p+h]=x[h]}var c,p,f=u,g=0,v=d,y=0,m=0;g=t.length,g<2*d&&(v=g>>>1);var x=[];y=g<120?5:g<1542?10:g<119151?19:40,c=[],p=[],this.mergeRuns=n,this.forceMergeRuns=r,this.pushRun=i}function l(t,e,r,s){r||(r=0),s||(s=t.length);var a=s-r;if(!(a<2)){var l=0;if(a<c)return l=n(t,r,s,e),void o(t,r,s,r+l,e);var u=new h(t,e),d=i(a);do{if(l=n(t,r,s,e),l<d){var p=a;p>d&&(p=d),o(t,r,r+p,r+l,e),l=p}u.pushRun(r,l),u.mergeRuns(),a-=l,r+=l}while(0!==a);u.forceMergeRuns()}}var c=32,u=7,d=256;t.exports=l},function(t,e,i){"use strict";var n=i(4),r=i(66).Dispatcher,o=i(67),s=i(16),a=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,r.call(this)};a.prototype={constructor:a,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=n.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,i=this._clips,n=i.length,r=[],o=[],s=0;s<n;s++){var a=i[s],h=a.step(t,e);h&&(r.push(h),o.push(a))}for(var s=0;s<n;)i[s]._needsRemove?(i[s]=i[n-1],i.pop(),n--):s++;n=r.length;for(var s=0;s<n;s++)o[s].fire(r[s]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){function t(){e._running&&(o(t),!e._paused&&e._update())}var e=this;this._running=!0,o(t)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(t,e){e=e||{};var i=new s(t,e.loop,e.getter,e.setter);return this.addAnimator(i),i}},n.mixin(a,r),t.exports=a},function(t,e,i){"use strict";function n(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function r(t,e,i,n){return i=i||{},n||!c.canvasSupported?o(t,e,i):c.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):o(t,e,i),i}function o(t,e,i){var r=n(t);i.zrX=e.clientX-r.left,i.zrY=e.clientY-r.top}function s(t,e,i){if(e=e||window.event,null!=e.zrX)return e;var n=e.type,o=n&&n.indexOf("touch")>=0;if(o){var s="touchend"!=n?e.targetTouches[0]:e.changedTouches[0];s&&r(t,s,e,i)}else r(t,e,e,i),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;return e}function a(t,e,i){u?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function h(t,e,i){u?t.removeEventListener(e,i):t.detachEvent("on"+e,i)}var l=i(11),c=i(45),u="undefined"!=typeof window&&!!window.addEventListener,d=u?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};t.exports={clientToLocal:r,normalizeEvent:s,addEventListener:a,removeEventListener:h,stop:d,Dispatcher:l}},function(t,e){t.exports="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)}},function(t,e,i){function n(t){return"mousewheel"===t&&d.browser.firefox?"DOMMouseScroll":t}function r(t,e,i){var n=t._gestureMgr;"start"===i&&n.clear();var r=n.recognize(e,t.handler.findHover(e.zrX,e.zrY,null),t.dom);if("end"===i&&n.clear(),r){var o=r.type;e.gestureEvent=o,t.handler.dispatchToElement(r.target,o,r.event)}}function o(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function s(t){var e=t.pointerType;return"pen"===e||"touch"===e}function a(t){function e(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}c.each(x,function(e){t._handlers[e]=c.bind(w[e],t)}),c.each(b,function(e){t._handlers[e]=c.bind(w[e],t)}),c.each(m,function(i){t._handlers[i]=e(w[i],t)})}function h(t){function e(e,i){c.each(e,function(e){f(t,n(e),i._handlers[e])},i)}u.call(this),this.dom=t,this._touching=!1,this._touchTimer,this._gestureMgr=new p,this._handlers={},a(this),d.pointerEventsSupported?e(b,this):(d.touchEventsSupported&&e(x,this),e(m,this))}var l=i(66),c=i(4),u=i(11),d=i(45),p=i(69),f=l.addEventListener,g=l.removeEventListener,v=l.normalizeEvent,y=300,m=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],x=["touchstart","touchend","touchmove"],_={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},b=c.map(m,function(t){var e=t.replace("mouse","pointer");return _[e]?e:t}),w={mousemove:function(t){t=v(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){t=v(this.dom,t);var e=t.toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){t=v(this.dom,t),t.zrByTouch=!0,this._lastTouchMoment=new Date,r(this,t,"start"),w.mousemove.call(this,t),w.mousedown.call(this,t),o(this)},touchmove:function(t){t=v(this.dom,t),t.zrByTouch=!0,r(this,t,"change"),w.mousemove.call(this,t),o(this)},touchend:function(t){t=v(this.dom,t),t.zrByTouch=!0,r(this,t,"end"),w.mouseup.call(this,t),+new Date-this._lastTouchMoment<y&&w.click.call(this,t),o(this)},pointerdown:function(t){w.mousedown.call(this,t)},pointermove:function(t){s(t)||w.mousemove.call(this,t)},pointerup:function(t){w.mouseup.call(this,t)},pointerout:function(t){s(t)||w.mouseout.call(this,t)}};c.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){w[t]=function(e){e=v(this.dom,e),this.trigger(t,e)}});var A=h.prototype;A.dispose=function(){for(var t=m.concat(x),e=0;e<t.length;e++){var i=t[e];g(this.dom,n(i),this._handlers[i])}},A.setCursor=function(t){this.dom.style.cursor=t||"default"},c.mixin(h,u),t.exports=h},function(t,e,i){"use strict";function n(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}function r(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var o=i(66),s=function(){this._track=[]};s.prototype={constructor:s,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},s=0,a=n.length;s<a;s++){var h=n[s],l=o.clientToLocal(i,h,{});r.points.push([l.zrX,l.zrY]),r.touches.push(h)}this._track.push(r)}},_recognize:function(t){for(var e in a)if(a.hasOwnProperty(e)){var i=a[e](this._track,t);if(i)return i}}};var a={pinch:function(t,e){var i=t.length;if(i){var o=(t[i-1]||{}).points,s=(t[i-2]||{}).points||o;if(s&&s.length>1&&o&&o.length>1){var a=n(o)/n(s);!isFinite(a)&&(a=1),e.pinchScale=a;var h=r(o);return e.pinchX=h[0],e.pinchY=h[1],{type:"pinch",target:t[0].target,event:e}}}}};t.exports=s},function(t,e,i){"use strict";function n(t){return parseInt(t,10)}function r(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}function o(t){t.__unusedCount++}function s(t){1==t.__unusedCount&&t.clear()}function a(t,e,i){return x.copy(t.getBoundingRect()),t.transform&&x.applyTransform(t.transform),_.width=e,_.height=i,!x.intersect(_)}function h(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0}function l(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=n.path;n.setTransform(e),r.beginPath(e),n.buildPath(r,n.shape),e.clip(),n.restoreTransform(e)}}function c(t,e){var i=document.createElement("div");return i.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var u=i(22),d=i(4),p=i(21),f=i(25),g=i(64),v=i(71),y=i(67),m=5,x=new f(0,0,0,0),_=new f(0,0,0,0),b=function(t,e,i){var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=d.extend({},i||{}),this.dpr=i.devicePixelRatio||u.devicePixelRatio,this._singleCanvas=n,this.root=t;var r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},n){null!=i.width&&(t.width=i.width),null!=i.height&&(t.height=i.height);var a=t.width,h=t.height;this._width=a,this._height=h;var l=new v(t,this,1);l.initContext(),s[0]=l,o.push(0),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var p=this._domRoot=c(this._width,this._height);t.appendChild(p)}this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};b.prototype={constructor:b,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(e,t);for(var n=0;n<i.length;n++){var r=i[n],o=this._layers[r];!o.__builtin__&&o.refresh&&o.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(t,e){if(!t.__hoverMir){var i=new t.constructor({style:t.style,shape:t.shape});i.__from=t,t.__hoverMir=i,i.setStyle(e),this._hoverElements.push(i)}},removeHover:function(t){var e=t.__hoverMir,i=this._hoverElements,n=d.indexOf(i,e);n>=0&&i.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,i=0;i<e.length;i++){var n=e[i].__from;n&&(n.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){g(t,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(1e5));var n={};i.ctx.save();for(var r=0;r<e;){var o=t[r],s=o.__from;s&&s.__zr?(r++,s.invisible||(o.transform=s.transform,o.invTransform=s.invTransform,o.__clipPaths=s.__clipPaths,this._doPaintEl(o,i,!0,n))):(t.splice(r,1),s.__hoverMir=null,e--)}i.ctx.restore()}},_startProgessive:function(){function t(){i===e._progressiveToken&&e.storage&&(e._doPaintList(e.storage.getDisplayList()),e._furtherProgressive?(e._progress++,y(t)):e._progressiveToken=-1)}var e=this;if(e._furtherProgressive){var i=e._progressiveToken=+new Date;e._progress++,y(t)}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,d.each(this._progressiveLayers,function(t){t.__dirty&&t.clear()})},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t),this._clearProgressive(),this.eachBuiltinLayer(o),this._doPaintList(t,e),this.eachBuiltinLayer(s)},_doPaintList:function(t,e){function i(t){var e=o.dpr||1;o.save(),o.globalAlpha=1,o.shadowBlur=0,n.__dirty=!0,o.setTransform(1,0,0,1,0,0),o.drawImage(t.dom,0,0,c*e,u*e),o.restore()}for(var n,r,o,s,a,h,l=0,c=this._width,u=this._height,f=this._progress,g=0,v=t.length;g<v;g++){var y=t[g],x=this._singleCanvas?0:y.zlevel,_=y.__frame;if(_<0&&a&&(i(a),a=null),r!==x&&(o&&o.restore(),s={},r=x,n=this.getLayer(r),n.__builtin__||p("ZLevel "+r+" has been used by unkown layer "+n.id),o=n.ctx,o.save(),n.__unusedCount=0,(n.__dirty||e)&&n.clear()),n.__dirty||e){if(_>=0){if(!a){if(a=this._progressiveLayers[Math.min(l++,m-1)],a.ctx.save(),a.renderScope={},a&&a.__progress>a.__maxProgress){g=a.__nextIdxNotProg-1;continue}h=a.__progress,a.__dirty||(f=h),a.__progress=f+1}_===f&&this._doPaintEl(y,a,!0,a.renderScope)}else this._doPaintEl(y,n,e,s);y.__dirty=!1}}a&&i(a),o&&o.restore(),this._furtherProgressive=!1,d.each(this._progressiveLayers,function(t){t.__maxProgress>=t.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(t,e,i,n){var r=e.ctx,o=t.transform;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!a(t,this._width,this._height))){var s=t.__clipPaths;(n.prevClipLayer!==e||h(s,n.prevElClipPaths))&&(n.prevElClipPaths&&(n.prevClipLayer.ctx.restore(),n.prevClipLayer=n.prevElClipPaths=null,n.prevEl=null),s&&(r.save(),l(s,r),n.prevClipLayer=e,n.prevElClipPaths=s)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,n.prevEl||null),n.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||(e=new v("zr_"+t,this,this.dpr),e.__builtin__=!0,this._layerConfig[t]&&d.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var i=this._layers,n=this._zlevelList,o=n.length,s=null,a=-1,h=this._domRoot;if(i[t])return void p("ZLevel "+t+" has been used already");if(!r(e))return void p("Layer of zlevel "+t+" is not valid");if(o>0&&t>n[0]){for(a=0;a<o-1&&!(n[a]<t&&n[a+1]>t);a++);s=i[n[a]]}if(n.splice(a+1,0,t),i[t]=e,!e.virtual)if(s){var l=s.dom;l.nextSibling?h.insertBefore(e.dom,l.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom)},eachLayer:function(t,e){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuiltinLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.__builtin__&&t.call(e,i,n)},eachOtherLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.__builtin__||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,i=this._progressiveLayers,n={},r={};this.eachBuiltinLayer(function(t,e){n[e]=t.elCount,t.elCount=0,t.__dirty=!1}),d.each(i,function(t,e){r[e]=t.elCount,t.elCount=0,t.__dirty=!1});for(var o,s,a=0,h=0,l=0,c=t.length;l<c;l++){var u=t[l],p=this._singleCanvas?0:u.zlevel,f=e[p],g=u.progressive;if(f&&(f.elCount++,f.__dirty=f.__dirty||u.__dirty),g>=0){s!==g&&(s=g,h++);var y=u.__frame=h-1;if(!o){var x=Math.min(a,m-1);o=i[x],o||(o=i[x]=new v("progressive",this,this.dpr),o.initContext()),o.__maxProgress=0}o.__dirty=o.__dirty||u.__dirty,o.elCount++,o.__maxProgress=Math.max(o.__maxProgress,y),o.__maxProgress>=o.__progress&&(f.__dirty=!0)}else u.__frame=-1,o&&(o.__nextIdxNotProg=l,a++,o=null)}o&&(a++,o.__nextIdxNotProg=l),this.eachBuiltinLayer(function(t,e){n[e]!==t.elCount&&(t.__dirty=!0)}),i.length=Math.min(a,m),d.each(i,function(t,e){r[e]!==t.elCount&&(u.__dirty=!0),t.__dirty&&(t.__progress=0)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?d.merge(i[t],e,!0):i[t]=e;var n=this._layers[t];n&&d.merge(n,i[t],!0)}},delLayer:function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(d.indexOf(i,t),1))},resize:function(t,e){var i=this._domRoot;i.style.display="none";var n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display="",this._width!=t||e!=this._height){i.style.width=t+"px",i.style.height=e+"px";for(var r in this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);d.each(this._progressiveLayers,function(i){i.resize(t,e)}),this.refresh(!0)}return this._width=t,this._height=e,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var e=new v("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clearColor=t.backgroundColor,e.clear();for(var i=this.storage.getDisplayList(!0),n={},r=0;r<i.length;r++){var o=i[r];this._doPaintEl(o,e,!0,n)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,i=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);var a=this.root,h=document.defaultView.getComputedStyle(a);return(a[r]||n(h[i])||n(a.style[i]))-(n(h[o])||0)-(n(h[s])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),o=t.getBoundingRect(),s=t.style,a=s.shadowBlur,h=s.shadowOffsetX,l=s.shadowOffsetY,c=s.hasStroke()?s.lineWidth:0,u=Math.max(c/2,-h+a),d=Math.max(c/2,h+a),p=Math.max(c/2,-l+a),f=Math.max(c/2,l+a),g=o.width+u+d,v=o.height+p+f;n.width=g*e,n.height=v*e,r.scale(e,e),r.clearRect(0,0,g,v),r.dpr=e;var y={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-o.x,p-o.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(r);var m=i(41),x=new m({style:{x:0,y:0,image:n}});return null!=y.position&&(x.position=t.position=y.position),null!=y.rotation&&(x.rotation=t.rotation=y.rotation),null!=y.scale&&(x.scale=t.scale=y.scale),x}},t.exports=b},function(t,e,i){function n(){return!1}function r(t,e,i,n){var r=document.createElement(e),o=i.getWidth(),s=i.getHeight(),a=r.style;return a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=s+"px",r.width=o*n,r.height=s*n,r.setAttribute("data-zr-dom-id",t),r}var o=i(4),s=i(22),a=i(8),h=i(36),l=function(t,e,i){var a;i=i||s.devicePixelRatio,"string"==typeof t?a=r(t,"canvas",e,i):o.isObject(t)&&(a=t,t=a.id),this.id=t,this.dom=a;var h=a.style;h&&(a.onselectstart=n,h["-webkit-user-select"]="none",h["user-select"]="none",h["-webkit-touch-callout"]="none",h["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",h.padding=0,h.margin=0,h["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};l.prototype={constructor:l,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=r("back-"+this.id,"canvas",this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r.width=t+"px",r.height=e+"px",n.width=t*i,n.height=e*i,o&&(o.width=t*i,o.height=e*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(t){var e=this.dom,i=this.ctx,n=e.width,r=e.height,o=this.clearColor,s=this.motionBlur&&!t,l=this.lastFrameAlpha,c=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/c,r/c)),i.clearRect(0,0,n,r),o){var u;o.colorStops?(u=o.__canvasGradient||a.getGradient(i,o,{x:0,y:0,width:n,height:r}),o.__canvasGradient=u):o.image&&(u=h.prototype.getCanvasPattern.call(o,i)),i.save(),i.fillStyle=u||o,i.fillRect(0,0,n,r),i.restore()}if(s){var d=this.domBack;i.save(),i.globalAlpha=l,i.drawImage(d,0,0,n,r),i.restore()}}},t.exports=l},function(t,e,i){function n(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=e[r];o.parent&&M.isSubProcess(o.parent)||o&&o.toJSON&&n.push(o.toJSON())}for(var s=0;s<i.length;s++){var a=i[s];a.parent&&M.isSubProcess(a.parent)||a&&a.toJSON&&n.push(a.toJSON())}return t.set("childShapes",n),t.option}function r(t,e){t.clear(!0);var i=new d(e);t.model=i;var n=i.get("properties.width"),r=i.get("properties.height");
n>0&&r>0&&t.resize(n,r);for(var s=i.get("childShapes"),a=[],h=0;h<s.length;h++){var l=s[h],c=l.stencil.type;if(c===M.SEQUENCE_FLOW)a.push(l);else{var u=new d(l),p=t.addNodeByModel(u,!1,!0);if(c===M.SUB_PROCESS)for(var f=u.get("childShapes"),g=0;g<f.length;g++){var v=new d(f[g]);if(M.isFlowModel(v))t.addConnectorByModel(v,p);else{var y=u.get("bounds.upperLeft"),m=v.get("bounds.upperLeft");v.set("bounds.upperLeft",{x:m.x+y.x,y:m.y+y.y}),t.addNodeByModel(v,!0,!0)}}}}for(var x=0,_=a.length;x<_;x++){var b=new d(a[x]);t.addConnectorByModel(b)}for(var w=0;w<s.length;w++)if(s[w].properties.slotEvent)for(var A=0;A<s[w].properties.slotEvent.length;A++)o(t,s[w].resourceId).slotEvent.push(o(t,s[w].properties.slotEvent[A]))}function o(t,e){for(var i,n=t.allNodes.length-1;n>=0;n--)t.allNodes[n].model.get("resourceId")==e&&(i=t.allNodes[n]);return i}function s(){u.registerClass(p,"StartNoneEvent"),u.registerClass(f,"EndNoneEvent"),u.registerClass(g,"UserTask"),u.registerClass(v,"ManualTask"),u.registerClass(y,"ScriptTask"),u.registerClass(m,"MailTask"),u.registerClass(x,"CatchTimerEvent"),u.registerClass(_,"CatchSignalEvent"),u.registerClass(b,"ThrowSignalEvent"),u.registerClass(w,"InclusiveGateway"),u.registerClass(A,"ExclusiveGateway"),u.registerClass(P,"ParallelGateway"),u.registerClass(T,"SubProcess")}function a(t,e,i){var n,r;return t.parent?"SubProcess"==t.parent.model.get("stencil.type")?(n=e-t.parent.getRect().boundingRect.x,r=i-t.parent.getRect().boundingRect.y,t.rectContain(n,r)):void 0:t.rectContain(e,i)}function h(t,e,i,n){for(var r=t.length-1;r>=0;r--)if(l(n,t[r])&&!t[r].ignore&&a(t[r],e,i))return t[r]}function l(t,e){return c.indexOf(t,e)==-1}var c=i(4),u=(i(73),i(75)),d=i(78),p=i(80),f=i(82),g=i(83),v=i(85),y=i(86),m=i(87),x=i(88),_=i(89),b=i(90),w=i(91),A=i(93),P=i(94),T=i(95),M=i(101),C={toJson:n,fromJson:r,registerBPMNNode:s,findHover:h};t.exports=C},function(t,e,i){function n(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.prototype.constructor=t,t.superClass=e}function r(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19==r?3&t|8:t]);return"sid-"+i.join("")}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t){for(var e=o(t[0],t[1]),i=[t[0],t[1]],n=1;n<t.length-1;n++)e<o(t[n],t[n+1])&&(e=o(t[n],t[n+1]),i=[t[n],t[n+1]]);return i}function a(t){for(var e=0,i=0;i<t.length-1;i++)e+=o(t[i],t[i+1]);return e}function h(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e<t[i]&&(e=t[i]);return e}function l(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e>t[i]&&(e=t[i]);return e}function c(t){if(t.length<=1)return!0;for(var e=0;e<t.length-1;e++)if(t[e].x!=t[e+1].x&&t[e].y!=t[e+1].y)return!1;return!0}function u(t,e){if(t.startPoint.x==t.endPoint.x&&e.startPoint.x==e.endPoint.x)return t.startPoint.x==e.startPoint.x&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y));if(t.startPoint.x==t.endPoint.x||e.startPoint.x==e.endPoint.x){if(t.startPoint.x==t.endPoint.x){var i=t;t=e,e=i}var n=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),r=t.startPoint.y-n*t.startPoint.x,o=e.startPoint.x,s=n*o+r;return t.contains(o,s)&&e.contains(o,s)}var a=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),h=t.startPoint.y-a*t.startPoint.x,l=(e.endPoint.y-e.startPoint.y)/(e.endPoint.x-e.startPoint.x),c=e.startPoint.y-l*e.startPoint.x;return a==l?h==c&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y)):(o=(c-h)/(a-l),s=a*o+h,t.contains(o,s)&&e.contains(o,s))}function d(t,e,i){var n=[];n.push(new O(new z(e[0],e[1]),new z(e[2],e[1]))),n.push(new O(new z(e[2],e[1]),new z(e[2],e[3]))),n.push(new O(new z(e[2],e[3]),new z(e[0],e[3]))),n.push(new O(new z(e[0],e[3]),new z(e[0],e[1])));for(var r=0;r<t.length-1;r++)for(var o=new O(t[r],t[r+1]),s=0;s<n.length;s++)if(u(o,n[s]))return!0;if(i)for(var a=new O(t[t.length-1],t[0]),h=0;h<n.length;h++)if(u(a,n[h]))return!0;return!1}function p(t){if(t.length<=2)return-1;for(var e=0,i=1;i<t.length-1;i++)if(t[i-1].x==t[i].x&&t[i].x==t[i+1].x){if(f(t[i+1].y-t[i].y)!=f(t[i].y-t[i-1].y))return-1;e++}else if(t[i-1].y==t[i].y&&t[i].y==t[i+1].y){if(f(t[i+1].x-t[i].x)!=f(t[i].x-t[i-1].x))return-1;e++}else e--;return e}function f(t){return t>0?1:t<0?-1:0}function g(t){if(t.length<=2)return!0;for(var e=0;e<t.length-2;e++)if(t[e].x==t[e+1].x&&t[e+1].x==t[e+2].x){if(0!=f(t[e+1].y-t[e].y)&&f(t[e+1].y-t[e].y)==-1*f(t[e+2].y-t[e+1].y))return!1}else if(t[e].y==t[e+1].y&&t[e+1].y==t[e+2].y&&0!=f(t[e+1].x-t[e].x)&&f(t[e+1].x-t[e].x)==-1*f(t[e+2].x-t[e+1].x))return!1;return!0}function v(t,e){var i=[];if(e){for(var n=0;n<t.length;n++){var r=t[n];i.push(new z(r[0],r[1]))}return i}for(var o=0;o<t.length;o++){var s=t[o];i.push([s.x,s.y])}return i}function y(t){var e=[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]];return e}function m(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function x(t,e){return null==e&&(e=t),[[t,0,0],[0,e,0],[0,0,1]]}function _(t,e,i){var n=t.clone();return n.transform(m(-t.x,-t.y)),n.y-=e,n.transform(y(i)),n.transform(m(t.x,t.y)),n}function b(t){return{left:new z(t.x,t.y+t.height/2),top:new z(t.x+t.width/2,t.y),right:new z(t.x+t.width,t.y+t.height/2),bottom:new z(t.x+t.width/2,t.y+t.height),center:new z(t.x+t.width/2,t.y+t.height/2)}}function w(t){return[[10*Math.round(t.getRect().width/3/10),0],[10*Math.round(2*t.getRect().width/3/10),0],[t.getRect().width,10*Math.round(t.getRect().height/3/10)],[t.getRect().width,10*Math.round(2*t.getRect().height/3/10)],[10*Math.round(t.getRect().width/3/10),t.getRect().height],[10*Math.round(2*t.getRect().width/3/10),t.getRect().height],[0,10*Math.round(t.getRect().height/3/10)],[0,10*Math.round(2*t.getRect().height/3/10)]]}function A(t,e){return-Math.PI/2-Math.atan2(e.y-t.y,e.x-t.x)}function P(t,e,i,n){var r=t.x*e.y+t.y*i.x+e.x*i.y-(e.y*i.x+t.y*e.x+t.x*i.y);return n?Math.abs(r)<=n:0===r}function T(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function M(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function C(t,e,i){t.x=T(t.x,5),t.y=T(t.y,5),e.x=T(e.x,5),e.y=T(e.y,5);var n=Math.atan((e.x-t.x)/(e.y-t.y));for(n=-n,e.x>=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y<=t.y&&(n+=2*Math.PI);n>=2*Math.PI;)n-=2*Math.PI;return isNaN(n)&&(n=0),i&&(n=Math.round(n/i)*i),n}function E(t){var e=t.getBoundingRect(),i=[];i[0]=[-e.width/2,-e.height/2],i[1]=[e.width/2,-e.height/2],i[2]=[e.width/2,e.height/2],i[3]=[-e.width/2,e.height/2],i[4]=[-e.width/2,-e.height/2];var n,r,o;return t instanceof B.Circle?(n=new I(Number(t.position[0])-Number(e.width/2),Number(t.position[1])-Number(e.height/2),Number(e.width),Number(e.height)),r=Number(t.position[0]),o=Number(t.position[1])):(n=new I(Number(t.position[0]),Number(t.position[1]),Number(e.width),Number(e.height)),r=Number(t.position[0])+Number(e.width)/2,o=Number(t.position[1])+Number(e.height)/2),{x:Number(r),y:Number(o),width:Number(e.width),height:Number(e.height),points:i,boundingRect:n}}function S(){for(var t,e=["0","2","3","4","5","6","7","8","9","a","b","c","d"],i="#",n=0;n<6;n++)t=Math.round(15*Math.random()),i+=e[t];return i}function L(t){return void 0===t}function R(t){var e=[];if(t.length<3)return z.cloneArray(t);e.push(t[0].clone());for(var i=1;i<t.length-1;i++)t[i-1].x==t[i].x&&t[i].x==t[i+1].x||t[i-1].y==t[i].y&&t[i].y==t[i+1].y||e.push(t[i].clone());return e.push(t[t.length-1].clone()),e}function N(t,e,i){!e&&i&&(e=i),e=e||{},e=D.defaults(e,H,!0);var n=RegExp([(e.escape||Y).source,(e.interpolate||Y).source,(e.evaluate||Y).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(q,G),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj",o)}catch(a){throw a.source=o,a}var h=function(t){return s.call(this,t)},l=e.variable||"obj";return h.source="function("+l+"){\n"+o+"}",h}function k(t){return null==t||(D.isArrayLike(t)&&(D.isArray(t)||D.isString(t))?0===t.length:void 0)}var z=i(60),O=i(74),B=i(3),I=i(25),D=i(4),F={createNew:function(){var t=[];return{add:function(t,e){var i=this.get(t);i.push(e)},get:function(e){for(var i=0;i<t.length;i++)if(e==t[i].key)return t[i].value;var n=[];return t.push({key:e,value:n}),n},keys:function(){for(var e=[],i=0;i<t.length;i++)e.push(t[i].key);return e},top:function(){return t[t.length-1]},remove:function(e){for(var i=-1,n=0;n<t.length;n++)if(e==t[n].key){i=n;break}return t.splice(i,1)[0]},removeItem:function(t,e){var i=this.get(t),n=D.indexOf(i,e);i.splice(n,1)},removeTop:function(){return t.splice(t.length-1,1)[0]},length:function(){return t.length},clear:function(){t.splice(0,t.length)}}}},H={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Y=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,G=function(t){return"\\"+U[t]};t.exports={inherits:n,getUUID:r,distance:o,getPolylineLength:a,max:h,min:l,isEmpty:k,orthogonalPath:c,polylineIntersectsRectangle:d,scorePath:p,forwardPath:g,traslatePoints:v,getEndPoint:_,getConnectorPoints:b,tangentRotation:A,collinearity:P,translationMatrix:m,scaleMatrix:x,round:T,getLength:M,getAngle:C,getRect:E,StackedMap:F,getMaxLineLength:s,randomColor:S,template:N,isUndefined:L,getSoltPoints:w,collinearReduction:R}},function(t,e){function i(t,e){this.startPoint=t,this.endPoint=e,this.oType="Line"}i.load=function(t){var e=new i(Point.load(t.startPoint),Point.load(t.endPoint));return e},i.prototype={contructor:i,clone:function(){var t=new i(this.startPoint.clone(),this.endPoint.clone());return t},equals:function(t){return!(!t instanceof i)&&(this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint))},contains:function(t,e){if(Math.min(this.startPoint.x,this.endPoint.x)<=t&&t<=Math.max(this.startPoint.x,this.endPoint.x)&&Math.min(this.startPoint.y,this.endPoint.y)<=e&&e<=Math.max(this.startPoint.y,this.endPoint.y)){if(this.startPoint.x==this.endPoint.x)return t==this.startPoint.x;var i=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x),n=this.startPoint.y-i*this.startPoint.x;return e==i*t+n}return!1},near:function(t,e,i){if(this.endPoint.x===this.startPoint.x)return(this.startPoint.y-i<=e&&this.endPoint.y+i>=e||this.endPoint.y-i<=e&&this.startPoint.y+i>=e)&&t>this.startPoint.x-i&&t<this.startPoint.x+i;if(this.startPoint.y===this.endPoint.y)return(this.startPoint.x-i<=t&&this.endPoint.x+i>=t||this.endPoint.x-i<=t&&this.startPoint.x+i>=t)&&e>this.startPoint.y-i&&e<this.startPoint.y+i;var n=Math.min(this.endPoint.x,this.startPoint.x),r=Math.min(this.endPoint.y,this.startPoint.y),o=Math.max(this.endPoint.x,this.startPoint.x),s=Math.max(this.endPoint.y,this.startPoint.y),a=this.endPoint.y-this.startPoint.y,h=this.startPoint.x-this.endPoint.x,l=-(this.startPoint.x*this.endPoint.y-this.endPoint.x*this.startPoint.y),c=Math.abs((a*t+h*e+l)/Math.sqrt(Math.pow(a,2)+Math.pow(h,2))),u=(h*(h*t-a*e)-a*l)/(Math.pow(a,2)+Math.pow(h,2)),d=(a*(-h*t+a*e)-h*l)/(Math.pow(a,2)+Math.pow(h,2)),p=c<=i&&o>=u&&u>=n&&s>=d&&d>=r||this.startPoint.near(t,e,i)||this.endPoint.near(t,e,i);return p},getPoints:function(){var t=[];return t.push(this.startPoint),t.push(this.endPoint),t},getPoint:function(t){var e=t*(this.endPoint.x-this.startPoint.x)+this.startPoint.x,i=t*(this.endPoint.y-this.startPoint.y)+this.startPoint.y;return new Point(e,i)},toString:function(){return"line("+this.startPoint+","+this.endPoint+")"}},t.exports=i},function(t,e,i){function n(t,e){r.call(this),this.model=t,this.options={outline:{enable:!0,radius:!0,initVisible:!1},text:{color:"#000000",lineHeight:24}},this.bpmnInfo={type:-1,name:"BPMNDiagram",displayName:"Task"};var i=t.get("resourceId");i&&""!=i&&(this.resourceId=i);var n=t.get("properties");n.operationIcons&&(this.operationIcons=n.operationIcons),this.initEvent(e)}var r=i(76),o=i(4),s=(i(3),i(77));n.prototype.initEvent=function(t){var e=this,i=["dblclick","click"];o.each(i,function(i){e.on(i,function(n){var r={};r.event=n,r.type=i,r.target=e,t.trigger(i,r)},this)})},n.prototype.getRect=function(){},n.prototype.getBoundingRect=function(){},n.prototype.setPosition=function(t,e){},n.prototype.rectContain=function(t,e){var i=this.getRect();return i.boundingRect.contain(t,e)},n.prototype.toJSON=function(){if(this.model.set("resourceId",this.resourceId),this.model.set("properties.type",this.bpmnInfo.type),this.model.set("stencil.type",this.bpmnInfo.name),this.slotEvent&&this.slotEvent.length>0){for(var t=[],e=this.slotEvent.length-1;e>=0;e--)t.push(this.slotEvent[e].resourceId);this.model.set("properties.slotEvent",t)}this.model.set("properties.type",this.bpmnInfo.type);var i=this.getRect().boundingRect;return this.model.set("bounds.upperLeft.x",parseInt(i.x)),this.model.set("bounds.upperLeft.y",parseInt(i.y)),this.model.set("bounds.lowerRight.x",parseInt(i.x+i.width)),this.model.set("bounds.lowerRight.y",parseInt(i.y+i.height)),this.model.option},n.prototype.setModel=function(t){var e=this,i=this.model.get("properties.name");if(this.model.mergeOption(t),i!=t.properties.name){var n,r=this.childOfName("Title"),o=t.properties.name.length;o>64?(n=t.properties.name.substr(0,64)+"..",this.alarm&&(this.alarm.isShow=!0)):(n=t.properties.name,this.alarm&&(this.alarm.isShow=!1)),r.attr("style",{text:n}),e.refreshText(e);var s=t.properties.name,a=this.alarm.childOfName("Text");a.attr("style",{text:s});var h=a.getBoundingRect().width+4,l=a.getBoundingRect().height+8,c=[[0,0],[h,0],[h,l],[h-3,l],[h-6,l+3],[h-9,l],[0,l],[0,0]],u=this.alarm.childOfName("Polyline");u.attr("shape",{points:c});var d=[this.position[0]+this.getBoundingRect().width-(this.alarm.getBoundingRect().width-6),this.position[1]-this.alarm.getBoundingRect().height-3];this.alarm.attr("position",d)}},o.inherits(n,r),s.enableClassManagement(n,{registerWhenExtend:!0}),t.exports=n},function(t,e,i){function n(){this.resourceId=o.getUUID(),r.Group.call(this)}var r=i(3),o=i(73);n.prototype.render=function(){},n.prototype.getRect=function(t){},n.prototype.drawText=function(t,e){var i=this.bpmnInfo.name;null!=t&&(i=t);var n=new r.Text({style:{text:i,color:e?e:this.options.text.color,textFont:"12px Microsoft YaHei"},zlevel:20}),o=this.getRect().x-this.position[0]-n.getBoundingRect().width/2,s=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+n.getBoundingRect().height+6;return n.attr("style",{x:o,y:s}),{text:n,rect:n.getBoundingRect()}},n.prototype.refreshText=function(){var t=this.childOfName("Title"),e=this.getRect().x-this.position[0]-t.getBoundingRect().width/2,i=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+t.getBoundingRect().height+6;t.attr("style",{x:e,y:i})},n.prototype.toJSON=function(){},r.Util.inherits(n,r.Group),t.exports=n},function(t,e,i){function n(t,e){var i=o.slice(arguments,2);return this.superClass.prototype[e].apply(t,i)}function r(t,e,i){return this.superClass.prototype[e].apply(t,i)}var o=i(4),s={},a=".",h="___FT__COMPONENT__CONTAINER___",l=s.parseClassType=function(t){var e={main:"",sub:""};return t&&(t=t.split(a),e.main=t[0]||"",e.sub=t[1]||""),e};s.enableClassExtend=function(t,e){t.extend=function(i){var s=function(){e&&e.apply(this,arguments),t.apply(this,arguments)};return o.extend(s.prototype,i),s.extend=this.extend,s.superCall=n,s.superApply=r,o.inherits(s,this),s.superClass=this,s}},s.enableClassManagement=function(t,e){function i(t){var e=n[t.main];return e&&e[h]||(e=n[t.main]={},e[h]=!0),e}e=e||{};var n={};if(t.registerClass=function(t,e){if(e)if(e=l(e),e.sub){if(e.sub!==h){var r=i(e);r[e.sub]=t}}else{if(n[e.main])return;n[e.main]=t}return t},t.getClass=function(t,e,i){var r=n[t];if(r&&r[h]&&(r=e?r[e]:null),i&&!r)throw new Error("Component "+t+"."+(e||"")+" not exists. Load it first.");return r},t.getClassesByMainType=function(t){t=l(t);var e=[],i=n[t.main];return i&&i[h]?o.each(i,function(t,i){i!==h&&e.push(t)}):e.push(i),e},t.hasClass=function(t){return t=l(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return o.each(n,function(e,i){t.push(i)}),t},t.hasSubTypes=function(t){t=l(t);var e=n[t.main];return e&&e[h]},t.parseClassType=l,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var i=r.call(this,e);return t.registerClass(i,e.type)})}return t},t.exports=s},function(t,e,i){var n=i(79),r=n.extend({type:"BPMN",defaultOption:{resourceId:"",properties:{type:-1,name:null,notes:"",extProperties:{}},stencil:{type:"BPMNDiagram"},childShapes:[],outgoing:[],bounds:{upperLeft:{x:0,y:0},lowerRight:{x:0,y:0}}}});t.exports=r},function(t,e,i){function n(t,e,i){this.parentModel=e,this.option=t,this.init&&(arguments.length<=3?this.init(t,e,i):this.init.apply(this,arguments))}var r=i(4),o=i(77);n.prototype={constructor:n,init:function(t){r.merge(t,this.getDefaultOption())},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var t=[],e=this.constructor;e;){var i=e.prototype.defaultOption;i&&t.push(i),e=e.superClass}for(var n={},o=t.length-1;o>=0;o--)n=r.merge(n,t[o],!0);this.__defaultOption=n}return this.__defaultOption},mergeOption:function(t){r.merge(this.option,t,!0)},get:function(t,e){if(!t)return this.option;"string"==typeof t&&(t=t.split("."));for(var i=this.option,n=this.parentModel,r=0;r<t.length&&(i=i&&"object"==typeof i?i[t[r]]:null,null!=i);r++);return null==i&&n&&!e&&(i=n.get(t)),i},set:function(t,e){var i=this.option;if(t.indexOf(".")==-1)i[t]=e;else{for(var n,r=t.split("."),o=r.length,s=i,a=0;a<o-1;a++)n=r[a],null==s[n]&&(s[n]={}),s=s[n];n=r[o-1],s[n]=e}},getShallow:function(t,e){var i=this.option,n=i&&i[t],r=this.parentModel;return null==n&&r&&!e&&(n=r.getShallow(t)),n},getModel:function(t,e){var i=this.get(t,!0),r=this.parentModel,o=new n(i,e||r&&r.getModel(t));return o},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(r.clone(this.option))}},o.enableClassExtend(n),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M11.25,8.25 L11.25,22.5 L22.5,15.375 L11.25,8.25 Z",this.itemSize=20,this.bpmnInfo={type:29,name:"StartNoneEvent"},this.render(t)}var r=i(81),o=i(4),s=i(3);n.prototype.render=function(t){this.removeAll(),this.model=t;var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize},style:{fill:"#7ED321"},z:2});e.name="Circle",this.add(e);var i=this.itemSize,n={x:-i/2,y:-i/2,width:i,height:i};this.add(s.makePath(this.startIcon,{style:{fill:"#FFFFFF"},z:2},n,"center")),this.position=[t.get("bounds.upperLeft.x")+i,t.get("bounds.upperLeft.y")+i];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"EventNode"},this.model=t}var r=i(75),o=i(4),s=i(25);n.prototype.render=function(){},n.prototype.getRect=function(){var t=this.getBoundingRect(),e=[];e[0]=[-t.width/2,-t.height/2],e[1]=[t.width/2,-t.height/2],e[2]=[t.width/2,t.height/2],e[3]=[-t.width/2,t.height/2],e[4]=[-t.width/2,-t.height/2];var i=new s(this.position[0]-t.width/2,this.position[1]-t.height/2,t.width,t.height);return{x:this.position[0],y:this.position[1],width:t.width/2,height:t.height/2,points:e,boundingRect:i}},n.prototype.setPosition=function(t,e){this.attr("position",[t,e])},n.prototype.getBoundingRect=function(){var t=this.childOfName("Circle");return t.getBoundingRect()},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnType="EndNoneEvent",this.itemSize=20,this.rectSize=12,this.bpmnInfo={type:31,name:"EndNoneEvent"},this.render(t)}var r=i(81),o=i(4),s=(i(73),i(3));n.prototype.render=function(t){this.model=t;var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize},style:{fill:"#D0011B"},z:2});e.name="Circle",this.add(e);var i=new s.Rect({shape:{x:-this.rectSize/2,y:-this.rectSize/2,width:this.rectSize,height:this.rectSize},style:{fill:"#FFFFFF"},z:2});this.add(i);var n=2*this.itemSize;this.position=[t.get("bounds.upperLeft.x")+n/2,t.get("bounds.upperLeft.y")+n/2];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="M765.573741 718.489888c-14.999622-112.659873-119.671567-196.438974-237.776452-196.438974-118.912273 0-220.514299 85.277222-238.20317 198.770066-11.840676 76.071559 54.585199 71.326489 54.585199 71.326489l360.734878 0C704.913173 792.148491 776.608052 801.364387 765.573741 718.489888zM690.249195 365.718379c0 89.911776-72.889077 162.810063-162.79676 162.810063-89.908706 0-162.797783-72.898287-162.797783-162.810063 0-89.916892 72.889077-162.80597 162.797783-162.80597C617.360118 202.912409 690.249195 275.801487 690.249195 365.718379z",this.bpmnInfo={type:0,name:"UserTask"},this.render(t)}var r=i(84),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:2});e.name="Rect",this.add(e);var i={x:5,y:5,width:15,height:15},n=s.makePath(this.iconPath,{style:{fill:"#4990E2"},z:2},i);this.add(n),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var r=this.drawText(t.get("properties.name"));r.text.name="Title",this.add(r.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"TaskNode"},this.model=t,this.slot=[],this.slotEvent=[],this.isCanSlot=!0}var r=i(75),o=i(4),s=i(25);n.prototype.render=function(){},n.prototype.getRect=function(){var t=this.getBoundingRect(),e=[];e[0]=[-t.width/2,-t.height/2],e[1]=[t.width/2,-t.height/2],e[2]=[t.width/2,t.height/2],e[3]=[-t.width/2,t.height/2],e[4]=[-t.width/2,-t.height/2];var i=new s(this.position[0],this.position[1],t.width,t.height);return{x:this.position[0]+t.width/2,y:this.position[1]+t.height/2,width:t.width,height:t.height,points:e,boundingRect:i}},n.prototype.getBoundingRect=function(){var t=this.childOfName("Rect");return t.getBoundingRect()},n.prototype.setPosition=function(t,e){var i=this.getBoundingRect();this.attr("position",[t-i.width/2,e-i.height/2])},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="m 17,9.3290326 c -0.0069,0.5512461 -0.455166,1.0455894 -0.940778,1.0376604 l -5.792746,0 c 0.0053,0.119381 0.0026,0.237107 0.0061,0.355965 l 5.154918,0 c 0.482032,-0.0096 0.925529,0.49051 0.919525,1.037574 -0.0078,0.537128 -0.446283,1.017531 -0.919521,1.007683 l -5.245273,0 c -0.01507,0.104484 -0.03389,0.204081 -0.05316,0.301591 l 2.630175,0 c 0.454137,-0.0096 0.872112,0.461754 0.866386,0.977186 C 13.619526,14.554106 13.206293,15.009498 12.75924,15 L 3.7753054,15 C 3.6045812,15 3.433552,14.94423 3.2916363,14.837136 c -0.00174,0 -0.00436,0 -0.00609,0 C 1.7212035,14.367801 0.99998255,11.458641 1,11.458641 L 1,7.4588393 c 0,0 0.6623144,-1.316333 1.8390583,-2.0872584 1.1767614,-0.7711868 6.8053358,-2.40497 7.2587847,-2.8052901 0.453484,-0.40032 1.660213,1.4859942 0.04775,2.4010487 C 8.5332315,5.882394 8.507351,5.7996113 8.4370292,5.7936859 l 6.3569748,-0.00871 c 0.497046,-0.00958 0.952273,0.5097676 0.94612,1.0738232 -0.0053,0.556126 -0.456176,1.0566566 -0.94612,1.0496854 l -4.72435,0 c 0.01307,0.1149374 0.0244,0.2281319 0.03721,0.3498661 l 5.952195,0 c 0.494517,-0.00871 0.947906,0.5066305 0.940795,1.0679848 z",this.bpmnInfo={type:4,name:"ManualTask"},this.render(t)}var r=i(84),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:2});e.name="Rect",this.add(e);var i={x:5,y:5,width:15,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#d1b575"},z:2},i)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var n=this.drawText(t.get("properties.name"));n.text.name="Title",this.add(n.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="m 5,2 0,0.094 c 0.23706,0.064 0.53189,0.1645 0.8125,0.375 0.5582,0.4186 1.05109,1.228 1.15625,2.5312 l 8.03125,0 1,0 1,0 c 0,-3 -2,-3 -2,-3 l -10,0 z M 4,3 4,13 2,13 c 0,3 2,3 2,3 l 9,0 c 0,0 2,0 2,-3 L 15,6 6,6 6,5.5 C 6,4.1111 5.5595,3.529 5.1875,3.25 4.8155,2.971 4.5,3 4.5,3 L 4,3 z",this.bpmnInfo={type:7,name:"ScriptTask"},this.render(t)}var r=i(84),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:2});e.name="Rect",this.add(e);var i={x:5,y:5,width:15,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#72a7d0"},z:2},i)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var n=this.drawText(t.get("properties.name"));n.text.name="Title",this.add(n.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.rectSize={width:100,height:60},this.iconPath="M49.013,51.003c1.847,1.303,7.414,5.174,16.702,11.61S82.118,74.005,87.061,77.48c0.543,0.381,1.697,1.209,3.462,2.485c1.765,1.277,3.232,2.31,4.399,3.097c1.168,0.787,2.58,1.67,4.237,2.647c1.657,0.977,3.219,1.711,4.685,2.198c1.467,0.49,2.825,0.733,4.074,0.733H108h0.082c1.249,0,2.607-0.243,4.074-0.733c1.466-0.487,3.029-1.222,4.685-2.198c1.656-0.978,3.068-1.86,4.236-2.647s2.634-1.82,4.399-3.097s2.92-2.104,3.463-2.485c4.996-3.476,17.707-12.302,38.129-26.479c3.965-2.769,7.277-6.11,9.939-10.021C179.67,37.071,181,32.97,181,28.679c0-3.585-1.291-6.654-3.871-9.207c-2.58-2.553-5.636-3.829-9.165-3.829H48.035c-4.182,0-7.4,1.412-9.654,4.236C36.127,22.704,35,26.235,35,30.471c0,3.422,1.494,7.13,4.481,11.122S45.646,48.722,49.013,51.003z M172.852,59.72c-17.814,12.057-31.34,21.427-40.572,28.108c-3.096,2.281-5.608,4.061-7.537,5.336c-1.928,1.277-4.494,2.58-7.699,3.911c-3.204,1.331-6.191,1.996-8.961,1.996H108h-0.082c-2.77,0-5.758-0.665-8.962-1.996s-5.771-2.634-7.699-3.911c-1.928-1.275-4.44-3.055-7.536-5.336c-7.333-5.377-20.83-14.747-40.492-28.108c-3.096-2.063-5.839-4.427-8.229-7.088v64.688c0,3.586,1.276,6.654,3.829,9.207c2.553,2.554,5.622,3.83,9.207,3.83h119.929c3.584,0,6.653-1.276,9.206-3.83c2.554-2.554,3.829-5.621,3.829-9.207V52.632C178.664,55.238,175.949,57.602,172.852,59.72z",this.bpmnInfo={type:8,name:"MailTask"},this.render(t)}var r=i(84),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:2});e.name="Rect",this.add(e);var i={x:5,y:5,width:20,height:15};this.add(s.makePath(this.iconPath,{style:{fill:"#72a7d0"},z:2},i)),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var n=this.drawText(t.get("properties.name"));n.text.name="Title",this.add(n.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M 10 0 C 4.4771525 0 0 4.4771525 0 10 C 0 15.522847 4.4771525 20 10 20 C 15.522847 20 20 15.522847 20 10 C 20 4.4771525 15.522847 1.1842379e-15 10 0 z M 9.09375 1.03125 C 9.2292164 1.0174926 9.362825 1.0389311 9.5 1.03125 L 9.5 3.5 L 10.5 3.5 L 10.5 1.03125 C 15.063526 1.2867831 18.713217 4.9364738 18.96875 9.5 L 16.5 9.5 L 16.5 10.5 L 18.96875 10.5 C 18.713217 15.063526 15.063526 18.713217 10.5 18.96875 L 10.5 16.5 L 9.5 16.5 L 9.5 18.96875 C 4.9364738 18.713217 1.2867831 15.063526 1.03125 10.5 L 3.5 10.5 L 3.5 9.5 L 1.03125 9.5 C 1.279102 5.0736488 4.7225326 1.4751713 9.09375 1.03125 z M 9.5 5 L 9.5 8.0625 C 8.6373007 8.2844627 8 9.0680195 8 10 C 8 11.104569 8.8954305 12 10 12 C 10.931981 12 11.715537 11.362699 11.9375 10.5 L 14 10.5 L 14 9.5 L 11.9375 9.5 C 11.756642 8.7970599 11.20294 8.2433585 10.5 8.0625 L 10.5 5 L 9.5 5 z",this.itemSize=10,this.bpmnInfo={type:43,name:"CatchTimerEvent"},this.render(t)}var r=i(81),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"},z:2});e.name="Circle",this.add(e);var i=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"},z:2});this.add(i);var n=this.itemSize+6,r={x:-n/2,y:-n/2,width:n,height:n};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858"},z:2},r,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M7.7124971 20.247342  L22.333334 20.247342  L15.022915000000001 7.575951200000001  L7.7124971 20.247342  z",this.itemSize=10,this.bpmnInfo={type:72,name:"CatchSignalEvent"},this.render(t)}var r=i(81),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"},z:2});e.name="Circle",this.add(e);var i=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"},z:2});this.add(i);var n=this.itemSize+6,r={x:-n/2,y:-n/2-3,width:n,height:n};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858",fill:"#ffffff"},z:2},r,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M7.7124971 20.247342  L22.333334 20.247342  L15.022915000000001 7.575951200000001  L7.7124971 20.247342  z",this.itemSize=10,this.bpmnInfo={type:75,name:"ThrowSignalEvent"},this.render(t)}var r=i(81),o=i(4),s=i(3);n.prototype.render=function(t){var e=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-.5},style:{fill:"#ffffff",stroke:"#585858"},z:2});e.name="Circle",this.add(e);var i=new s.Circle({shape:{cx:0,cy:0,r:this.itemSize-3},style:{fill:"#ffffff",stroke:"#585858"},z:2});this.add(i);var n=this.itemSize+6,r={x:-n/2,y:-n/2-3,width:n,height:n};this.add(s.makePath(this.startIcon,{style:{stroke:"#585858",fill:"#000000"},z:2},r,"center")),this.position=[t.get("bounds.upperLeft.x")+this.itemSize,t.get("bounds.upperLeft.y")+this.itemSize]},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M19.851221564 27.782256064000002  C24.231410964 27.782256064000002 27.782256064000002 24.231410964 27.782256064000002 19.851221564  C27.782256064000002 15.471032163999999 24.231410964 11.920187063999999 19.851221564 11.920187063999999  C15.471032163999999 11.920187063999999 11.920187063999999 15.471032163999999 11.920187063999999 19.851221564  C11.920187063999999 24.231410964 15.471032163999999 27.782256064000002 19.851221564 27.782256064000002  z",this.itemSize=20,this.bpmnInfo={type:20,name:"InclusiveGateway"},this.render(t)}var r=i(92),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"},z:2},i,"center");n.name="Path",this.add(n);var r=this.itemSize,o={x:-r/2,y:-r/2,width:r,height:r};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"},z:2},o,"center")),this.position=[t.get("bounds.upperLeft.x")+r,t.get("bounds.upperLeft.y")+r];var a=this.drawText(t.get("properties.name"));a.text.name="Title",this.add(a.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"GatewayNode"},this.model=t}var r=i(75),o=i(4),s=i(25);n.prototype.render=function(){},
n.prototype.getRect=function(){var t=this.getBoundingRect(),e=[];e[0]=[-t.width/2,-t.height/2],e[1]=[t.width/2,-t.height/2],e[2]=[t.width/2,t.height/2],e[3]=[-t.width/2,t.height/2],e[4]=[-t.width/2,-t.height/2];var i=new s(this.position[0]-t.width/2,this.position[1]-t.height/2,t.width,t.height);return{x:this.position[0],y:this.position[1],width:t.width/2,height:t.height/2,points:e,boundingRect:i}},n.prototype.setPosition=function(t,e){this.attr("position",[t,e])},n.prototype.getBoundingRect=function(){var t=this.childOfName("Path");return t.getBoundingRect()},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M19.904129064000003 17.676993964000005  L24.997457864000005 12.583664864000003  L26.058118064000006 11.523004664000002  L28.179438464 13.644324964000003  L27.118778264 14.704985164000002  L22.025449364000004 19.798314364  L27.118778264 24.891643464000005  L28.179438464 25.952303664000006  L26.058118064000006 28.073623964000003  L24.997457864000005 27.012963764000006  L19.904129064000003 21.919634764  L14.810800164000003 27.012963764000006  L13.750140064000002 28.073623964000003  L11.628819664000003 25.952303664000006  L12.689479764000003 24.891643464000005  L17.782808764000002 19.798314364  L12.689479764000003 14.704985164000002  L11.628819664000003 13.644324964000003  L13.750140064000002 11.523004664000002  L14.810800164000003 12.583664864000003  L19.904129064000003 17.676993964000005  z",this.itemSize=20,this.bpmnInfo={type:17,name:"ExclusiveGateway"},this.render(t)}var r=i(92),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"},z:2},i,"center");n.name="Path",this.add(n);var r=this.itemSize,o={x:-r/2,y:-r/2,width:r,height:r};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"},z:2},o,"center")),this.position=[t.get("bounds.upperLeft.x")+r,t.get("bounds.upperLeft.y")+r];var a=this.drawText(t.get("properties.name"));a.text.name="Title",this.add(a.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.startIcon="M0 19.506393964  L19.506393964 0  L39.012787964 19.506393964  L19.506393964 39.012787964  L0 19.506393964  L0 19.506393964  z",this.nextIcon="M8.275862069 11.965517269000001  L1.499999999 11.965517269000001  L0 11.965517269000001  L0 8.965517239  L1.499999999 8.965517239  L8.275862069 8.965517239  L8.275862069 1.499999999  L8.275862069 0  L11.275862069 0  L11.275862069 1.499999999  L11.275862069 8.965517239  L18.741379269 8.965517239  L20.241379269 8.965517239  L20.241379269 11.965517269000001  L18.741379269 11.965517269000001  L11.275862069 11.965517269000001  L11.275862069 18.741379269  L11.275862069 20.241379269  L8.275862069 20.241379269  L8.275862069 18.741379269  L8.275862069 11.965517269000001  z",this.itemSize=20,this.bpmnInfo={type:20,name:"ParallelGateway"},this.render(t)}var r=i(92),o=i(4),s=i(3);n.prototype.render=function(t){var e=2*this.itemSize,i={x:-e/2,y:-e/2,width:e,height:e},n=s.makePath(this.startIcon,{style:{fill:"#F6A623"},z:2},i,"center");n.name="Path",this.add(n);var r=this.itemSize,o={x:-r/2,y:-r/2,width:r,height:r};this.add(s.makePath(this.nextIcon,{style:{fill:"#FFFFFF"},z:2},o,"center")),this.position=[t.get("bounds.upperLeft.x")+r,t.get("bounds.upperLeft.y")+r];var a=this.drawText(t.get("properties.name"));a.text.name="Title",this.add(a.text)},o.inherits(n,r),t.exports=n},function(t,e,i){function n(t,e){r.call(this,t,e),this.bpmnInfo={type:-1,name:"SubProcess"},this.model=t,this.slot=[],this.slotEvent=[],this.isCanSlot=!0;var i,n;i=t.get("bounds.lowerRight.x")-t.get("bounds.upperLeft.x"),n=t.get("bounds.lowerRight.y")-t.get("bounds.upperLeft.y"),(!i||i<=0)&&(i=160),(!n||n<=0)&&(n=100),this.rectSize={width:i,height:n},this.render(t)}var r=i(75),o=i(4),s=i(25),a=i(3),h=i(96);n.prototype.initEvent=function(t){var e=this,i=["dblclick","click"];o.each(i,function(i){e.on(i,function(n){var r={};r.event=n;var o=n.target;o.parent&&o.parent instanceof h||(r.type=i,r.target=e,t.trigger(i,r))},this)})},n.prototype.render=function(t){var e=new a.Rect({shape:{x:.5,y:.5,width:this.rectSize.width-1,height:this.rectSize.height-1,r:7},style:{fill:"#f9f9f9",stroke:"#bbbbbb"},z:0});e.name="Rect",this.add(e),this.position=[t.get("bounds.upperLeft.x"),t.get("bounds.upperLeft.y")];var i=this.drawText(t.get("properties.name"));i.text.name="Title",this.add(i.text)},n.prototype.getRect=function(){var t=this.getBoundingRect(),e=[];e[0]=[-t.width/2,-t.height/2],e[1]=[t.width/2,-t.height/2],e[2]=[t.width/2,t.height/2],e[3]=[-t.width/2,t.height/2],e[4]=[-t.width/2,-t.height/2];var i=new s(this.position[0],this.position[1],t.width,t.height);return{x:this.position[0]+t.width/2,y:this.position[1]+t.height/2,width:t.width,height:t.height,points:e,boundingRect:i}},n.prototype.setPosition=function(t,e){var i=this.getBoundingRect();this.attr("position",[t-i.width/2,e-i.height/2])},n.prototype.refresh=function(t){var e=this.childOfName("Rect");e.setShape(t.shape),this.attr("position",t.position),this.refreshText()},n.prototype.getBoundingRect=function(){var t=this.childOfName("Rect");return t.getBoundingRect()},n.prototype.setModel=function(t){var e=this,i=this.model.get("properties.name");if(this.model.mergeOption(t),i!=t.properties.name){var n,r=this.childOfName("Title"),o=t.properties.name.length;o>64?(n=t.properties.name.substr(0,64)+"..",this.alarm.isShow=!0):(n=t.properties.name,this.alarm.isShow=!1),r.attr("style",{text:n}),e.refreshText(e);var s=t.properties.name,a=this.alarm.childOfName("Text");a.attr("style",{text:s});var h=a.getBoundingRect().width+4,l=a.getBoundingRect().height+8,c=[[0,0],[h,0],[h,l],[h-3,l],[h-6,l+3],[h-9,l],[0,l],[0,0]],u=this.alarm.childOfName("Polyline");u.attr("shape",{points:c});var d=[this.position[0]+this.getBoundingRect().width-(this.alarm.getBoundingRect().width-6),this.position[1]-this.alarm.getBoundingRect().height-3];this.alarm.attr("position",d)}},n.prototype.toJSON=function(){if(this.model.set("resourceId",this.resourceId),this.model.set("properties.type",this.bpmnInfo.type),this.model.set("stencil.type",this.bpmnInfo.name),this.slotEvent&&this.slotEvent.length>0){for(var t=[],e=this.slotEvent.length-1;e>=0;e--)t.push(this.slotEvent[e].resourceId);this.model.set("properties.slotEvent",t)}var i=this.getRect().boundingRect;this.model.set("bounds.upperLeft.x",i.x),this.model.set("bounds.upperLeft.y",i.y),this.model.set("bounds.lowerRight.x",i.x+i.width),this.model.set("bounds.lowerRight.y",i.y+i.height);var n=[];return this.eachChild(function(t){t instanceof r&&n.push(t.toJSON()),t instanceof h&&n.push(t.toJSON())}),this.model.set("childShapes",n),this.model.option},o.inherits(n,r),t.exports=n},function(t,e,n){function r(t){h.call(this),t.model&&t.model.option&&t.model.option.resourceId?this.resourceId=t.model.option.resourceId:this.resourceId=o.getUUID();var e={symbol:{type:"arrow",size:10,color:"#000000"},style:{lineWidth:1,stroke:"#000000",lineType:r.TYPE_STRAIGHT},hoverStyle:{lineWidth:2,stroke:"lime"},arrowHoverStyle:{fill:"lime"},shape:{points:null,smooth:!1,smoothConstraint:null},position:[0,0],isEdit:!0,text:{text:"",color:"#000000",textFont:"12px Microsoft YaHei"},z:0},i=t||{};this.options=s.merge(e,i,!0),this.model=t.model,this.handles=[],this.connectionPoints=[],this.conPointsGroup=null,this.startNode=null,this.endNode=null,this.autoChangePosition=!1,this.line=null,this.groupCurve=new a.Group,this.icons=[],this.render()}var o=n(73),s=n(4),a=n(3),h=n(76),l=n(97),c=n(98),u=n(99),d=n(100),p=n(60);r.TYPE_STRAIGHT="straight",r.TYPE_JAGGED="jagged",r.TYPE_CURVE="curve",r.RADIUS=3,r.START_NODE="startNode",r.END_NODE="endNode",r.LEFT="left",r.RIGHT="right",r.TOP="top",r.BOTTOM="bottom",r.BOTTOM="bottom",r.SEPERATOR="-",r.prototype.refresh=function(t){t&&(this.turningPoints=t);var t=o.traslatePoints(this.turningPoints);this.options.style.lineType==r.TYPE_CURVE&&t.length>2?this.modifyCurve(this.turningPoints):this.line.attr("shape",{points:t});var e=this.childOfName("lineText");if(!e&&this.options.text.text){var i=this.drawText("lineText",this.options.text.text,0,0);this.add(i.text),e=this.childOfName("lineText")}if(e){e.setStyle("text",this.options.text.text);var n=this.getTextPostion(this.options.text);e.attr("position",n)}var s=this.childOfName("toSymbol");s&&(this.options.effect&&this.options.effect.show?new u(s,this.options,this.groupCurve,this.polyLine):(s.attr("position",t[t.length-1]),s.attr("rotation",o.tangentRotation(this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1]))))},r.prototype.render=function(){var t=this,e=this.createSymbol("toSymbol",this.options);e&&this.add(e),this.curveLine=new a.BezierCurve({position:this.options.position,style:this.options.style,z:this.options.z}),this.groupCurve.add(this.curveLine),this.add(this.groupCurve),this.polyLine=new a.Polyline({position:this.options.position,shape:this.options.shape,style:this.options.style,z:this.options.z}),this.add(this.polyLine),this.options.style.lineType==r.TYPE_CURVE?(this.line=this.groupCurve,this.createHoverStyle(this.curveLine),this.polyLine.hide()):(this.line=this.polyLine,this.createHoverStyle(this.polyLine),this.curveLine.hide());var i=["dblclick","click"];if(s.each(i,function(e){this.line.on(e,s.bind(function(i){i.cancelBubble=!0;var n={};n.event=i,n.type="Connector:"+e,n.target=t,this.trigger(n.type,n),0!=this.options.isEdit&&(this.options.isEdit&&this.connectionPoints.length<1&&this.turningPoints.length>=2&&this.createAllconnectionPoint(),this.handles.length<1&&this.shapeSetHandle())},this))},this),this.options.isEdit&&(this.conPointsGroup=new a.Group,this.add(this.conPointsGroup)),this.options.text.text&&""!=this.options.text.text){var n=this.drawText("lineText",this.options.text.text,0,0);this.add(n.text)}},r.prototype.setStyle=function(t){if(t.color){this.options.style.lineType==r.TYPE_CURVE?this.groupCurve.eachChild(function(e){e.attr("style",{stroke:t.color}),a.setNormalStyle(e,{stroke:t.color})}):(this.polyLine.attr("style",{stroke:t.color}),a.setNormalStyle(this.polyLine,{stroke:t.color}));var e=this.childOfName("toSymbol");e&&(e.attr("style",{fill:t.color}),a.setNormalStyle(e,{fill:t.color})),this.options.style.stroke=t.color,this.model.set("options.style.stroke",t.color),this.model.set("options.symbol.color",t.color),this.options.symbol.color=t.color}if(t.text){var i=this.childOfName("lineText");if(!i&&t.text.text){var n=this.drawText("lineText",t.text.text,0,0);this.add(n.text),i=this.childOfName("lineText")}(t.text.text||""==t.text.text)&&(i.setStyle("text",t.text.text),this.options.text.text=t.text.text);var o=this.getTextPostion(t.text);i.attr("position",o),t.text.textPos?this.options.text.textPos=t.text.textPos:this.options.text.textPos="center",t.text.color&&(i.attr("style",{fill:t.text.color}),this.options.text.color=t.text.color),this.model.set("options.text",t.text)}if(t.symbol){t.symbol.type&&(this.options.symbol.type=t.symbol.type,this.model.set("options.symbol.type",t.symbol.type)),t.symbol.size&&(this.options.symbol.size=t.symbol.size,this.model.set("options.symbol.size",t.symbol.size)),t.symbol.color&&(this.options.symbol.color=t.symbol.color,this.model.set("options.symbol.color",t.symbol.color)),t.symbol.z&&(this.options.symbol.z=t.symbol.z,this.model.set("options.symbol.z",t.symbol.z));var e=this.childOfName("toSymbol");e&&this.remove(e);var s=this.createSymbol("toSymbol",this.model.get("options"));s&&this.add(s),this.refresh()}},r.prototype.getTextPostion=function(t){var e=[],i=a.textContain.getWidth(t.text,t.textFont);if(t&&t.textPos)if("start"==t.textPos){var n=t.xOffset||0;e=[this.turningPoints[0].x+n,this.turningPoints[0].y]}else if("end"==t.textPos){var r=o.getMaxLineLength([this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1]]),s=o.getAngle(r[0],r[1]),h=o.distance(r[0],r[1])-i,l=o.getEndPoint(r[0],h,s);e=[l.x,l.y]}else e=this.middle(t);else{var c=this.middle(t);e=[c[0]-i/2,c[1]]}return e},r.prototype.getTextRotation=function(t){var e=o.getMaxLineLength(this.turningPoints),i=-Math.atan2(e[1].y-t[1],e[1].x-t[0]);return i},r.prototype.createHoverStyle=function(t){if(this.options.hoverStyle){a.setElementHoverStl(t,this.options.hoverStyle);var e=this.childOfName("toSymbol");e&&a.setElementHoverStl(e,this.options.arrowHoverStyle),t.on("mouseover",s.bind(function(){a.doEnterHover(t),e&&a.doEnterHover(e),this.groupCurve.eachChild(function(t){a.doEnterHover(t)})},this)).on("mouseout",s.bind(function(){a.doLeaveHover(t),e&&a.doLeaveHover(e),this.groupCurve.eachChild(function(t){a.doLeaveHover(t)})},this))}},r.prototype.createAllconnectionPoint=function(){var t=this.startNode.getRect?this.startNode.getRect().boundingRect:o.getRect(this.startNode).boundingRect,e=this.endNode.getRect?this.endNode.getRect().boundingRect:o.getRect(this.endNode).boundingRect,i=o.getConnectorPoints(t),n=o.getConnectorPoints(e);this.connectionPointCreate(this.startNode,i.left,r.START_NODE+r.SEPERATOR+r.LEFT),this.connectionPointCreate(this.startNode,i.right,r.START_NODE+r.SEPERATOR+r.RIGHT),this.connectionPointCreate(this.startNode,i.top,r.START_NODE+r.SEPERATOR+r.TOP),this.connectionPointCreate(this.startNode,i.bottom,r.START_NODE+r.SEPERATOR+r.BOTTOM),this.connectionPointCreate(this.endNode,n.left,r.END_NODE+r.SEPERATOR+r.LEFT),this.connectionPointCreate(this.endNode,n.right,r.END_NODE+r.SEPERATOR+r.RIGHT),this.connectionPointCreate(this.endNode,n.top,r.END_NODE+r.SEPERATOR+r.TOP),this.connectionPointCreate(this.endNode,n.bottom,r.END_NODE+r.SEPERATOR+r.BOTTOM),this.connectionPointCreate(this,this.turningPoints[0].clone(),d.TYPE_CONNECTOR),this.connectionPointCreate(this,this.turningPoints[this.turningPoints.length-1].clone(),d.TYPE_CONNECTOR)},r.prototype.connectionPointCreate=function(t,e,i){var n=new d(this,e,i,this.options);this.conPointsGroup.add(n.shape)},r.prototype.clearHandles=function(){for(var t=0;t<this.handles.length;t++)this.remove(this.handles[t].handleShape);this.handles=[],this.conPointsGroup&&this.conPointsGroup.removeAll()},r.prototype.shapeSetHandle=function(){for(var t=1;t<this.turningPoints.length-2;t++){var e,i,n,r=o.collinearity(this.turningPoints[t-1],this.turningPoints[t],this.turningPoints[t+1]),s=o.collinearity(this.turningPoints[t],this.turningPoints[t+1],this.turningPoints[t+2]);(r||s&&!this.turningPoints[t+1].equals(this.turningPoints[t+2]))&&(r&&!this.turningPoints[t-1].equals(this.turningPoints[t])||s)||(this.turningPoints[t].x===this.turningPoints[t+1].x?(i=this.turningPoints[t].x,n=(this.turningPoints[t].y+this.turningPoints[t+1].y)/2,e=new c("h",i,n,this)):this.turningPoints[t].y===this.turningPoints[t+1].y&&(i=(this.turningPoints[t].x+this.turningPoints[t+1].x)/2,n=this.turningPoints[t].y,e=new c("v",i,n,this)),e&&(this.add(e.handleShape),this.handles.push(e)))}},r.prototype.createSymbol=function(t,e){var i=e.symbol.type,n=e.symbol.size;if("none"!==i){s.isArray(n)||(n=[n,n]);var r=e.z;e.symbol.z&&(r=e.symbol.z);var o=l.createSymbol(i,-n[0]/2,-n[1]/2,n[0],n[1],e.symbol.color,r);return o.name=t,o}},r.prototype.drawText=function(t,e,i,n,r){var o=new a.Text({style:{text:e,x:i,y:n,fill:r?r:this.options.text.color,textFont:this.options.text.textFont},zlevel:20});return o.name=t,{text:o,rect:o.getBoundingRect()}},r.prototype.middle=function(t){if(this.options.style.lineType==r.TYPE_STRAIGHT){var e=o.getMaxLineLength(this.turningPoints),i=(e[0].x+e[1].x)/2,n=(e[0].y+e[1].y)/2;return[i,n]}if(this.options.style.lineType==r.TYPE_JAGGED){for(var s=this.getLength(),a=-1,h=0,l=0;l<this.turningPoints.length-1;l++){a=l;var c=o.getLength(this.turningPoints[l],this.turningPoints[l+1]);if(!(h+c<s/2))break;h+=c}if(a!=-1){var u=s/2-h;if(o.round(this.turningPoints[a].x,3)==o.round(this.turningPoints[a+1].x,3))return[this.turningPoints[a].x,Math.min(this.turningPoints[a].y,this.turningPoints[a+1].y)+u];if(o.round(this.turningPoints[a].y,3)==o.round(this.turningPoints[a+1].y,3))return[Math.min(this.turningPoints[a].x,this.turningPoints[a+1].x)+u,this.turningPoints[a].y];console.error("Connector:middle() - this should never happen "+this.turningPoints[a]+" "+this.turningPoints[a+1]+" nr of points "+this.turningPoints.length)}}else if(this.options.style.lineType==r.TYPE_CURVE){for(var d=.5,p=this.getLength(),f=0,g=0;g<this.turningPoints.length-1&&!(f+o.distance(this.turningPoints[g],this.turningPoints[g+1])>p*d);g++)f+=o.distance(this.turningPoints[g],this.turningPoints[g+1]);var v=p*d-f,y=o.distance(this.turningPoints[g],this.turningPoints[g+1]),m=v/y,x=m*(this.turningPoints[g+1].x-this.turningPoints[g].x)+this.turningPoints[g].x,_=m*(this.turningPoints[g+1].y-this.turningPoints[g].y)+this.turningPoints[g].y;return[x,_]}return null},r.prototype.getLength=function(){for(var t=0,e=0;e<this.turningPoints.length-1;e++)t+=o.getLength(this.turningPoints[e],this.turningPoints[e+1]);return t},r.prototype.toJSON=function(){return this.model.set("resourceId",this.resourceId),this.model.set("properties.type",14),this.model.set("bounds.upperLeft.x",this.position[0]),this.model.set("bounds.upperLeft.y",this.position[1]),this.model.set("bounds.lowerRight.x",parseInt(this.position[0]+this.getBoundingRect().width)),this.model.set("bounds.lowerRight.y",parseInt(this.position[1]+this.getBoundingRect().height)),this.model.set("style.sPos",this.sPos),this.model.set("style.ePos",this.ePos),this.model.set("dockers",this.turningPoints),this.model.option},r.prototype.refreshModel=function(){this.model.set("options.dockers",this.turningPoints);for(var t=[],e=0;e<this.icons.length;e++){var i=this.icons[e],n=[i.key,{icon:i.style.image,width:i.style.width,height:i.style.height}];t.push(n)}this.model.set("icons",t)},r.prototype.modifyCurve=function(t){for(var e=this.getCurvePoint(t),i=[],n=e.length,r=this.groupCurve.childCount();n<r;n++)i.push(this.groupCurve.childAt(n));s.each(i,function(t){this.groupCurve.remove(t)},this);for(var o=0;o<e.length;o++){var h=this.groupCurve.childAt(o);if(h)h.attr("shape",e[o]);else{var l=new a.BezierCurve({position:this.options.position,style:this.options.style,shape:e[o],z:this.options.z});this.groupCurve.add(l),this.createHoverStyle(l)}}},r.prototype.getCurvePoint=function(t){function e(t,e){return new p(t.x+e.x,t.y+e.y)}function n(t,e){if(0==e)throw"Division by zero not allowed (yet :) "+this.callee;return new p(t.x/e,t.y/e)}function r(t,e){return new p(t.x*e,t.y*e)}var o=t.length,s=[];if(3===o)return s.push({x1:t[0].x,y1:t[0].y,cpx1:t[1].x,cpy1:t[1].y,x2:t[2].x,y2:t[2].y}),s;if(4===o)return s.push({x1:t[0].x,y1:t[0].y,cpx1:t[1].x,cpy1:t[1].y,cpx2:t[2].x,cpy2:t[2].y,x2:t[3].x,y2:t[3].y}),s;var a,h=[0,0,0];for(a=0;a<=o-3;a++)h.push(a);for(h.push(o-3,o-3),i=1;i<=o-3;i++){var l=n(e(r(t[i],h[i+4]-h[i+2]),r(t[i+1],h[i+2]-h[i+1])),h[i+4]-h[i+1]),c=(h[i+3]-h[i+2])/(h[i+3]-h[i+1]),u=n(e(r(t[i-1],h[i+3]-h[i+2]),r(t[i],h[i+2]-h[i])),h[i+3]-h[i]),d=r(l,(h[i+2]-h[i+1])/(h[i+3]-h[i+1])),f=e(r(u,c),d),g=n(e(r(t[i],h[i+4]-h[i+3]),r(t[i+1],h[i+3]-h[i+1])),h[i+4]-h[i+1]),v=(h[i+3]-h[i+2])/(h[i+4]-h[i+2]),y=n(e(r(t[i+1],h[i+5]-h[i+3]),r(t[i+2],h[i+3]-h[i+2])),h[i+5]-h[i+2]),m=r(g,(h[i+4]-h[i+3])/(h[i+4]-h[i+2])),x=e(r(y,v),m);s.push({x1:f.x,y1:f.y,cpx1:l.x,cpy1:l.y,cpx2:g.x,cpy2:g.y,x2:x.x,y2:x.y})}return s},o.inherits(r,h),t.exports=r},function(t,e,i){"use strict";var n=i(3),r=i(25),o=n.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),s=n.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),a=n.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),s=r/2,a=s*s/(o-s),h=n-o+s+a,l=Math.asin(a/s),c=Math.cos(l)*s,u=Math.sin(l),d=Math.cos(l);t.arc(i,h,s,Math.PI-l,2*Math.PI+l);var p=.6*s,f=.7*s;t.bezierCurveTo(i+c-u*p,h+a+d*p,i,n-f,i,n),t.bezierCurveTo(i,n-f,i-c+u*p,h+a+d*p,i-c,h+a),t.closePath()}}),h=n.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,s=n/3*2;t.moveTo(r,o),t.lineTo(r+s,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-s,o+i),t.lineTo(r,o),t.closePath()}}),l={line:n.Line,rect:n.Rect,roundRect:n.Rect,square:n.Rect,circle:n.Circle,diamond:s,pin:a,arrow:h,triangle:o},c={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},u={};for(var d in l)u[d]=new l[d];var p=n.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style,e=this.shape;"pin"===e.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e){var i=e.symbolType,n=u[i];"none"!==e.symbolType&&(n||(i="rect",n=u[i]),c[i](e.x,e.y,e.width,e.height,n.shape),n.buildPath(t,n.shape))}}),f=function(t){if("image"!==this.type){var e=this.style,i=this.shape;i&&"line"===i.symbolType?e.stroke=t:this.__isEmptyBrush?(e.stroke=t,e.fill="#fff"):(e.fill&&(e.fill=t),e.stroke&&(e.stroke=t)),this.dirty()}},g={createSymbol:function(t,e,i,o,s,a,h){var l=0===t.indexOf("empty");l&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var c;return c=0===t.indexOf("image://")?new n.Image({style:{image:t.slice(8),x:e,y:i,width:o,height:s},z:h}):0===t.indexOf("path://")?n.makePath(t.slice(7),{z:h},new r(e,i,o,s)):new p({shape:{symbolType:t,x:e,y:i,width:o,height:s},z:h}),c.__isEmptyBrush=l,c.setColor=f,c.setColor(a),c}};t.exports=g},function(t,e,i){function n(t,e,i,o){this.type=t,this.x=e,this.y=i,this.visible=!0,this.connector=o,this.handleShape=new r.Circle({shape:{cx:e,cy:i,r:n.RADIUS},style:{fill:"rgb(0,255,0)",stroke:"rgb(0,0,0)"},z:o.options.z+2,draggable:!0});var s=this;this.handleShape.on("drag",function(t){s.actionConnector(t.offsetX,t.offsetY)})}var r=i(3),o=i(73);n.RADIUS=4,n.prototype={constructor:n,equals:function(t){return!(!t instanceof n)&&(this.type==t.type&&this.x==t.x&&this.y==t.y&&this.visible==t.visible)},actionConnector:function(t,e){switch(this.type){case"v":for(var i,n=1;n<this.connector.turningPoints.length-1;n++)this.connector.turningPoints[n-1].y==this.connector.turningPoints[n].y&&this.connector.turningPoints[n].y==this.y&&Math.min(this.connector.turningPoints[n].x,this.connector.turningPoints[n-1].x)<=this.x&&Math.max(this.connector.turningPoints[n].x,this.connector.turningPoints[n-1].x)>=this.x&&(i=n);var r=e-this.y,s=o.translationMatrix(0,r);this.connector.turningPoints[i-1].transform(s),this.connector.turningPoints[i].transform(s),this.connector.refresh(),this.y=e;break;case"h":for(var i,n=1;n<this.connector.turningPoints.length-1;n++)this.connector.turningPoints[n-1].x==this.connector.turningPoints[n].x&&this.connector.turningPoints[n].x==this.x&&Math.min(this.connector.turningPoints[n].y,this.connector.turningPoints[n-1].y)<=this.y&&Math.max(this.connector.turningPoints[n].y,this.connector.turningPoints[n-1].y)>=this.y&&(i=n);var a=t-this.x,s=o.translationMatrix(a,0);this.connector.turningPoints[i-1].transform(s),this.connector.turningPoints[i].transform(s),this.connector.refresh(),this.x=t}}},t.exports=n},function(t,e,i){function n(t,e,i,n){this._lastFrame=0,this._lastFramePercent=0,this.symbol=t,this.groupCurve=i,this.initSymbol(e,n)}var r=(i(4),i(14)),o=i(27),s=(i(97),n.prototype);s.initSymbol=function(t,e){var i=this;this.symbol.z2=100,this.symbol.culling=!0;var n=1e3*t.effect.period;if(this.symbol.__t=0,this.symbol.stopAnimation(),"curve"==t.style.lineType){if(this.groupCurve){var r=0;n/=this.groupCurve._children.length,this.groupCurveAnimate(this.groupCurve._children[0],r,n)}}else this.symbol.animate("",!0).when(n,{__t:1}).delay(0).during(function(){i.updateSymbolPositionPolyline()}).start(),this.setAnimationPointsPolyline(e.shape.points)},s.groupCurveAnimate=function(t,e,i){var n=this;void 0==t&&(t=this.groupCurve._children[0],e=0);var r,o=t.shape;r=[[o.x1,o.y1],[o.x2,o.y2],[o.cpx1,o.cpy1],[o.cpx2,o.cpy2]],this.setAnimationPointsBezierCurve(r),this.symbol.animate("").when(i,{__t:1}).delay(0).during(function(){n.updateSymbolPositionBezierCurve()}).done(function(){n.symbol.__t=0,n.groupCurveAnimate(n.groupCurve._children[e+1],e+1,i)}).start()},s.setAnimationPointsBezierCurve=function(t){this.symbol.__p1=t[0],this.symbol.__p2=t[1],this.symbol.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],this.symbol.__cp2=t[3]},s.updateSymbolPositionBezierCurve=function(){var t,e,i=this.symbol.__p1,n=this.symbol.__p2,r=this.symbol.__cp1,s=this.symbol.__cp2,a=this.symbol.__t,h=this.symbol.position;if(void 0!=s[0]){var l=o.cubicAt,c=o.cubicDerivativeAt;h[0]=l(i[0],r[0],s[0],n[0],a),h[1]=l(i[1],r[1],s[1],n[1],a),t=c(i[0],r[0],s[0],n[0],a),e=c(i[1],r[1],s[1],n[1],a)}else{var u=o.quadraticAt,d=o.quadraticDerivativeAt;h[0]=u(i[0],r[0],n[0],a),h[1]=u(i[1],r[1],n[1],a),t=d(i[0],r[0],n[0],a),e=d(i[1],r[1],n[1],a)}this.symbol.rotation=-Math.atan2(e,t)-Math.PI/2,this.symbol.ignore=!1},s.setAnimationPointsPolyline=function(t){this._points=t;for(var e=[0],i=0,n=1;n<t.length;n++){var o=t[n-1],s=t[n];i+=r.dist(o,s),e.push(i)}if(0!==i){for(var a=0;a<e.length;a++)e[a]/=i;this._offsets=e,this._length=i,this.symbol._lastFrame=0,this.symbol.__lastFramePercent=0}},s.updateSymbolPositionPolyline=function(){var t=this.symbol.__t,e=this._points,i=this._offsets,n=e.length;if(i){var o,s=this._lastFrame;if(t<this._lastFramePercent){var a=Math.min(s+1,n-1);for(o=a;o>=0&&!(i[o]<=t);o--);o=Math.min(o,n-2)}else{for(var o=s;o<n&&!(i[o]>t);o++);o=Math.min(o-1,n-2)}r.lerp(this.symbol.position,e[o],e[o+1],(t-i[o])/(i[o+1]-i[o])),this._lastFrame=o,this._lastFramePercent=t;var h=-Math.atan2(e[o+1][1]-e[o][1],e[o+1][0]-e[o][0]);this.symbol.rotation=h-Math.PI/2,this.symbol.ignore=!1}},t.exports=n},function(t,e,i){function n(t,e,i,o){this.connector=t,this.point=e.clone(),this.type=i,this.color=n.NORMAL_COLOR,this.oType="ConnectionPoint",this.shape=new r.Circle({shape:{cx:this.point.x,cy:this.point.y,r:n.RADIUS},style:{fill:this.color,stroke:"#000000"},z:o.z+2}),this.shape.type=this.type,this.shape.connector=t}var r=i(3);i(73);n.NORMAL_COLOR="#FFFF33",n.OVER_COLOR="#FF9900",n.CONNECTED_COLOR="#ff0000",n.RADIUS=4,n.TYPE_FIGURE="figure",n.TYPE_CONNECTOR="connector",n.prototype={constructor:n,equals:function(t){return this.point.equals(t.point)&&this.connector==t.connector&&this.type==t.type&&this.color==t.color&&this.radius==t.radius}},t.exports=n},function(t,e){var i={BPMN_TYPE:"stencil.type",BPMN_SCRIPT_TASK:"ScriptTask",BPMN_EVENT_SUB_PROCESS:"SubProcessTask",BPMN_TASK:"Task",TEMPLATE:"BPMNDiagram",RESOURCE_ID:"resourceId",SEQUENCE_FLOW:"SequenceFlow",SUB_PROCESS:"SubProcess",USER_DATA:"properties.userData",START_EVENT:"StartNoneEvent",END_EVENT:"EndNoneEvent",USER_TASK:"UserTask",MANUAL_TASK:"ManualTask",SCRIPT_TASK:"ScriptTask",MAIL_TASK:"MailTask",CATCH_TIMER_EVENT:"CatchTimerEvent",CATCH_SIGNAL_EVENT:"CatchSignalEvent",THROW_SIGNAL_EVENT:"ThrowSignalEvent",INCLUSIVE_GATEWAY:"InclusiveGateway",EXCLUSIVE_GATEWAY:"ExclusiveGateway",PARALLEL_GATEWAY:"ParallelGateway",isTemplate:function(t){var e=t.model.get(i.BPMN_TYPE);return e===i.TEMPLATE},isActivity:function(t){var e=t.model.get(i.BPMN_TYPE);return e.indexOf("Task")!=-1},isSubProcess:function(t){var e=t.model.get(i.BPMN_TYPE);return e==i.SUB_PROCESS},isGateway:function(t){var e=t.model.get(i.BPMN_TYPE);return e.indexOf("Gateway")!=-1},isFlow:function(t){var e=t.model.get(i.BPMN_TYPE);return e===i.SEQUENCE_FLOW},isFlowModel:function(t){var e=t.get(i.BPMN_TYPE);return e===i.SEQUENCE_FLOW},isEvent:function(t){var e=t.model.get(i.BPMN_TYPE);return e.indexOf("Event")!=-1},isSlotEvent:function(t){var e=t.model.get(i.BPMN_TYPE);return e==i.CATCH_TIMER_EVENT||e==i.CATCH_SIGNAL_EVENT||e==i.THROW_SIGNAL_EVENT},getType:function(t){var e=t.model.get(i.BPMN_TYPE);return e},getStyle:function(t){return t.model.option.style},getProp:function(t){return t.model.option.properties},getUserData:function(t){var e=t.model;return e.get(i.USER_DATA)},setUserData:function(t,e){var n=t.model;n.set(i.USER_DATA,e)}};t.exports=i},function(t,e,i){function n(t,e,i){h.call(this,t,e,i)}var r=i(4),o=i(3),s=i(73),a=i(101),h=i(103);n.prototype.renderOther=function(){if(a.isSubProcess(this.node)){var t={x:0,y:0,width:10,height:10},e="M0 100 L0 0 L100 0 L100 20 L20 20 L20 100 z";this.leftTop=o.makePath(e,{style:{fill:"#000000"}},t),this.leftTop.attr("cursor","nw-resize"),this.leftTop.isSelfComputePos=!0;var i={x:0,y:0,width:10,height:10},n="M0 100 L100 100 L100 0 L80 0 L80 80 L0 80 z";this.rightBottom=o.makePath(n,{style:{fill:"#000000"}},i),this.rightBottom.attr("cursor","se-resize"),this.rightBottom.isSelfComputePos=!0,this.add(this.rightBottom),this.add(this.leftTop)}},n.prototype.refreshPositionOther=function(t,e){function i(t){function i(t){function i(t,i){for(var n=[],r=0;r<=Math.abs(parseInt((i.event.clientX-o)/p));r++)i.event.clientX-o<=0?(v[0]=l[0]-p*r,n[0]=v[0]-10):(v[0]||(v[0]=l[0]),e.points[2][0]-v[0]>f?(v[0]=l[0]+p*r,n[0]=v[0]-10):n[0]=d.rightBottom.position[0]-f);for(var s=0;s<=Math.abs(parseInt((i.event.clientY-h)/p));s++)i.event.clientY-h<=0?(v[1]=l[1]-p*s,n[1]=v[1]-10):(v[1]||(v[1]=l[1]),e.points[2][1]-v[1]>g?(v[1]=l[1]+p*s,n[1]=v[1]-10):n[1]=d.rightBottom.position[1]-g);t.attr("position",n);var a=[];a[0]=[v[0],v[1]],a[1]=[e.points[1][0],v[1]],a[2]=e.points[2],a[3]=[v[0],e.points[3][1]],a[4]=[v[0],v[1]];var c={};c.type="OperationNode:scaleDragLeft",c.points=a,d.trigger(c.type,c)}d.rightBottom.position[0]-d.leftTop.position[0]<f+10?d.rightBottom.position[1]-d.leftTop.position[1]<g+10?(d.leftTop.position[0]=d.rightBottom.position[0]-(f+10),d.leftTop.position[1]=d.rightBottom.position[1]-(g+10)):(d.leftTop.position[0]=d.rightBottom.position[0]-(f+10),i(d.leftTop,t)):d.rightBottom.position[1]-d.leftTop.position[1]<g?(d.leftTop.position[1]=d.rightBottom.position[1]-(g+10),i(d.leftTop,t)):i(d.leftTop,t)}function n(t){d.zr.off("mousemove",r),d.zr.off("mouseup",s);var e={};e.event=t,e.arrowName="left",e.type="OperationNode:scaleDragEnd",e.startSlotPoints=c,e.startPosition=u,d.trigger(e.type,e)}var r=function(t){i(t)};d.zr.on("mousemove",r);var s=function(t){n(t)};d.zr.on("mouseup",s)}function n(t){function i(t){function i(t,i){for(var n=[],r=0;r<=Math.abs(parseInt((i.event.clientX-o)/p));r++)i.event.clientX-o>0?(m[0]=y[0]+p*r,n[0]=m[0]):(m[0]||(m[0]=y[0]),m[0]-e.points[0][0]>f?(m[0]=y[0]-p*r,n[0]=m[0]):n[0]=d.leftTop.position[0]+f);for(var s=0;s<=Math.abs(parseInt((i.event.clientY-h)/p));s++)i.event.clientY-h>0?(m[1]=y[1]+p*s,n[1]=m[1]):(m[1]||(m[1]=y[1]),m[1]-e.points[0][1]>g?(m[1]=y[1]-p*s,n[1]=m[1]):n[1]=d.leftTop.position[1]+g);t.attr("position",n);var a=[];a[0]=e.points[0],a[1]=[m[0],e.points[1][1]],a[2]=[m[0],m[1]],a[3]=[e.points[3][0],m[1]],a[4]=e.points[0];var l={};l.type="OperationNode:scaleDragRight",l.points=a,d.trigger(l.type,l)}d.rightBottom.position[0]-d.leftTop.position[0]<f+10?d.rightBottom.position[1]-d.leftTop.position[1]<g+10?(d.rightBottom.position[0]=d.leftTop.position[0]+(f+10),d.rightBottom.position[1]=d.leftTop.position[1]+(g+10)):(d.rightBottom.position[0]=d.leftTop.position[0]+f,i(d.rightBottom,t)):d.rightBottom.position[1]-d.leftTop.position[1]<g?(d.rightBottom.position[1]=d.leftTop.position[1]+g,
i(d.rightBottom,t)):i(d.rightBottom,t)}function n(t){d.zr.off("mousemove",r),d.zr.off("mouseup",s);var e={};e.event=t,e.arrowName="right",e.type="OperationNode:scaleDragEnd",e.startSlotPoints=c,e.startPosition=u,d.trigger(e.type,e)}var r=function(t){i(t)};d.zr.on("mousemove",r);var s=function(t){n(t)};d.zr.on("mouseup",s)}if(!this.forbidEdit&&a.isSubProcess(this.node)){var o,h,l,c,u,d=this,p=20,f=100,g=60,v=[];this.leftTop.on("mousedown",function(n){c=s.getSoltPoints(t),u=r.clone(t.position),l=e.points[0],o=n.event.clientX,h=n.event.clientY,i(n)});var y,m=[];this.rightBottom.on("mousedown",function(i){c=s.getSoltPoints(t),u=r.clone(t.position),y=e.points[2],o=i.event.clientX,h=i.event.clientY,n(i)}),this.leftTop.attr("position",[e.points[0][0]-10,e.points[0][1]-10]),this.rightBottom.attr("position",[e.points[2][0],e.points[2][1]])}t.parent?a.isSubProcess(t.parent)&&this.attr("position",[e.x+t.parent.position[0],e.y+t.parent.position[1]]):this.attr("position",[e.x,e.y])},n.ARROW_DRAGEND="OperationNode:dragendArrow",n.ARROW_DRAG="OperationNode:dragArrow",n.ARROW_DRAGSTART="OperationNode:dragstartArrow",n.DELETE_CLICK="OperationNode:deleteClick",r.inherits(n,h),t.exports=n},function(t,e,i){function n(t,e,i){r.call(this),this.node=t,this.zr=e,this.forbidEdit=i,this.render()}var r=i(76),o=i(4),s=i(3),a=i(96),h=i(45);n.ARROW_DRAGEND="OperationNode:dragendArrow",n.ARROW_DRAG="OperationNode:dragArrow",n.ARROW_DRAGSTART="OperationNode:dragstartArrow",n.DELETE_CLICK="OperationNode:deleteClick",h.canvasSupported?n.opicons={STRAIGHT:"data:image/png;base64,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",JAGGED:"data:image/png;base64,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",CURVE:"data:image/png;base64,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",DEL:"M73.641,45.957l-0.021,0.252c0,0.032,0.021,0.06,0.021,0.088c0,0.065-0.022,0.126-0.026,0.191l-2.685,54.878H70.91c-0.231,4.304-5.166,10.81-31.748,10.81c-26.58,0-31.509-6.506-31.746-10.81H7.41L4.731,46.488c-0.009-0.06-0.028-0.126-0.028-0.191c0-0.032,0.01-0.06,0.01-0.088l-0.01-0.252h0.028c0.099-0.466,0.364-0.919,0.784-1.353c3.439,3.477,17.191,4.051,33.646,4.051s30.221-0.574,33.642-4.051c0.426,0.434,0.711,0.887,0.784,1.353H73.641z M78.335,25.102v6.407c0,1.316-1.34,2.567-3.715,3.696c-6.266,2.936-19.777,4.975-35.459,4.975c-15.666,0-29.189-2.039-35.442-4.975C1.33,34.075,0,32.825,0,31.509v-6.407c0-3.374,8.681-6.286,21.359-7.724V3.929c0-2.16,1.768-3.929,3.93-3.929h26.314c2.164,0,3.938,1.773,3.938,3.938v13.296C68.98,18.606,78.333,21.611,78.335,25.102z M48.416,11.395c0-2.348-0.321-4.27-0.715-4.27c-0.393,0-2.641,0-4.979,0h-8.545c-2.352,0-4.592,0-4.989,0c-0.388,0-0.714,1.922-0.714,4.27v5.367l1.083-0.065c3.067-0.173,6.286-0.27,9.595-0.271c3.202,0,6.292,0.098,9.264,0.252V11.395z"}:n.opicons={STRAIGHT:"M13.961,2.309c-0.051-0.122-0.148-0.22-0.27-0.27L13.5,2h-5C8.224,2,8,2.224,8,2.5S8.224,3,8.5,3h3.793L2.146,13.146c-0.195,0.195-0.195,0.512,0,0.707s0.512,0.195,0.707,0L13,3.707V7.5C13,7.776,13.225,8,13.5,8S14,7.776,14,7.5v-5L13.961,2.309z",JAGGED:"M96.046,13.604H84.213c-1.104,0-2,0.896-2,2v42.188H38.314v-10.77c0-0.715-0.381-1.375-1-1.732c-0.619-0.357-1.382-0.355-2,0L2.954,63.977c-0.619,0.357-1,1.018-1,1.732s0.381,1.375,1,1.732l32.36,18.687c0.309,0.179,0.655,0.268,1,0.268s0.69-0.089,1-0.268c0.619-0.357,1-1.018,1-1.732V73.625h57.732c1.104,0,2-0.896,2-2V15.604C98.046,14.5,97.151,13.604,96.046,13.604z",CURVE:"M510.536,268.098c13.541,0,27.078-5.207,37.347-15.6c20.379-20.625,20.18-53.866-0.445-74.245L414.167,46.57c-9.905-9.786-23.325-15.244-37.215-15.154c-13.923,0.083-27.244,5.695-37.03,15.599l-129.912,131.48c-20.379,20.625-20.18,53.866,0.445,74.245c20.625,20.379,53.866,20.18,74.245-0.445l40.618-41.108c0.021,0.464,0.029,0.927,0.062,1.394c4.178,59.008,4.668,119.832,16.633,177.931c23.937,116.232,103.705,191.961,191.489,264.024c47.292,38.823,79.66,94.122,98.601,151.673c9.765,29.669,14.714,77.115,17.215,107.157c2.261,27.161,25.08,47.978,52.333,47.709l1.061-0.01c30.228-0.298,53.81-26.211,51.306-56.336c-2.921-35.15-8.858-89.828-20.925-127.49c-16.283-50.821-40.016-99.463-74.766-140.245c-33.993-39.892-75.456-72.403-113.338-108.373c-47.091-44.713-84.977-95.161-98.006-159.719c-10.541-52.231-12.789-105.215-16.461-158.562l43.118,42.604C483.87,263.053,497.205,268.098,510.536,268.098z",DEL:"M73.641,45.957l-0.021,0.252c0,0.032,0.021,0.06,0.021,0.088c0,0.065-0.022,0.126-0.026,0.191l-2.685,54.878H70.91c-0.231,4.304-5.166,10.81-31.748,10.81c-26.58,0-31.509-6.506-31.746-10.81H7.41L4.731,46.488c-0.009-0.06-0.028-0.126-0.028-0.191c0-0.032,0.01-0.06,0.01-0.088l-0.01-0.252h0.028c0.099-0.466,0.364-0.919,0.784-1.353c3.439,3.477,17.191,4.051,33.646,4.051s30.221-0.574,33.642-4.051c0.426,0.434,0.711,0.887,0.784,1.353H73.641z M78.335,25.102v6.407c0,1.316-1.34,2.567-3.715,3.696c-6.266,2.936-19.777,4.975-35.459,4.975c-15.666,0-29.189-2.039-35.442-4.975C1.33,34.075,0,32.825,0,31.509v-6.407c0-3.374,8.681-6.286,21.359-7.724V3.929c0-2.16,1.768-3.929,3.93-3.929h26.314c2.164,0,3.938,1.773,3.938,3.938v13.296C68.98,18.606,78.333,21.611,78.335,25.102z M48.416,11.395c0-2.348-0.321-4.27-0.715-4.27c-0.393,0-2.641,0-4.979,0h-8.545c-2.352,0-4.592,0-4.989,0c-0.388,0-0.714,1.922-0.714,4.27v5.367l1.083-0.065c3.067-0.173,6.286-0.27,9.595-0.271c3.202,0,6.292,0.098,9.264,0.252V11.395z"},n.prototype.render=function(){this.renderBase(),this.forbidEdit||this.renderOther()},n.prototype.renderBase=function(){this.createOperation()},n.prototype.createOperation=function(){var t=this;this.virtualRect=new s.Polyline({style:{lineDash:[2]}}),this.virtualRect.isSelfComputePos=!0,this.add(this.virtualRect),this.node.operationIcons&&o.each(this.node.operationIcons,function(e){var i=null;if(n.opicons[e.name+""]){if(this.forbidEdit)return;if("DEL"==e.name){var r={x:0,y:0,width:10,height:15};i=s.makePath(n.opicons[e.name+""],{style:{fill:"#000000"},z:t.node.z+1},r),e.callback?i.on("click",function(i){i.data=e,i.node=t.node,e.callback&&e.callback(i)}):i.on("click",function(e){var i={};i.event=e,i.target=this,i.type=n.DELETE_CLICK,t.trigger(i.type,i)})}else{if(h.canvasSupported){var l=document.createElement("img");l.src=n.opicons[e.name+""],i=new s.Image({style:{image:l,cursor:"default",width:15,height:15},draggable:!0,z:t.node.z+1,lineType:a["TYPE_"+e.name]})}else{var c={x:0,y:0,width:15,height:15};i=s.makePath(n.opicons[e.name+""],{style:{fill:"#000000"},draggable:!0,z:t.node.z+1,lineType:a["TYPE_"+e.name]},c)}var u=["dragstart","drag","dragend"];o.each(u,function(n){i.on(n,function(i){var r={};r.event=i,r.data=e.options,r.type="OperationNode:"+n+"Arrow",t.trigger(r.type,r)})})}}else i=new s.Image({style:{image:e.iconPath,width:e.width||15,height:e.height||15},z:t.node.z+1}),i.on("click",function(i){i.data=e,i.node=t.node,e.callback&&e.callback(i)});i.name=e.name,t.add(i)})},n.prototype.refreshPostion=function(t,e){var i=0,n=e.points[2];this.virtualRect.setShape({points:e.points}),this.eachChild(function(t){t.isSelfComputePos||t.attr("position",[n[0]+8+20*i++,n[1]-10])}),this.refreshPositionOther(t,e)},n.prototype.renderOther=function(){},n.prototype.refreshPositionOther=function(t,e){t.parent&&t.parent.isBg&&1==t.parent.isBg?this.attr("position",[e.x,e.y]):this.attr("position",[e.x+t.parent.position[0]+t.shape.x,e.y+t.parent.position[1]+t.shape.y])},o.inherits(n,r),t.exports=n},function(t,e,i){function n(){o.call(this),this.stencilType="SequenceFlow"}var r=i(4),o=i(105),s=i(78),a=i(96),h=i(60);n.prototype.connectorCreate=function(t,e,i,n){var r=new s({});return r.set("style.lineType",i),r.set("stencil.type",this.stencilType),this.connectorCreateByOptions(t,e,{model:r,isEdit:!0,style:{lineType:i}},n)},n.prototype.connectorCreateByOptions=function(t,e,i,n){var o=this,s=i.model;s.option.text={text:s.option.properties.name},i.text={text:s.option.properties.name};var l=new a(i);l.startNode=t,l.endNode=e,this.connectors.push(l),l.sPos=s.get("style.sPos"),l.ePos=s.get("style.ePos");var c=s.get("dockers");if(c&&c.length>=2){var u=h.loadArray(c);l.refresh(u)}else this.refreshConnector(l,!0);l.conPointsGroup.on("click",function(t){var e=t.target.type.split(a.SEPERATOR),i=t.target.connector;e[0]===a.START_NODE?i.sPos=e[1]:e[0]===a.END_NODE&&(i.ePos=e[1]),o.refreshConnector(i,!0);var r={};r.event=t,r.type="conPointsGroup:click",r.lineNode=o.selConnector,n.trigger(r.type,r)});var d=["dblclick","click"];if(r.each(d,function(t){l.on("Connector:"+t,function(e){var i=e.target;o.selConnector!==i&&(o.selConnector&&o.refreshConnector(o.selConnector),o.selConnector=i);var r={};r.event=e,r.type=t,r.target=o.selConnector,n.trigger(r.type,r)})}),!i.isFromModel){var p=t.model.get("outgoing");p.push(l.resourceId);var f=l.model.get("outgoing");f.push(e.resourceId)}return l},n.prototype.setModel=function(t,e){var i=(t.model.get("style.lineType"),t.options.text.text);t.options.text.text=e.properties.name,t.model.mergeOption(e),i!=e.properties.name&&this.refreshConnector(t,!0)},n.prototype.refreshLineByNode=function(t){for(var e=0,i=this.connectors.length;e<i;e++)this.connectors[e].startNode!=t&&this.connectors[e].endNode!=t||this.refreshConnector(this.connectors[e],!0)},r.inherits(n,o),t.exports=n},function(t,e,i){function n(){this.connectors=[],this.selConnector=null,this.tempConnector=null}var r=(i(76),i(73)),o=(i(3),i(60)),s=i(96),a=i(106),h=i(4);n.prototype.connectorForbidEdit=function(t){for(var e=0;e<this.connectors.length;e++)this.connectors[e].options.isEdit=!t},n.prototype.clearSelectCon=function(){null!=this.selConnector&&this.refreshConnector(this.selConnector)},n.prototype.deleteSelectCon=function(t,e){for(var i=0;i<this.connectors.length;i++)if(this.connectors[i].startNode==t||this.connectors[i].endNode==t){var n=this.connectors[i].startNode.model.get("outgoing");index=h.indexOf(n,this.connectors[i].resourceId),index!=-1&&n.splice(index,1),e.remove(this.connectors[i]),this.connectors.splice(i,1),i--,this.selConnector=null}},n.prototype.deleteLine=function(t){var e=this.selConnector.startNode.model.get("outgoing");if(n=h.indexOf(e,this.selConnector.resourceId),n!=-1&&e.splice(n,1),this.connectorMap){var i=this.getTwoNodeId(this.selConnector.startNode,this.selConnector.endNode);this.connectorMap.removeItem(i,this.selConnector)}t.remove(this.selConnector);var n=h.indexOf(this.connectors,this.selConnector);n!=-1&&this.connectors.splice(n,1),this.selConnector=null},n.prototype.refreshConnector=function(t,e){if(e||!t.turningPoints||t.turningPoints.length<2){t.model&&t.model.get("style.lineType")&&(t.options.style.lineType=t.model.get("style.lineType"));var i=this.getStartEndPoint(t),n=null;t.options.position&&t.options.position.escapeDistance&&(n=t.options.position.escapeDistance);var r=this.connector2Points(t.options.style.lineType,i[0],i[1],i[2],i[3],n);t.refresh(r[0][2])}t.clearHandles()},n.prototype.getStartEndPoint=function(t){var e=t.startNode,i=t.endNode,n=e.getRect?e.getRect().boundingRect:r.getRect(e).boundingRect,o=[Number(n.x),Number(n.y),Number(n.x)+Number(n.width),Number(n.y)+Number(n.height)],s=i.getRect?i.getRect().boundingRect:r.getRect(i).boundingRect,a=[Number(s.x),Number(s.y),Number(s.x)+Number(s.width),Number(s.y)+Number(s.height)],h=r.getConnectorPoints(n),l=r.getConnectorPoints(s);t.sPos&&t.ePos||(n.x<s.x?(t.sPos="right",t.ePos="left"):(t.sPos="left",t.ePos="right"));var c=this.calcPointExpression(t.sPos,h),u=this.calcPointExpression(t.ePos,l);return[c,u,o,a]},n.prototype.calcPointExpression=function(t,e){var i={top:e.top.x,left:e.left.y,right:e.right.y,bottom:e.bottom.x,center:e.center.x},n="<% print("+t+") %>",s=parseInt(r.template(n)(i));if(t.indexOf("top")!=-1)return new o(s,e.top.y);if(t.indexOf("left")!=-1)return new o(e.left.x,s);if(t.indexOf("right")!=-1)return new o(e.right.x,s);if(t.indexOf("bottom")!=-1)return new o(s,e.bottom.y);if(t.indexOf("center")!=-1)return new o(s,e.bottom.y);throw new Error("pos")},n.prototype.manageTempConnector=function(t,e,i){var n=t.getRect?t.getRect().boundingRect:r.getRect(t).boundingRect,o=[n.x,n.y,n.x+n.width,n.y+n.height],a=r.getConnectorPoints(n);this.tempConnector||(this.tempConnector=new s({isEdit:!1,style:{lineType:i}}));var h=this.tempConnector;n.x<e.x?(h.sPos="right",h.ePos="left"):(h.sPos="left",h.ePos="right"),h.options.style.lineType=i;var l=this.connector2Points(i,a[h.sPos],e,o,null);return h.refresh(l[0][2]),h},n.prototype.removeTempConnector=function(t){this.tempConnector&&(t.remove(this.tempConnector),this.tempConnector=null)},n.prototype.connector2Points=function(t,e,i,n,l,c){var u=[30,30];c&&(u=h.isArray(c)?c:[c,c]),a.group("connectionManager: connector2Points"),a.info("ConnectionManager: connector2Points ("+t+", "+e+", "+i+", "+n+", "+l+")");var d=[];switch(t){case s.TYPE_STRAIGHT:var p=[e.clone(),i.clone()];d.push(["straight","straight",p]);break;case s.TYPE_CURVE:case s.TYPE_JAGGED:var f=null,g=null;if(null!=n){var v=[];v.push(new o(e.x,n[1]-u[0])),v.push(new o(n[2]+u[0],e.y)),v.push(new o(e.x,n[3]+u[0])),v.push(new o(n[0]-u[0],e.y)),f=v[0];for(var y=1;y<v.length;y++)r.distance(e,v[y])<r.distance(e,f)&&(f=v[y])}if(null!=l){var v=[];v.push(new o(i.x,l[1]-u[1])),v.push(new o(l[2]+u[1],i.y)),v.push(new o(i.x,l[3]+u[1])),v.push(new o(l[0]-u[1],i.y)),g=v[0];for(var y=1;y<v.length;y++)r.distance(i,v[y])<r.distance(i,g)&&(g=v[y])}var m=[e],x=0;f&&(m.push(f),x=1),g&&m.push(g),m.push(i);var _=o.cloneArray(m);d.push(["s0","s0",_]);var b=o.cloneArray(m),w=o.cloneArray(b);w.splice(x+1,0,new o(w[x].x,w[x+1].y)),d.push(["s1","s1_1",w]);var A=o.cloneArray(b);A.splice(x+1,0,new o(A[x+1].x,A[x].y)),d.push(["s1","s1_2",A]);var P=o.cloneArray(m),T=new o((P[x].x+P[x+1].x)/2,P[x].y),M=new o((P[x].x+P[x+1].x)/2,P[x+1].y);P.splice(x+1,0,T,M),d.push(["s2","s2_1",P]);var C=o.cloneArray(m),E=new o(C[x].x,(C[x].y+C[x+1].y)/2),S=new o(C[x+1].x,(C[x].y+C[x+1].y)/2);C.splice(x+1,0,E,S),d.push(["s2","s2_2",C]);var L=o.cloneArray(m),R=[L[x].x+20,L[x+1].x+20];n&&R.push(n[2]+20),l&&R.push(l[2]+20);var N=r.max(R),k=new o(N,L[x].y),z=new o(N,L[x+1].y);L.splice(x+1,0,k,z),d.push(["s2","s2_3",L]);var O=o.cloneArray(m),B=[O[x].y-20,O[x+1].y-20];n&&B.push(n[1]-20),l&&B.push(l[1]-20);var I=r.min(B),D=new o(O[x].x,I),F=new o(O[x+1].x,I);O.splice(x+1,0,D,F),d.push(["s2","s2_4",O]);var H=o.cloneArray(m),Y=[H[x].x-20,H[x+1].x-20];n&&Y.push(n[0]-20),l&&Y.push(l[0]-20);var U=r.min(Y),q=new o(U,H[x].y),G=new o(U,H[x+1].y);H.splice(x+1,0,q,G),d.push(["s2","s2_5",H]);var V=o.cloneArray(m),W=[V[x].y+20,V[x+1].y+20];n&&W.push(n[3]+20),l&&W.push(l[3]+20);var X=r.max(W),j=new o(V[x].x,X),Q=new o(V[x+1].x,X);V.splice(x+1,0,j,Q),d.push(["s2","s2_6",V]),a.info("Filter orthogonal solutions. Initial number of solutions = "+d.length);for(var Z=[],J=0;J<d.length;J++){var K=d[J][2];r.orthogonalPath(K)&&Z.push(d[J])}if(d=Z,a.info("\n\tOrthogonalSolutions = "+d.length),e.equals(i))a.info("Start and end point coincide...skip backward solution. I think we will just fall on s0 :)");else{a.info("Filter backward solutions. Initial number of solutions = "+d.length);for(var $=[],tt="",J=0;J<d.length;J++){var K=d[J][2];r.forwardPath(K)?$.push(d[J]):tt=tt+"\n\t"+K}d=$,a.info("\n\t ForwardSolutions = "+d.length),0==d.length&&a.info("Discarded solutions: "+tt)}a.info("Filter non intersecting solutions. Initial number of solutions = "+d.length);for(var et=[],J=0;J<d.length;J++){var K=d[J][2],it=!1,nt=K.slice();(l||n)&&(nt=nt.slice(1,nt.length-1)),n&&(it=it||r.polylineIntersectsRectangle(nt,n)),l&&(it=it||r.polylineIntersectsRectangle(nt,l)),it||et.push(d[J])}0!=et.length&&(d=et),a.info("\n\t nonIntersectionSolutions = "+d.length),a.info("Get first class of solutions with same nr of points"),0==d.length&&a.info("This is not possible");for(var rt=d[0][2],ot=rt.length,st=[],J=0;J<d.length;J++){var K=d[J][2];K.length==ot&&st.push(d[J])}d=st,a.info("pick the first solution with 90 degree angles (less turnarounds)");for(var at=0,J=0;J<d.length;J++){var K=d[J][2];r.scorePath(d[at][2])<r.scorePath(d[J][2])&&(at=J)}d=[d[at]]}return t===s.TYPE_CURVE&&this.smoothCurve(d),a.groupEnd(),d},n.prototype.smoothCurve=function(t){var e=3;switch(e){case 0:break;case 1:for(var i=0;i<t.length;i++){var n=t[i][2],o=n[0],s=n[1],a=r.getMiddle(o,s);n.splice(1,0,a);var h=n[n.length-2],l=n[n.length-1],c=r.getMiddle(h,l);n.splice(n.length-1,0,c)}break;case 2:for(var i=0;i<t.length;i++){var u=t[i][0];if("s1"==u||"s2"==u){var n=t[i][2];n.splice(1,1),n.splice(n.length-2,1)}}break;case 3:for(var i=0;i<t.length;i++){var u=t[i][0];if("s1"==u){var n=t[i][2],d=r.collinearReduction(n);t[i][2]=d}}}},t.exports=n},function(t,e){var i={LOG_LEVEL_NONE:0,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_ERROR:3,level:this.LOG_LEVEL_ERROR,debug:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_DEBUG&&"function"==typeof console.debug&&console.debug(t)},info:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_INFO&&console.info(t)},error:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_ERROR&&console.error(t)},group:function(t){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.group&&console.group(t)},groupEnd:function(){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.groupEnd&&console.groupEnd()}};i.level=i.LOG_LEVEL_ERROR,t.exports=i},function(t,e,i){function n(t){this.lineOperations=[],this.isEdit=!0,this.connectionManager=t}var r=(i(76),i(73),i(3));i(60),i(4);n.prototype.creatOperation=function(t,e,i){var n=new r.Image({style:{image:e.icon,width:e.width||15,height:e.height||15}});return n.key=t,n.operation=!0,n.hide(),e.lineNode.icons.push(n),this.lineOperations.push(n),n.on("click",function(t){if(e.callback)e.callback(e.lineNode);else{var n={};n.event=t,n.type="click",n.elementType="LineOperationIcon",i.trigger(n.type,n)}}),n},n.prototype.bindOperation=function(t){if(0!=this.isEdit){for(var e=t.middle(),i=[],n=0;n<t.icons.length;n++)i.push(t.icons[n].style.width);for(var r=0,o=0;o<t.icons.length;o++)r+=i[o]+10;for(var s=0;s<t.icons.length;s++){for(var a=0,h=0;h<s;h++)a+=i[h]+10;t.icons[s].attr("position",[e[0]+a-r/2,e[1]+5]),t.icons[s].show()}}},n.prototype.hideAllLineOperation=function(){for(var t=0;t<this.lineOperations.length;t++){var e=this.lineOperations[t];e.hide()}},n.prototype.addIcon=function(t,e,i,n){if(e.lineNode.icons)for(var r=0;r<e.lineNode.icons.length;r++)if(e.lineNode.icons[r].key==t)return void this.bindOperation(e.lineNode);var o=this.creatOperation(t,e,n);return i.add(o),this.bindOperation(e.lineNode),o},n.prototype.deleteIconObj=function(t,e){return{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOBAMAAADpk+DfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAtUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGgKD4AAAAPdFJOUwDH/g+agESj4Y6zUiRnh7lnwbkAAABLSURBVAjXY2BgYDZgAIEnnkCa7a5cYGwCwwklIOhhMBEEgmIGnlAgOMDAprhQUGgDA5vWdJciXJRGR0dTAgPzQ0FBSaBpzMbGBgwAIoUW3sQ2EdkAAAAASUVORK5CYII=",width:12,height:14,lineNode:e,callback:function(i){for(var n=0;n<e.icons.length;n++)t.remove(e.icons[n]);this.connectionManager.deleteLine(t),this.hideAllLineOperation(),i.cancelBubble=!0}.bind(this)}},t.exports=n},function(t,e,i){var n=(i(76),i(73),i(3)),r=(i(60),i(4),{virtualXLine:null,virtualYLine:null,createGuidelines:function(t){this.virtualXLine=new n.Line({style:{lineDash:[5]},z:3}),this.virtualYLine=new n.Line({style:{lineDash:[5]},z:3}),t.add(this.virtualXLine),t.add(this.virtualYLine)},judgeAlignment:function(t,e,i,n){for(var r=this,o=0,s=e.length;o<s;o++){if(t[1]==e[o].position[1]){r.virtualXLine.attr("position",[0,t[1]]),r.virtualXLine.attr("shape",{x2:i});break}r.virtualXLine.attr("shape",{x2:0})}for(var a=0,h=e.length;a<h;a++){if(t[0]==e[a].position[0]){r.virtualYLine.attr("position",[t[0],0]),r.virtualYLine.attr("shape",{y2:n});break}r.virtualYLine.attr("shape",{y2:0})}}});t.exports=r},function(t,e){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t||window,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})},function(t,e,i){i(111),i(61).registerPainter("vml",i(113))},function(t,e,i){if(!i(45).canvasSupported){var n=i(14),r=i(25),o=i(26).CMD,s=i(19),a=i(24),h=i(23),l=i(7),c=i(41),u=i(42),d=i(6),p=i(38),f=i(112),g=Math.round,v=Math.sqrt,y=Math.abs,m=Math.cos,x=Math.sin,_=Math.max,b=n.applyTransform,w=",",A="progid:DXImageTransform.Microsoft",P=21600,T=P/2,M=1e5,C=1e3,E=function(t){
t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=P+","+P,t.coordorigin="0,0"},S=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},L=function(t,e,i){return"rgb("+[t,e,i].join(",")+")"},R=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},N=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},k=function(t,e,i){return(parseFloat(t)||0)*M+(parseFloat(e)||0)*C+i},z=function(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t},O=function(t,e,i){var n=s.parse(e);i=+i,isNaN(i)&&(i=1),n&&(t.color=L(n[0],n[1],n[2]),t.opacity=i*n[3])},B=function(t){var e=s.parse(t);return[L(e[0],e[1],e[2]),e[3]]},I=function(t,e,i){var n=e.fill;if(null!=n)if(n instanceof p){var r,o=0,s=[0,0],a=0,h=1,l=i.getBoundingRect(),c=l.width,u=l.height;if("linear"===n.type){r="gradient";var d=i.transform,f=[n.x*c,n.y*u],g=[n.x2*c,n.y2*u];d&&(b(f,f,d),b(g,g,d));var v=g[0]-f[0],y=g[1]-f[1];o=180*Math.atan2(v,y)/Math.PI,o<0&&(o+=360),o<1e-6&&(o=0)}else{r="gradientradial";var f=[n.x*c,n.y*u],d=i.transform,m=i.scale,x=c,w=u;s=[(f[0]-l.x)/x,(f[1]-l.y)/w],d&&b(f,f,d),x/=m[0]*P,w/=m[1]*P;var A=_(x,w);a=0/A,h=2*n.r/A-a}var T=n.colorStops.slice();T.sort(function(t,e){return t.offset-e.offset});for(var M=T.length,C=[],E=[],S=0;S<M;S++){var L=T[S],R=B(L.color);E.push(L.offset*h+a+" "+R[0]),0!==S&&S!==M-1||C.push(R)}if(M>=2){var N=C[0][0],k=C[1][0],z=C[0][1]*e.opacity,I=C[1][1]*e.opacity;t.type=r,t.method="none",t.focus="100%",t.angle=o,t.color=N,t.color2=k,t.colors=E.join(","),t.opacity=I,t.opacity2=z}"radial"===r&&(t.focusposition=s.join(","))}else O(t,n,e.opacity)},D=function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof p||O(t,e.stroke,e.opacity)},F=function(t,e,i,n){var r="fill"==e,o=t.getElementsByTagName(e)[0];null!=i[e]&&"none"!==i[e]&&(r||!r&&i.lineWidth)?(t[r?"filled":"stroked"]="true",i[e]instanceof p&&N(t,o),o||(o=f.createNode(e)),r?I(o,i,n):D(o,i),R(t,o)):(t[r?"filled":"stroked"]="false",N(t,o))},H=[[],[],[]],Y=function(t,e){var i,n,r,s,a,h,l=o.M,c=o.C,u=o.L,d=o.A,p=o.Q,f=[];for(s=0;s<t.length;){switch(r=t[s++],n="",i=0,r){case l:n=" m ",i=1,a=t[s++],h=t[s++],H[0][0]=a,H[0][1]=h;break;case u:n=" l ",i=1,a=t[s++],h=t[s++],H[0][0]=a,H[0][1]=h;break;case p:case c:n=" c ",i=3;var y,_,A=t[s++],M=t[s++],C=t[s++],E=t[s++];r===p?(y=C,_=E,C=(C+2*A)/3,E=(E+2*M)/3,A=(a+2*A)/3,M=(h+2*M)/3):(y=t[s++],_=t[s++]),H[0][0]=A,H[0][1]=M,H[1][0]=C,H[1][1]=E,H[2][0]=y,H[2][1]=_,a=y,h=_;break;case d:var S=0,L=0,R=1,N=1,k=0;e&&(S=e[4],L=e[5],R=v(e[0]*e[0]+e[1]*e[1]),N=v(e[2]*e[2]+e[3]*e[3]),k=Math.atan2(-e[1]/N,e[0]/R));var z=t[s++],O=t[s++],B=t[s++],I=t[s++],D=t[s++]+k,F=t[s++]+D+k;s++;var Y=t[s++],U=z+m(D)*B,q=O+x(D)*I,A=z+m(F)*B,M=O+x(F)*I,G=Y?" wa ":" at ";Math.abs(U-A)<1e-4&&(Math.abs(F-D)>.01?Y&&(U+=270/P):Math.abs(q-O)<1e-4?Y&&U<z||!Y&&U>z?M-=270/P:M+=270/P:Y&&q<O||!Y&&q>O?A+=270/P:A-=270/P),f.push(G,g(((z-B)*R+S)*P-T),w,g(((O-I)*N+L)*P-T),w,g(((z+B)*R+S)*P-T),w,g(((O+I)*N+L)*P-T),w,g((U*R+S)*P-T),w,g((q*N+L)*P-T),w,g((A*R+S)*P-T),w,g((M*N+L)*P-T)),a=A,h=M;break;case o.R:var V=H[0],W=H[1];V[0]=t[s++],V[1]=t[s++],W[0]=V[0]+t[s++],W[1]=V[1]+t[s++],e&&(b(V,V,e),b(W,W,e)),V[0]=g(V[0]*P-T),W[0]=g(W[0]*P-T),V[1]=g(V[1]*P-T),W[1]=g(W[1]*P-T),f.push(" m ",V[0],w,V[1]," l ",W[0],w,V[1]," l ",W[0],w,W[1]," l ",V[0],w,W[1]);break;case o.Z:f.push(" x ")}if(i>0){f.push(n);for(var X=0;X<i;X++){var j=H[X];e&&b(j,j,e),f.push(g(j[0]*P-T),w,g(j[1]*P-T),X<i-1?w:"")}}}return f.join("")};d.prototype.brushVML=function(t){var e=this.style,i=this._vmlEl;i||(i=f.createNode("shape"),E(i),this._vmlEl=i),F(i,"fill",e,this),F(i,"stroke",e,this);var n=this.transform,r=null!=n,o=i.getElementsByTagName("stroke")[0];if(o){var s=e.lineWidth;if(r&&!e.strokeNoScale){var a=n[0]*n[3]-n[1]*n[2];s*=v(y(a))}o.weight=s+"px"}var h=this.path;this.__dirtyPath&&(h.beginPath(),this.buildPath(h,this.shape),h.toStatic(),this.__dirtyPath=!1),i.path=Y(h.data,this.transform),i.style.zIndex=k(this.zlevel,this.z,this.z2),R(t,i),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},d.prototype.onRemove=function(t){N(t,this._vmlEl),this.removeRectText(t)},d.prototype.onAdd=function(t){R(t,this._vmlEl),this.appendRectText(t)};var U=function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()};c.prototype.brushVML=function(t){var e,i,n=this.style,r=n.image;if(U(r)){var o=r.src;if(o===this._imageSrc)e=this._imageWidth,i=this._imageHeight;else{var s=r.runtimeStyle,a=s.width,h=s.height;s.width="auto",s.height="auto",e=r.width,i=r.height,s.width=a,s.height=h,this._imageSrc=o,this._imageWidth=e,this._imageHeight=i}r=o}else r===this._imageSrc&&(e=this._imageWidth,i=this._imageHeight);if(r){var l=n.x||0,c=n.y||0,u=n.width,d=n.height,p=n.sWidth,y=n.sHeight,m=n.sx||0,x=n.sy||0,P=p&&y,T=this._vmlEl;T||(T=f.doc.createElement("div"),E(T),this._vmlEl=T);var M,C=T.style,S=!1,L=1,N=1;if(this.transform&&(M=this.transform,L=v(M[0]*M[0]+M[1]*M[1]),N=v(M[2]*M[2]+M[3]*M[3]),S=M[1]||M[2]),S){var z=[l,c],O=[l+u,c],B=[l,c+d],I=[l+u,c+d];b(z,z,M),b(O,O,M),b(B,B,M),b(I,I,M);var D=_(z[0],O[0],B[0],I[0]),F=_(z[1],O[1],B[1],I[1]),H=[];H.push("M11=",M[0]/L,w,"M12=",M[2]/N,w,"M21=",M[1]/L,w,"M22=",M[3]/N,w,"Dx=",g(l*L+M[4]),w,"Dy=",g(c*N+M[5])),C.padding="0 "+g(D)+"px "+g(F)+"px 0",C.filter=A+".Matrix("+H.join("")+", SizingMethod=clip)"}else M&&(l=l*L+M[4],c=c*N+M[5]),C.filter="",C.left=g(l)+"px",C.top=g(c)+"px";var Y=this._imageEl,q=this._cropEl;Y||(Y=f.doc.createElement("div"),this._imageEl=Y);var G=Y.style;if(P){if(e&&i)G.width=g(L*e*u/p)+"px",G.height=g(N*i*d/y)+"px";else{var V=new Image,W=this;V.onload=function(){V.onload=null,e=V.width,i=V.height,G.width=g(L*e*u/p)+"px",G.height=g(N*i*d/y)+"px",W._imageWidth=e,W._imageHeight=i,W._imageSrc=r},V.src=r}q||(q=f.doc.createElement("div"),q.style.overflow="hidden",this._cropEl=q);var X=q.style;X.width=g((u+m*u/p)*L),X.height=g((d+x*d/y)*N),X.filter=A+".Matrix(Dx="+-m*u/p*L+",Dy="+-x*d/y*N+")",q.parentNode||T.appendChild(q),Y.parentNode!=q&&q.appendChild(Y)}else G.width=g(L*u)+"px",G.height=g(N*d)+"px",T.appendChild(Y),q&&q.parentNode&&(T.removeChild(q),this._cropEl=null);var j="",Q=n.opacity;Q<1&&(j+=".Alpha(opacity="+g(100*Q)+") "),j+=A+".AlphaImageLoader(src="+r+", SizingMethod=scale)",G.filter=j,T.style.zIndex=k(this.zlevel,this.z,this.z2),R(t,T),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},c.prototype.onRemove=function(t){N(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},c.prototype.onAdd=function(t){R(t,this._vmlEl),this.appendRectText(t)};var q,G="normal",V={},W=0,X=100,j=document.createElement("div"),Q=function(t){var e=V[t];if(!e){W>X&&(W=0,V={});var i,n=j.style;try{n.font=t,i=n.fontFamily.split(",")[0]}catch(r){}e={style:n.fontStyle||G,variant:n.fontVariant||G,weight:n.fontWeight||G,size:0|parseFloat(n.fontSize||12),family:i||"Microsoft YaHei"},V[t]=e,W++}return e};a.measureText=function(t,e){var i=f.doc;q||(q=i.createElement("div"),q.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",f.doc.body.appendChild(q));try{q.style.font=e}catch(n){}return q.innerHTML="",q.appendChild(i.createTextNode(t)),{width:q.offsetWidth}};for(var Z=new r,J=function(t,e,i,n){var r=this.style,o=r.text;if(null!=o&&(o+=""),o){var s,h,l=r.textAlign,c=Q(r.textFont),u=c.style+" "+c.variant+" "+c.weight+" "+c.size+'px "'+c.family+'"',d=r.textBaseline,p=r.textVerticalAlign;i=i||a.getBoundingRect(o,u,l,d);var v=this.transform;if(v&&!n&&(Z.copy(e),Z.applyTransform(v),e=Z),n)s=e.x,h=e.y;else{var y=r.textPosition,m=r.textDistance;if(y instanceof Array)s=e.x+z(y[0],e.width),h=e.y+z(y[1],e.height),l=l||"left",d=d||"top";else{var x=a.adjustTextPositionOnRect(y,e,i,m);s=x.x,h=x.y,l=l||x.textAlign,d=d||x.textBaseline}}if(p){switch(p){case"middle":h-=i.height/2;break;case"bottom":h-=i.height}d="top"}var _=c.size;switch(d){case"hanging":case"top":h+=_/1.75;break;case"middle":break;default:h-=_/2.25}switch(l){case"left":break;case"center":s-=i.width/2;break;case"right":s-=i.width}var A,P,T,M=f.createNode,C=this._textVmlEl;C?(T=C.firstChild,A=T.nextSibling,P=A.nextSibling):(C=M("line"),A=M("path"),P=M("textpath"),T=M("skew"),P.style["v-text-align"]="left",E(C),A.textpathok=!0,P.on=!0,C.from="0 0",C.to="1000 0.05",R(C,T),R(C,A),R(C,P),this._textVmlEl=C);var L=[s,h],N=C.style;v&&n?(b(L,L,v),T.on=!0,T.matrix=v[0].toFixed(3)+w+v[2].toFixed(3)+w+v[1].toFixed(3)+w+v[3].toFixed(3)+",0,0",T.offset=(g(L[0])||0)+","+(g(L[1])||0),T.origin="0 0",N.left="0px",N.top="0px"):(T.on=!1,N.left=g(s)+"px",N.top=g(h)+"px"),P.string=S(o);try{P.style.font=u}catch(O){}F(C,"fill",{fill:n?r.fill:r.textFill,opacity:r.opacity},this),F(C,"stroke",{stroke:n?r.stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash},this),C.style.zIndex=k(this.zlevel,this.z,this.z2),R(t,C)}},K=function(t){N(t,this._textVmlEl),this._textVmlEl=null},$=function(t){R(t,this._textVmlEl)},tt=[h,l,c,d,u],et=0;et<tt.length;et++){var it=tt[et].prototype;it.drawRectText=J,it.removeRectText=K,it.appendRectText=$}u.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},u.prototype.onRemove=function(t){this.removeRectText(t)},u.prototype.onAdd=function(t){this.appendRectText(t)}}},function(t,e,i){if(!i(45).canvasSupported){var n,r="urn:schemas-microsoft-com:vml",o=window,s=o.document,a=!1;try{!s.namespaces.zrvml&&s.namespaces.add("zrvml",r),n=function(t){return s.createElement("<zrvml:"+t+' class="zrvml">')}}catch(h){n=function(t){return s.createElement("<"+t+' xmlns="'+r+'" class="zrvml">')}}var l=function(){if(!a){a=!0;var t=s.styleSheets;t.length<31?s.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}};t.exports={doc:s,initVML:l,createNode:n}}},function(t,e,i){function n(t){return parseInt(t,10)}function r(t,e){a.initVML(),this.root=t,this.storage=e;var i=document.createElement("div"),n=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",n.style.cssText="position:absolute;left:0;top:0;",t.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();var r=e.delFromMap,o=e.addToMap;e.delFromMap=function(t){var i=e.get(t);r.call(e,t),i&&i.onRemove&&i.onRemove(n)},e.addToMap=function(t){t.onAdd&&t.onAdd(n),o.call(e,t)},this._firstPaint=!0}function o(t){return function(){s('In IE8.0 VML mode painter not support method "'+t+'"')}}var s=i(21),a=i(112);r.prototype={constructor:r,getViewportRoot:function(){return this._vmlViewport},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,i=0;i<t.length;i++){var n=t[i];n.invisible||n.ignore?(n.__alreadyNotVisible||n.onRemove(e),n.__alreadyNotVisible=!0):(n.__alreadyNotVisible&&n.onAdd(e),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVML||n.brush).call(n,e),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){var t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!=t||this._height!=e){this._width=t,this._height=e;var i=this._vmlViewport.style;i.width=t+"px",i.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||n(e.width))-n(e.paddingLeft)-n(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||n(e.height))-n(e.paddingTop)-n(e.paddingBottom)|0}};for(var h=["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],l=0;l<h.length;l++){var c=h[l];r.prototype[c]=o(c)}t.exports=r}])});
//# sourceMappingURL=fish-topo-bpmn.min.js.map
